/**
 * @license RequireJS i18n 2.0.6 Copyright (c) 2010-2012, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/requirejs/i18n for details
 */

/*! jQuery v2.2.3 | (c) jQuery Foundation | jquery.org/license */

/**
 * @license
 * lodash lodash.com/license | Underscore.js 1.8.3 underscorejs.org/LICENSE
 */

/**
 * @license RequireJS domReady 2.0.1 Copyright (c) 2010-2012, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/requirejs/domReady for details
 */

// PTN Ninja by Craig Laparo is licensed under a Creative Commons
// Attribution-NonCommercial-ShareAlike 4.0 International License.
// http://creativecommons.org/licenses/by-nc-sa/4.0/

// Cross-broswer implementation of text ranges and selections
// documentation: http://bililite.com/blog/2011/01/17/cross-browser-text-ranges-and-selections/
// Version: 2.6
// Copyright (c) 2013 Daniel Wachsstock
// MIT license:
// Permission is hereby granted, free of charge, to any person
// obtaining a copy of this software and associated documentation
// files (the "Software"), to deal in the Software without
// restriction, including without limitation the rights to use,
// copy, modify, merge, publish, distribute, sublicense, and/or sell
// copies of the Software, and to permit persons to whom the
// Software is furnished to do so, subject to the following
// conditions:

// The above copyright notice and this permission notice shall be
// included in all copies or substantial portions of the Software.

// Copyright (c) 2013 Daniel Wachsstock
// MIT license:
// Permission is hereby granted, free of charge, to any person
// obtaining a copy of this software and associated documentation
// files (the "Software"), to deal in the Software without
// restriction, including without limitation the rights to use,
// copy, modify, merge, publish, distribute, sublicense, and/or sell
// copies of the Software, and to permit persons to whom the
// Software is furnished to do so, subject to the following
// conditions:

// Turn a textarea element into a pre element that can use a highlighter
// Designed for use with Prism (prismjs.com)
// usage: editor = bililiteRange.fancytext(element, Prism.highlightElement, threshold);
// the element should have the appropriate class=language-* for Prism.
// Version: 1.0
// Documentation: http://bililite.com/blog/2013/12/16/simple-syntax-highlighting-editor-with-prism/
// Copyright (c) 2013 Daniel Wachsstock
// depends: bililiteRange.js, bililiteRange.utils.js (the latter is only for autoindenting; if that's not used it is not necessary)

// MIT license:
// Permission is hereby granted, free of charge, to any person
// obtaining a copy of this software and associated documentation
// files (the "Software"), to deal in the Software without
// restriction, including without limitation the rights to use,
// copy, modify, merge, publish, distribute, sublicense, and/or sell
// copies of the Software, and to permit persons to whom the
// Software is furnished to do so, subject to the following
// conditions:

/*! @source http://purl.eligrey.com/github/FileSaver.js/blob/master/FileSaver.js */

// Updated to use the 2014 proposed W3C DOM events:
// http://www.w3.org/TR/DOM-Level-3-Events/
// http://www.w3.org/TR/DOM-Level-3-Events-key/
// See https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent.key for how it is currently (2015) implemented
//
// Version: 3.0
// Copyright (c) 2015 Daniel Wachsstock
// MIT license:
// Permission is hereby granted, free of charge, to any person
// obtaining a copy of this software and associated documentation
// files (the "Software"), to deal in the Software without
// restriction, including without limitation the rights to use,
// copy, modify, merge, publish, distribute, sublicense, and/or sell
// copies of the Software, and to permit persons to whom the
// Software is furnished to do so, subject to the following
// conditions:

/**
 * @license
 * Copyright 2015 Google Inc. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

// Source: https://github.com/darius/requestAnimationFrame/blob/master/requestAnimationFrame.js
// Adapted from https://gist.github.com/paulirish/1579671 which derived from
// http://paulirish.com/2011/requestanimationframe-for-smart-animating/
// http://my.opera.com/emoller/blog/2011/12/20/requestanimationframe-for-smart-er-animating
// requestAnimationFrame polyfill by Erik Möller.
// Fixes from Paul Irish, Tino Zijdel, Andrew Mao, Klemen Slavič, Darius Bacon
// MIT license

/**
 * Copyright 2015 Google Inc. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

!function(){"use strict";function e(e,t,n,i,s,r){t[e]&&(n.push(e),t[e]!==!0&&1!==t[e]||i.push(s+e+"/"+r))}function t(e,t,n,i,s){var r=i+t+"/"+s;require._fileExists(e.toUrl(r+".js"))&&n.push(r)}function n(e,t,i){var s;for(s in t)!t.hasOwnProperty(s)||e.hasOwnProperty(s)&&!i?"object"==typeof t[s]&&(!e[s]&&t[s]&&(e[s]={}),n(e[s],t[s],i)):e[s]=t[s]}var i=/(^.*(^|\/)nls(\/|$))([^\/]*)\/?([^\/]*)/;define("i18n",["module"],function(s){var r=s.config?s.config():{};return{version:"2.0.6",load:function(s,o,a,l){l=l||{},l.locale&&(r.locale=l.locale);var c,u,d,p=i.exec(s),h=p[1],f=p[4],_=p[5],m=f.split("-"),g=[],y={},v="";if(p[5]?(h=p[1],c=h+_):(c=s,_=p[4],f=r.locale,f||(f=r.locale="undefined"==typeof navigator?"root":(navigator.languages&&navigator.languages[0]||navigator.language||navigator.userLanguage||"root").toLowerCase()),m=f.split("-")),l.isBuild){for(g.push(c),t(o,"root",g,h,_),u=0;u<m.length;u++)d=m[u],v+=(v?"-":"")+d,t(o,v,g,h,_);o(g,function(){a()})}else o([c],function(t){var i,s=[];for(e("root",t,s,g,h,_),u=0;u<m.length;u++)i=m[u],v+=(v?"-":"")+i,e(v,t,s,g,h,_);o(g,function(){var e,i,r;for(e=s.length-1;e>-1&&s[e];e--)r=s[e],i=t[r],i!==!0&&1!==i||(i=o(h+r+"/"+_)),n(y,i);a(y)})})}}})}(),define("nls/main",{root:{app_title:"PTN Ninja",About_App:"About PTN Ninja",Animate_Board:"Animate Board",Axis_Labels:"Axis Labels",Board_3D:"3D Board",Board_Opacity:"Board Opacity",Board_Settings:"Board Settings",Board_Shadows:"Board Shadows",Cancel:"Cancel",Clock:"Clock",Close:"Close",Current_Move:"Current Move",Date:"Date",Edit_Mode:"Edit Mode",Event:"Event",First_Ply:"First Ply",Flat_Counts:"Flat Counts",Last_Ply:"Last Ply",Load_Sample_Game:"Load Sample Game",New_Game:"New Game",Next_Ply:"Next Ply",Off:"Off",OK:"OK",On:"On",Open:"Open",Permalink:"Link to this game",PlayPause:"Play/Pause",Play_Controls:"Play Controls",Play_Mode:"Play Mode",Play_Speed:"Play Speed",Player1:"Player1",Player1_name:"White",Player2:"Player2",Player2_name:"Black",Points:"Points",Preferences:"Preferences",Previous_Ply:"Previous Ply",Rating1:"Rating1",Rating2:"Rating2",Redo:"Redo",Result:"Result",Revert_Game:"Revert Game",Road_Connections:"Road Connections",Round:"Round",Save:"Save",Share:"Share",Show_Annotations:"Show Annotations",Show_FAB:"Show Mode Button",Show_Hide_Errors:"Show/Hide Errors",Show_Parse_Errors:"Show Parse Errors",Site:"Site",Size:"Size",Square_Highlights:"Square Highlights",TPS:"TPS",Tak:"Tak",Time:"Time",Tinue:"Tinuë",Trim_to_current_ply:"Trim to current ply",Undo:"Undo",Unplayed_Pieces:"Unplayed Pieces",n_characters:"<%=n%> characters",result:{1:"<%=player%> wins by default",F:"<%=player%> wins by flats",R:"<%=player%> wins by building a road",tie:"It's a tie"},confirm:{Revert_Game:{title:"Revert Game",content:"Are you sure you want to revert the game to its original state?"}},help:{board_3d_experimental:"3D Mode is experimental and may not work well or at all on some browsers or devices. It works best on Chrome."},error:{illegal_ply:'Illegal ply: "<b><%=ply%></b>"',invalid_movetext:'Invalid movetext: "<b><%=text%></b>"',invalid_notation:"Invalid notation",invalid_ply:'Invalid ply: "<b><%=ply%></b>"',invalid_square:'Invalid square: "<b><%=square%></b>"',invalid_tag:'Invalid tag: "<b><%=tag%></b>"',invalid_tag_value:'Invalid <%=tag%>: "<b><%=value%></b>"',invalid_TPS_dimensions:"Invalid TPS dimensions",missing_tags:"Missing required tag(s): <b><%=_.map(tags, _.upperFirst).join('</b>, <b>')%></b>",tps_missing_player:"Invalid TPS: Missing player",tps_missing_move:"Invalid TPS: Missing move number",unrecognized_tag:'Unrecognized tag: "<b><%=tag%></b>"'}}}),!function(e,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){function n(e){var t=!!e&&"length"in e&&e.length,n=re.type(e);return"function"!==n&&!re.isWindow(e)&&("array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e)}function i(e,t,n){if(re.isFunction(t))return re.grep(e,function(e,i){return!!t.call(e,i,e)!==n});if(t.nodeType)return re.grep(e,function(e){return e===t!==n});if("string"==typeof t){if(_e.test(t))return re.filter(t,e,n);t=re.filter(t,e)}return re.grep(e,function(e){return Q.call(t,e)>-1!==n})}function s(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}function r(e){var t={};return re.each(e.match(Ce)||[],function(e,n){t[n]=!0}),t}function o(){X.removeEventListener("DOMContentLoaded",o),e.removeEventListener("load",o),re.ready()}function a(){this.expando=re.expando+a.uid++}function l(e,t,n){var i;if(void 0===n&&1===e.nodeType)if(i="data-"+t.replace(Le,"-$&").toLowerCase(),n=e.getAttribute(i),"string"==typeof n){try{n="true"===n||"false"!==n&&("null"===n?null:+n+""===n?+n:Te.test(n)?re.parseJSON(n):n)}catch(e){}Se.set(e,t,n)}else n=void 0;return n}function c(e,t,n,i){var s,r=1,o=20,a=i?function(){return i.cur()}:function(){return re.css(e,t,"")},l=a(),c=n&&n[3]||(re.cssNumber[t]?"":"px"),u=(re.cssNumber[t]||"px"!==c&&+l)&&Ie.exec(re.css(e,t));if(u&&u[3]!==c){c=c||u[3],n=n||[],u=+l||1;do r=r||".5",u/=r,re.style(e,t,u+c);while(r!==(r=a()/l)&&1!==r&&--o)}return n&&(u=+u||+l||0,s=n[1]?u+(n[1]+1)*n[2]:+n[2],i&&(i.unit=c,i.start=u,i.end=s)),s}function u(e,t){var n="undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(t||"*"):"undefined"!=typeof e.querySelectorAll?e.querySelectorAll(t||"*"):[];return void 0===t||t&&re.nodeName(e,t)?re.merge([e],n):n}function d(e,t){for(var n=0,i=e.length;i>n;n++)ke.set(e[n],"globalEval",!t||ke.get(t[n],"globalEval"))}function p(e,t,n,i,s){for(var r,o,a,l,c,p,h=t.createDocumentFragment(),f=[],_=0,m=e.length;m>_;_++)if(r=e[_],r||0===r)if("object"===re.type(r))re.merge(f,r.nodeType?[r]:r);else if(Me.test(r)){for(o=o||h.appendChild(t.createElement("div")),a=(Pe.exec(r)||["",""])[1].toLowerCase(),l=je[a]||je._default,o.innerHTML=l[1]+re.htmlPrefilter(r)+l[2],p=l[0];p--;)o=o.lastChild;re.merge(f,o.childNodes),o=h.firstChild,o.textContent=""}else f.push(t.createTextNode(r));for(h.textContent="",_=0;r=f[_++];)if(i&&re.inArray(r,i)>-1)s&&s.push(r);else if(c=re.contains(r.ownerDocument,r),o=u(h.appendChild(r),"script"),c&&d(o),n)for(p=0;r=o[p++];)Oe.test(r.type||"")&&n.push(r);return h}function h(){return!0}function f(){return!1}function _(){try{return X.activeElement}catch(e){}}function m(e,t,n,i,s,r){var o,a;if("object"==typeof t){"string"!=typeof n&&(i=i||n,n=void 0);for(a in t)m(e,a,n,i,t[a],r);return e}if(null==i&&null==s?(s=n,i=n=void 0):null==s&&("string"==typeof n?(s=i,i=void 0):(s=i,i=n,n=void 0)),s===!1)s=f;else if(!s)return e;return 1===r&&(o=s,s=function(e){return re().off(e),o.apply(this,arguments)},s.guid=o.guid||(o.guid=re.guid++)),e.each(function(){re.event.add(this,t,s,i,n)})}function g(e,t){return re.nodeName(e,"table")&&re.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function y(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function v(e){var t=ze.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function b(e,t){var n,i,s,r,o,a,l,c;if(1===t.nodeType){if(ke.hasData(e)&&(r=ke.access(e),o=ke.set(t,r),c=r.events)){delete o.handle,o.events={};for(s in c)for(n=0,i=c[s].length;i>n;n++)re.event.add(t,s,c[s][n])}Se.hasData(e)&&(a=Se.access(e),l=re.extend({},a),Se.set(t,l))}}function C(e,t){var n=t.nodeName.toLowerCase();"input"===n&&De.test(e.type)?t.checked=e.checked:"input"!==n&&"textarea"!==n||(t.defaultValue=e.defaultValue)}function x(e,t,n,i){t=Z.apply([],t);var s,r,o,a,l,c,d=0,h=e.length,f=h-1,_=t[0],m=re.isFunction(_);if(m||h>1&&"string"==typeof _&&!ie.checkClone&&Ue.test(_))return e.each(function(s){var r=e.eq(s);m&&(t[0]=_.call(this,s,r.html())),x(r,t,n,i)});if(h&&(s=p(t,e[0].ownerDocument,!1,e,i),r=s.firstChild,1===s.childNodes.length&&(s=r),r||i)){for(o=re.map(u(s,"script"),y),a=o.length;h>d;d++)l=s,d!==f&&(l=re.clone(l,!0,!0),a&&re.merge(o,u(l,"script"))),n.call(e[d],l,d);if(a)for(c=o[o.length-1].ownerDocument,re.map(o,v),d=0;a>d;d++)l=o[d],Oe.test(l.type||"")&&!ke.access(l,"globalEval")&&re.contains(c,l)&&(l.src?re._evalUrl&&re._evalUrl(l.src):re.globalEval(l.textContent.replace(We,"")))}return e}function E(e,t,n){for(var i,s=t?re.filter(t,e):e,r=0;null!=(i=s[r]);r++)n||1!==i.nodeType||re.cleanData(u(i)),i.parentNode&&(n&&re.contains(i.ownerDocument,i)&&d(u(i,"script")),i.parentNode.removeChild(i));return e}function w(e,t){var n=re(t.createElement(e)).appendTo(t.body),i=re.css(n[0],"display");return n.detach(),i}function k(e){var t=X,n=Ve[e];return n||(n=w(e,t),"none"!==n&&n||(Ge=(Ge||re("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement),t=Ge[0].contentDocument,t.write(),t.close(),n=w(e,t),Ge.detach()),Ve[e]=n),n}function S(e,t,n){var i,s,r,o,a=e.style;return n=n||Ye(e),o=n?n.getPropertyValue(t)||n[t]:void 0,""!==o&&void 0!==o||re.contains(e.ownerDocument,e)||(o=re.style(e,t)),n&&!ie.pixelMarginRight()&&Xe.test(o)&&Ke.test(t)&&(i=a.width,s=a.minWidth,r=a.maxWidth,a.minWidth=a.maxWidth=a.width=o,o=n.width,a.width=i,a.minWidth=s,a.maxWidth=r),void 0!==o?o+"":o}function T(e,t){return{get:function(){return e()?void delete this.get:(this.get=t).apply(this,arguments)}}}function L(e){if(e in it)return e;for(var t=e[0].toUpperCase()+e.slice(1),n=nt.length;n--;)if(e=nt[n]+t,e in it)return e}function A(e,t,n){var i=Ie.exec(t);return i?Math.max(0,i[2]-(n||0))+(i[3]||"px"):t}function I(e,t,n,i,s){for(var r=n===(i?"border":"content")?4:"width"===t?1:0,o=0;4>r;r+=2)"margin"===n&&(o+=re.css(e,n+Re[r],!0,s)),i?("content"===n&&(o-=re.css(e,"padding"+Re[r],!0,s)),"margin"!==n&&(o-=re.css(e,"border"+Re[r]+"Width",!0,s))):(o+=re.css(e,"padding"+Re[r],!0,s),"padding"!==n&&(o+=re.css(e,"border"+Re[r]+"Width",!0,s)));return o}function R(t,n,i){var s=!0,r="width"===n?t.offsetWidth:t.offsetHeight,o=Ye(t),a="border-box"===re.css(t,"boxSizing",!1,o);if(X.msFullscreenElement&&e.top!==e&&t.getClientRects().length&&(r=Math.round(100*t.getBoundingClientRect()[n])),0>=r||null==r){if(r=S(t,n,o),(0>r||null==r)&&(r=t.style[n]),Xe.test(r))return r;s=a&&(ie.boxSizingReliable()||r===t.style[n]),r=parseFloat(r)||0}return r+I(t,n,i||(a?"border":"content"),s,o)+"px"}function N(e,t){for(var n,i,s,r=[],o=0,a=e.length;a>o;o++)i=e[o],i.style&&(r[o]=ke.get(i,"olddisplay"),n=i.style.display,t?(r[o]||"none"!==n||(i.style.display=""),""===i.style.display&&Ne(i)&&(r[o]=ke.access(i,"olddisplay",k(i.nodeName)))):(s=Ne(i),"none"===n&&s||ke.set(i,"olddisplay",s?n:re.css(i,"display"))));for(o=0;a>o;o++)i=e[o],i.style&&(t&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=t?r[o]||"":"none"));return e}function D(e,t,n,i,s){return new D.prototype.init(e,t,n,i,s)}function P(){return e.setTimeout(function(){st=void 0}),st=re.now()}function O(e,t){var n,i=0,s={height:e};for(t=t?1:0;4>i;i+=2-t)n=Re[i],s["margin"+n]=s["padding"+n]=e;return t&&(s.opacity=s.width=e),s}function j(e,t,n){for(var i,s=(q.tweeners[t]||[]).concat(q.tweeners["*"]),r=0,o=s.length;o>r;r++)if(i=s[r].call(n,t,e))return i}function M(e,t,n){var i,s,r,o,a,l,c,u,d=this,p={},h=e.style,f=e.nodeType&&Ne(e),_=ke.get(e,"fxshow");n.queue||(a=re._queueHooks(e,"fx"),null==a.unqueued&&(a.unqueued=0,l=a.empty.fire,a.empty.fire=function(){a.unqueued||l()}),a.unqueued++,d.always(function(){d.always(function(){a.unqueued--,re.queue(e,"fx").length||a.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[h.overflow,h.overflowX,h.overflowY],c=re.css(e,"display"),u="none"===c?ke.get(e,"olddisplay")||k(e.nodeName):c,"inline"===u&&"none"===re.css(e,"float")&&(h.display="inline-block")),n.overflow&&(h.overflow="hidden",d.always(function(){h.overflow=n.overflow[0],h.overflowX=n.overflow[1],h.overflowY=n.overflow[2]}));for(i in t)if(s=t[i],ot.exec(s)){if(delete t[i],r=r||"toggle"===s,s===(f?"hide":"show")){if("show"!==s||!_||void 0===_[i])continue;f=!0}p[i]=_&&_[i]||re.style(e,i)}else c=void 0;if(re.isEmptyObject(p))"inline"===("none"===c?k(e.nodeName):c)&&(h.display=c);else{_?"hidden"in _&&(f=_.hidden):_=ke.access(e,"fxshow",{}),r&&(_.hidden=!f),f?re(e).show():d.done(function(){re(e).hide()}),d.done(function(){var t;ke.remove(e,"fxshow");for(t in p)re.style(e,t,p[t])});for(i in p)o=j(f?_[i]:0,i,d),i in _||(_[i]=o.start,f&&(o.end=o.start,o.start="width"===i||"height"===i?1:0))}}function $(e,t){var n,i,s,r,o;for(n in e)if(i=re.camelCase(n),s=t[i],r=e[n],re.isArray(r)&&(s=r[1],r=e[n]=r[0]),n!==i&&(e[i]=r,delete e[n]),o=re.cssHooks[i],o&&"expand"in o){r=o.expand(r),delete e[i];for(n in r)n in e||(e[n]=r[n],t[n]=s)}else t[i]=s}function q(e,t,n){var i,s,r=0,o=q.prefilters.length,a=re.Deferred().always(function(){delete l.elem}),l=function(){if(s)return!1;for(var t=st||P(),n=Math.max(0,c.startTime+c.duration-t),i=n/c.duration||0,r=1-i,o=0,l=c.tweens.length;l>o;o++)c.tweens[o].run(r);return a.notifyWith(e,[c,r,n]),1>r&&l?n:(a.resolveWith(e,[c]),!1)},c=a.promise({elem:e,props:re.extend({},t),opts:re.extend(!0,{specialEasing:{},easing:re.easing._default},n),originalProperties:t,originalOptions:n,startTime:st||P(),duration:n.duration,tweens:[],createTween:function(t,n){var i=re.Tween(e,c.opts,t,n,c.opts.specialEasing[t]||c.opts.easing);return c.tweens.push(i),i},stop:function(t){var n=0,i=t?c.tweens.length:0;if(s)return this;for(s=!0;i>n;n++)c.tweens[n].run(1);return t?(a.notifyWith(e,[c,1,0]),a.resolveWith(e,[c,t])):a.rejectWith(e,[c,t]),this}}),u=c.props;for($(u,c.opts.specialEasing);o>r;r++)if(i=q.prefilters[r].call(c,e,u,c.opts))return re.isFunction(i.stop)&&(re._queueHooks(c.elem,c.opts.queue).stop=re.proxy(i.stop,i)),i;return re.map(u,j,c),re.isFunction(c.opts.start)&&c.opts.start.call(e,c),re.fx.timer(re.extend(l,{elem:e,anim:c,queue:c.opts.queue})),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always)}function F(e){return e.getAttribute&&e.getAttribute("class")||""}function B(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var i,s=0,r=t.toLowerCase().match(Ce)||[];if(re.isFunction(n))for(;i=r[s++];)"+"===i[0]?(i=i.slice(1)||"*",(e[i]=e[i]||[]).unshift(n)):(e[i]=e[i]||[]).push(n)}}function H(e,t,n,i){function s(a){var l;return r[a]=!0,re.each(e[a]||[],function(e,a){var c=a(t,n,i);return"string"!=typeof c||o||r[c]?o?!(l=c):void 0:(t.dataTypes.unshift(c),s(c),!1)}),l}var r={},o=e===St;return s(t.dataTypes[0])||!r["*"]&&s("*")}function U(e,t){var n,i,s=re.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((s[n]?e:i||(i={}))[n]=t[n]);return i&&re.extend(!0,e,i),e}function z(e,t,n){for(var i,s,r,o,a=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===i&&(i=e.mimeType||t.getResponseHeader("Content-Type"));if(i)for(s in a)if(a[s]&&a[s].test(i)){l.unshift(s);break}if(l[0]in n)r=l[0];else{for(s in n){if(!l[0]||e.converters[s+" "+l[0]]){r=s;break}o||(o=s)}r=r||o}return r?(r!==l[0]&&l.unshift(r),n[r]):void 0}function W(e,t,n,i){var s,r,o,a,l,c={},u=e.dataTypes.slice();if(u[1])for(o in e.converters)c[o.toLowerCase()]=e.converters[o];for(r=u.shift();r;)if(e.responseFields[r]&&(n[e.responseFields[r]]=t),!l&&i&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=r,r=u.shift())if("*"===r)r=l;else if("*"!==l&&l!==r){if(o=c[l+" "+r]||c["* "+r],!o)for(s in c)if(a=s.split(" "),a[1]===r&&(o=c[l+" "+a[0]]||c["* "+a[0]])){o===!0?o=c[s]:c[s]!==!0&&(r=a[0],u.unshift(a[1]));break}if(o!==!0)if(o&&e.throws)t=o(t);else try{t=o(t)}catch(e){return{state:"parsererror",error:o?e:"No conversion from "+l+" to "+r}}}return{state:"success",data:t}}function G(e,t,n,i){var s;if(re.isArray(t))re.each(t,function(t,s){n||It.test(e)?i(e,s):G(e+"["+("object"==typeof s&&null!=s?t:"")+"]",s,n,i)});else if(n||"object"!==re.type(t))i(e,t);else for(s in t)G(e+"["+s+"]",t[s],n,i)}function V(e){return re.isWindow(e)?e:9===e.nodeType&&e.defaultView}var K=[],X=e.document,Y=K.slice,Z=K.concat,J=K.push,Q=K.indexOf,ee={},te=ee.toString,ne=ee.hasOwnProperty,ie={},se="2.2.3",re=function(e,t){return new re.fn.init(e,t)},oe=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,ae=/^-ms-/,le=/-([\da-z])/gi,ce=function(e,t){return t.toUpperCase()};re.fn=re.prototype={jquery:se,constructor:re,selector:"",length:0,toArray:function(){return Y.call(this)},get:function(e){return null!=e?0>e?this[e+this.length]:this[e]:Y.call(this)},pushStack:function(e){var t=re.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e){return re.each(this,e)},map:function(e){return this.pushStack(re.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(Y.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(0>e?t:0);return this.pushStack(n>=0&&t>n?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:J,sort:K.sort,splice:K.splice},re.extend=re.fn.extend=function(){var e,t,n,i,s,r,o=arguments[0]||{},a=1,l=arguments.length,c=!1;for("boolean"==typeof o&&(c=o,o=arguments[a]||{},a++),"object"==typeof o||re.isFunction(o)||(o={}),a===l&&(o=this,a--);l>a;a++)if(null!=(e=arguments[a]))for(t in e)n=o[t],i=e[t],o!==i&&(c&&i&&(re.isPlainObject(i)||(s=re.isArray(i)))?(s?(s=!1,r=n&&re.isArray(n)?n:[]):r=n&&re.isPlainObject(n)?n:{},o[t]=re.extend(c,r,i)):void 0!==i&&(o[t]=i));return o},re.extend({expando:"jQuery"+(se+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===re.type(e)},isArray:Array.isArray,isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){var t=e&&e.toString();return!re.isArray(e)&&t-parseFloat(t)+1>=0},isPlainObject:function(e){var t;if("object"!==re.type(e)||e.nodeType||re.isWindow(e))return!1;if(e.constructor&&!ne.call(e,"constructor")&&!ne.call(e.constructor.prototype||{},"isPrototypeOf"))return!1;for(t in e);return void 0===t||ne.call(e,t)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?ee[te.call(e)]||"object":typeof e},globalEval:function(e){var t,n=eval;e=re.trim(e),e&&(1===e.indexOf("use strict")?(t=X.createElement("script"),t.text=e,X.head.appendChild(t).parentNode.removeChild(t)):n(e))},camelCase:function(e){return e.replace(ae,"ms-").replace(le,ce)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t){var i,s=0;if(n(e))for(i=e.length;i>s&&t.call(e[s],s,e[s])!==!1;s++);else for(s in e)if(t.call(e[s],s,e[s])===!1)break;return e},trim:function(e){return null==e?"":(e+"").replace(oe,"")},makeArray:function(e,t){var i=t||[];return null!=e&&(n(Object(e))?re.merge(i,"string"==typeof e?[e]:e):J.call(i,e)),i},inArray:function(e,t,n){return null==t?-1:Q.call(t,e,n)},merge:function(e,t){for(var n=+t.length,i=0,s=e.length;n>i;i++)e[s++]=t[i];return e.length=s,e},grep:function(e,t,n){for(var i,s=[],r=0,o=e.length,a=!n;o>r;r++)i=!t(e[r],r),i!==a&&s.push(e[r]);return s},map:function(e,t,i){var s,r,o=0,a=[];if(n(e))for(s=e.length;s>o;o++)r=t(e[o],o,i),null!=r&&a.push(r);else for(o in e)r=t(e[o],o,i),null!=r&&a.push(r);return Z.apply([],a)},guid:1,proxy:function(e,t){var n,i,s;return"string"==typeof t&&(n=e[t],t=e,e=n),re.isFunction(e)?(i=Y.call(arguments,2),s=function(){return e.apply(t||this,i.concat(Y.call(arguments)))},s.guid=e.guid=e.guid||re.guid++,s):void 0},now:Date.now,support:ie}),"function"==typeof Symbol&&(re.fn[Symbol.iterator]=K[Symbol.iterator]),re.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){ee["[object "+t+"]"]=t.toLowerCase()});var ue=function(e){function t(e,t,n,i){var s,r,o,a,l,c,d,h,f=t&&t.ownerDocument,_=t?t.nodeType:9;if(n=n||[],"string"!=typeof e||!e||1!==_&&9!==_&&11!==_)return n;if(!i&&((t?t.ownerDocument||t:F)!==N&&R(t),t=t||N,P)){if(11!==_&&(c=ge.exec(e)))if(s=c[1]){if(9===_){if(!(o=t.getElementById(s)))return n;if(o.id===s)return n.push(o),n}else if(f&&(o=f.getElementById(s))&&$(t,o)&&o.id===s)return n.push(o),n}else{if(c[2])return J.apply(n,t.getElementsByTagName(e)),n;if((s=c[3])&&C.getElementsByClassName&&t.getElementsByClassName)return J.apply(n,t.getElementsByClassName(s)),n}if(C.qsa&&!W[e+" "]&&(!O||!O.test(e))){if(1!==_)f=t,h=e;else if("object"!==t.nodeName.toLowerCase()){for((a=t.getAttribute("id"))?a=a.replace(ve,"\\$&"):t.setAttribute("id",a=q),d=k(e),r=d.length,l=pe.test(a)?"#"+a:"[id='"+a+"']";r--;)d[r]=l+" "+p(d[r]);h=d.join(","),f=ye.test(e)&&u(t.parentNode)||t}if(h)try{return J.apply(n,f.querySelectorAll(h)),n}catch(e){}finally{a===q&&t.removeAttribute("id")}}}return T(e.replace(ae,"$1"),t,n,i)}function n(){function e(n,i){return t.push(n+" ")>x.cacheLength&&delete e[t.shift()],e[n+" "]=i}var t=[];return e}function i(e){return e[q]=!0,e}function s(e){var t=N.createElement("div");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function r(e,t){for(var n=e.split("|"),i=n.length;i--;)x.attrHandle[n[i]]=t}function o(e,t){var n=t&&e,i=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||V)-(~e.sourceIndex||V);if(i)return i;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function a(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function l(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function c(e){return i(function(t){return t=+t,i(function(n,i){for(var s,r=e([],n.length,t),o=r.length;o--;)n[s=r[o]]&&(n[s]=!(i[s]=n[s]))})})}function u(e){return e&&"undefined"!=typeof e.getElementsByTagName&&e}function d(){}function p(e){for(var t=0,n=e.length,i="";n>t;t++)i+=e[t].value;return i}function h(e,t,n){var i=t.dir,s=n&&"parentNode"===i,r=H++;return t.first?function(t,n,r){for(;t=t[i];)if(1===t.nodeType||s)return e(t,n,r)}:function(t,n,o){var a,l,c,u=[B,r];if(o){for(;t=t[i];)if((1===t.nodeType||s)&&e(t,n,o))return!0}else for(;t=t[i];)if(1===t.nodeType||s){if(c=t[q]||(t[q]={}),l=c[t.uniqueID]||(c[t.uniqueID]={}),(a=l[i])&&a[0]===B&&a[1]===r)return u[2]=a[2];if(l[i]=u,u[2]=e(t,n,o))return!0}}}function f(e){return e.length>1?function(t,n,i){for(var s=e.length;s--;)if(!e[s](t,n,i))return!1;return!0}:e[0]}function _(e,n,i){for(var s=0,r=n.length;r>s;s++)t(e,n[s],i);return i}function m(e,t,n,i,s){for(var r,o=[],a=0,l=e.length,c=null!=t;l>a;a++)(r=e[a])&&(n&&!n(r,i,s)||(o.push(r),c&&t.push(a)));return o}function g(e,t,n,s,r,o){return s&&!s[q]&&(s=g(s)),r&&!r[q]&&(r=g(r,o)),i(function(i,o,a,l){var c,u,d,p=[],h=[],f=o.length,g=i||_(t||"*",a.nodeType?[a]:a,[]),y=!e||!i&&t?g:m(g,p,e,a,l),v=n?r||(i?e:f||s)?[]:o:y;if(n&&n(y,v,a,l),s)for(c=m(v,h),s(c,[],a,l),u=c.length;u--;)(d=c[u])&&(v[h[u]]=!(y[h[u]]=d));if(i){if(r||e){if(r){for(c=[],u=v.length;u--;)(d=v[u])&&c.push(y[u]=d);r(null,v=[],c,l)}for(u=v.length;u--;)(d=v[u])&&(c=r?ee(i,d):p[u])>-1&&(i[c]=!(o[c]=d))}}else v=m(v===o?v.splice(f,v.length):v),r?r(null,o,v,l):J.apply(o,v)})}function y(e){for(var t,n,i,s=e.length,r=x.relative[e[0].type],o=r||x.relative[" "],a=r?1:0,l=h(function(e){return e===t},o,!0),c=h(function(e){return ee(t,e)>-1},o,!0),u=[function(e,n,i){var s=!r&&(i||n!==L)||((t=n).nodeType?l(e,n,i):c(e,n,i));return t=null,s}];s>a;a++)if(n=x.relative[e[a].type])u=[h(f(u),n)];else{if(n=x.filter[e[a].type].apply(null,e[a].matches),n[q]){for(i=++a;s>i&&!x.relative[e[i].type];i++);return g(a>1&&f(u),a>1&&p(e.slice(0,a-1).concat({value:" "===e[a-2].type?"*":""})).replace(ae,"$1"),n,i>a&&y(e.slice(a,i)),s>i&&y(e=e.slice(i)),s>i&&p(e))}u.push(n)}return f(u)}function v(e,n){var s=n.length>0,r=e.length>0,o=function(i,o,a,l,c){var u,d,p,h=0,f="0",_=i&&[],g=[],y=L,v=i||r&&x.find.TAG("*",c),b=B+=null==y?1:Math.random()||.1,C=v.length;for(c&&(L=o===N||o||c);f!==C&&null!=(u=v[f]);f++){if(r&&u){for(d=0,o||u.ownerDocument===N||(R(u),a=!P);p=e[d++];)if(p(u,o||N,a)){l.push(u);break}c&&(B=b)}s&&((u=!p&&u)&&h--,i&&_.push(u))}if(h+=f,s&&f!==h){for(d=0;p=n[d++];)p(_,g,o,a);if(i){if(h>0)for(;f--;)_[f]||g[f]||(g[f]=Y.call(l));g=m(g)}J.apply(l,g),c&&!i&&g.length>0&&h+n.length>1&&t.uniqueSort(l)}return c&&(B=b,L=y),_};return s?i(o):o}var b,C,x,E,w,k,S,T,L,A,I,R,N,D,P,O,j,M,$,q="sizzle"+1*new Date,F=e.document,B=0,H=0,U=n(),z=n(),W=n(),G=function(e,t){return e===t&&(I=!0),0},V=1<<31,K={}.hasOwnProperty,X=[],Y=X.pop,Z=X.push,J=X.push,Q=X.slice,ee=function(e,t){for(var n=0,i=e.length;i>n;n++)if(e[n]===t)return n;return-1},te="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ne="[\\x20\\t\\r\\n\\f]",ie="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",se="\\["+ne+"*("+ie+")(?:"+ne+"*([*^$|!~]?=)"+ne+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+ie+"))|)"+ne+"*\\]",re=":("+ie+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+se+")*)|.*)\\)|)",oe=new RegExp(ne+"+","g"),ae=new RegExp("^"+ne+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ne+"+$","g"),le=new RegExp("^"+ne+"*,"+ne+"*"),ce=new RegExp("^"+ne+"*([>+~]|"+ne+")"+ne+"*"),ue=new RegExp("="+ne+"*([^\\]'\"]*?)"+ne+"*\\]","g"),de=new RegExp(re),pe=new RegExp("^"+ie+"$"),he={ID:new RegExp("^#("+ie+")"),CLASS:new RegExp("^\\.("+ie+")"),TAG:new RegExp("^("+ie+"|[*])"),ATTR:new RegExp("^"+se),PSEUDO:new RegExp("^"+re),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ne+"*(even|odd|(([+-]|)(\\d*)n|)"+ne+"*(?:([+-]|)"+ne+"*(\\d+)|))"+ne+"*\\)|)","i"),bool:new RegExp("^(?:"+te+")$","i"),needsContext:new RegExp("^"+ne+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ne+"*((?:-\\d)?\\d*)"+ne+"*\\)|)(?=[^-]|$)","i")},fe=/^(?:input|select|textarea|button)$/i,_e=/^h\d$/i,me=/^[^{]+\{\s*\[native \w/,ge=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ye=/[+~]/,ve=/'|\\/g,be=new RegExp("\\\\([\\da-f]{1,6}"+ne+"?|("+ne+")|.)","ig"),Ce=function(e,t,n){var i="0x"+t-65536;return i!==i||n?t:0>i?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)},xe=function(){R()};try{J.apply(X=Q.call(F.childNodes),F.childNodes),X[F.childNodes.length].nodeType}catch(e){J={apply:X.length?function(e,t){Z.apply(e,Q.call(t))}:function(e,t){for(var n=e.length,i=0;e[n++]=t[i++];);e.length=n-1}}}C=t.support={},w=t.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},R=t.setDocument=function(e){var t,n,i=e?e.ownerDocument||e:F;return i!==N&&9===i.nodeType&&i.documentElement?(N=i,D=N.documentElement,P=!w(N),(n=N.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",xe,!1):n.attachEvent&&n.attachEvent("onunload",xe)),C.attributes=s(function(e){return e.className="i",!e.getAttribute("className")}),C.getElementsByTagName=s(function(e){return e.appendChild(N.createComment("")),!e.getElementsByTagName("*").length}),C.getElementsByClassName=me.test(N.getElementsByClassName),C.getById=s(function(e){return D.appendChild(e).id=q,!N.getElementsByName||!N.getElementsByName(q).length}),C.getById?(x.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&P){var n=t.getElementById(e);return n?[n]:[]}},x.filter.ID=function(e){var t=e.replace(be,Ce);return function(e){return e.getAttribute("id")===t}}):(delete x.find.ID,x.filter.ID=function(e){var t=e.replace(be,Ce);return function(e){var n="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}}),x.find.TAG=C.getElementsByTagName?function(e,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e):C.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,i=[],s=0,r=t.getElementsByTagName(e);if("*"===e){for(;n=r[s++];)1===n.nodeType&&i.push(n);return i}return r},x.find.CLASS=C.getElementsByClassName&&function(e,t){return"undefined"!=typeof t.getElementsByClassName&&P?t.getElementsByClassName(e):void 0},j=[],O=[],(C.qsa=me.test(N.querySelectorAll))&&(s(function(e){D.appendChild(e).innerHTML="<a id='"+q+"'></a><select id='"+q+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&O.push("[*^$]="+ne+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||O.push("\\["+ne+"*(?:value|"+te+")"),e.querySelectorAll("[id~="+q+"-]").length||O.push("~="),e.querySelectorAll(":checked").length||O.push(":checked"),e.querySelectorAll("a#"+q+"+*").length||O.push(".#.+[+~]")}),s(function(e){var t=N.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&O.push("name"+ne+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||O.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),O.push(",.*:")})),(C.matchesSelector=me.test(M=D.matches||D.webkitMatchesSelector||D.mozMatchesSelector||D.oMatchesSelector||D.msMatchesSelector))&&s(function(e){C.disconnectedMatch=M.call(e,"div"),M.call(e,"[s!='']:x"),j.push("!=",re)}),O=O.length&&new RegExp(O.join("|")),j=j.length&&new RegExp(j.join("|")),t=me.test(D.compareDocumentPosition),$=t||me.test(D.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,i=t&&t.parentNode;return e===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):e.compareDocumentPosition&&16&e.compareDocumentPosition(i)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},G=t?function(e,t){if(e===t)return I=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n?n:(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&n||!C.sortDetached&&t.compareDocumentPosition(e)===n?e===N||e.ownerDocument===F&&$(F,e)?-1:t===N||t.ownerDocument===F&&$(F,t)?1:A?ee(A,e)-ee(A,t):0:4&n?-1:1)}:function(e,t){if(e===t)return I=!0,0;var n,i=0,s=e.parentNode,r=t.parentNode,a=[e],l=[t];if(!s||!r)return e===N?-1:t===N?1:s?-1:r?1:A?ee(A,e)-ee(A,t):0;if(s===r)return o(e,t);for(n=e;n=n.parentNode;)a.unshift(n);for(n=t;n=n.parentNode;)l.unshift(n);for(;a[i]===l[i];)i++;return i?o(a[i],l[i]):a[i]===F?-1:l[i]===F?1:0},N):N},t.matches=function(e,n){return t(e,null,null,n)},t.matchesSelector=function(e,n){if((e.ownerDocument||e)!==N&&R(e),n=n.replace(ue,"='$1']"),C.matchesSelector&&P&&!W[n+" "]&&(!j||!j.test(n))&&(!O||!O.test(n)))try{var i=M.call(e,n);if(i||C.disconnectedMatch||e.document&&11!==e.document.nodeType)return i}catch(e){}return t(n,N,null,[e]).length>0},t.contains=function(e,t){return(e.ownerDocument||e)!==N&&R(e),$(e,t)},t.attr=function(e,t){(e.ownerDocument||e)!==N&&R(e);var n=x.attrHandle[t.toLowerCase()],i=n&&K.call(x.attrHandle,t.toLowerCase())?n(e,t,!P):void 0;return void 0!==i?i:C.attributes||!P?e.getAttribute(t):(i=e.getAttributeNode(t))&&i.specified?i.value:null},t.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},t.uniqueSort=function(e){var t,n=[],i=0,s=0;if(I=!C.detectDuplicates,A=!C.sortStable&&e.slice(0),e.sort(G),I){for(;t=e[s++];)t===e[s]&&(i=n.push(s));for(;i--;)e.splice(n[i],1)}return A=null,e},E=t.getText=function(e){var t,n="",i=0,s=e.nodeType;if(s){if(1===s||9===s||11===s){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=E(e)}else if(3===s||4===s)return e.nodeValue}else for(;t=e[i++];)n+=E(t);return n},x=t.selectors={cacheLength:50,createPseudo:i,match:he,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(be,Ce),e[3]=(e[3]||e[4]||e[5]||"").replace(be,Ce),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||t.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&t.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return he.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&de.test(n)&&(t=k(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(be,Ce).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=U[e+" "];
return t||(t=new RegExp("(^|"+ne+")"+e+"("+ne+"|$)"))&&U(e,function(e){return t.test("string"==typeof e.className&&e.className||"undefined"!=typeof e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,n,i){return function(s){var r=t.attr(s,e);return null==r?"!="===n:!n||(r+="","="===n?r===i:"!="===n?r!==i:"^="===n?i&&0===r.indexOf(i):"*="===n?i&&r.indexOf(i)>-1:"$="===n?i&&r.slice(-i.length)===i:"~="===n?(" "+r.replace(oe," ")+" ").indexOf(i)>-1:"|="===n&&(r===i||r.slice(0,i.length+1)===i+"-"))}},CHILD:function(e,t,n,i,s){var r="nth"!==e.slice(0,3),o="last"!==e.slice(-4),a="of-type"===t;return 1===i&&0===s?function(e){return!!e.parentNode}:function(t,n,l){var c,u,d,p,h,f,_=r!==o?"nextSibling":"previousSibling",m=t.parentNode,g=a&&t.nodeName.toLowerCase(),y=!l&&!a,v=!1;if(m){if(r){for(;_;){for(p=t;p=p[_];)if(a?p.nodeName.toLowerCase()===g:1===p.nodeType)return!1;f=_="only"===e&&!f&&"nextSibling"}return!0}if(f=[o?m.firstChild:m.lastChild],o&&y){for(p=m,d=p[q]||(p[q]={}),u=d[p.uniqueID]||(d[p.uniqueID]={}),c=u[e]||[],h=c[0]===B&&c[1],v=h&&c[2],p=h&&m.childNodes[h];p=++h&&p&&p[_]||(v=h=0)||f.pop();)if(1===p.nodeType&&++v&&p===t){u[e]=[B,h,v];break}}else if(y&&(p=t,d=p[q]||(p[q]={}),u=d[p.uniqueID]||(d[p.uniqueID]={}),c=u[e]||[],h=c[0]===B&&c[1],v=h),v===!1)for(;(p=++h&&p&&p[_]||(v=h=0)||f.pop())&&((a?p.nodeName.toLowerCase()!==g:1!==p.nodeType)||!++v||(y&&(d=p[q]||(p[q]={}),u=d[p.uniqueID]||(d[p.uniqueID]={}),u[e]=[B,v]),p!==t)););return v-=s,v===i||v%i===0&&v/i>=0}}},PSEUDO:function(e,n){var s,r=x.pseudos[e]||x.setFilters[e.toLowerCase()]||t.error("unsupported pseudo: "+e);return r[q]?r(n):r.length>1?(s=[e,e,"",n],x.setFilters.hasOwnProperty(e.toLowerCase())?i(function(e,t){for(var i,s=r(e,n),o=s.length;o--;)i=ee(e,s[o]),e[i]=!(t[i]=s[o])}):function(e){return r(e,0,s)}):r}},pseudos:{not:i(function(e){var t=[],n=[],s=S(e.replace(ae,"$1"));return s[q]?i(function(e,t,n,i){for(var r,o=s(e,null,i,[]),a=e.length;a--;)(r=o[a])&&(e[a]=!(t[a]=r))}):function(e,i,r){return t[0]=e,s(t,null,r,n),t[0]=null,!n.pop()}}),has:i(function(e){return function(n){return t(e,n).length>0}}),contains:i(function(e){return e=e.replace(be,Ce),function(t){return(t.textContent||t.innerText||E(t)).indexOf(e)>-1}}),lang:i(function(e){return pe.test(e||"")||t.error("unsupported lang: "+e),e=e.replace(be,Ce).toLowerCase(),function(t){var n;do if(n=P?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===D},focus:function(e){return e===N.activeElement&&(!N.hasFocus||N.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!x.pseudos.empty(e)},header:function(e){return _e.test(e.nodeName)},input:function(e){return fe.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:c(function(){return[0]}),last:c(function(e,t){return[t-1]}),eq:c(function(e,t,n){return[0>n?n+t:n]}),even:c(function(e,t){for(var n=0;t>n;n+=2)e.push(n);return e}),odd:c(function(e,t){for(var n=1;t>n;n+=2)e.push(n);return e}),lt:c(function(e,t,n){for(var i=0>n?n+t:n;--i>=0;)e.push(i);return e}),gt:c(function(e,t,n){for(var i=0>n?n+t:n;++i<t;)e.push(i);return e})}},x.pseudos.nth=x.pseudos.eq;for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})x.pseudos[b]=a(b);for(b in{submit:!0,reset:!0})x.pseudos[b]=l(b);return d.prototype=x.filters=x.pseudos,x.setFilters=new d,k=t.tokenize=function(e,n){var i,s,r,o,a,l,c,u=z[e+" "];if(u)return n?0:u.slice(0);for(a=e,l=[],c=x.preFilter;a;){i&&!(s=le.exec(a))||(s&&(a=a.slice(s[0].length)||a),l.push(r=[])),i=!1,(s=ce.exec(a))&&(i=s.shift(),r.push({value:i,type:s[0].replace(ae," ")}),a=a.slice(i.length));for(o in x.filter)!(s=he[o].exec(a))||c[o]&&!(s=c[o](s))||(i=s.shift(),r.push({value:i,type:o,matches:s}),a=a.slice(i.length));if(!i)break}return n?a.length:a?t.error(e):z(e,l).slice(0)},S=t.compile=function(e,t){var n,i=[],s=[],r=W[e+" "];if(!r){for(t||(t=k(e)),n=t.length;n--;)r=y(t[n]),r[q]?i.push(r):s.push(r);r=W(e,v(s,i)),r.selector=e}return r},T=t.select=function(e,t,n,i){var s,r,o,a,l,c="function"==typeof e&&e,d=!i&&k(e=c.selector||e);if(n=n||[],1===d.length){if(r=d[0]=d[0].slice(0),r.length>2&&"ID"===(o=r[0]).type&&C.getById&&9===t.nodeType&&P&&x.relative[r[1].type]){if(t=(x.find.ID(o.matches[0].replace(be,Ce),t)||[])[0],!t)return n;c&&(t=t.parentNode),e=e.slice(r.shift().value.length)}for(s=he.needsContext.test(e)?0:r.length;s--&&(o=r[s],!x.relative[a=o.type]);)if((l=x.find[a])&&(i=l(o.matches[0].replace(be,Ce),ye.test(r[0].type)&&u(t.parentNode)||t))){if(r.splice(s,1),e=i.length&&p(r),!e)return J.apply(n,i),n;break}}return(c||S(e,d))(i,t,!P,n,!t||ye.test(e)&&u(t.parentNode)||t),n},C.sortStable=q.split("").sort(G).join("")===q,C.detectDuplicates=!!I,R(),C.sortDetached=s(function(e){return 1&e.compareDocumentPosition(N.createElement("div"))}),s(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||r("type|href|height|width",function(e,t,n){return n?void 0:e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),C.attributes&&s(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||r("value",function(e,t,n){return n||"input"!==e.nodeName.toLowerCase()?void 0:e.defaultValue}),s(function(e){return null==e.getAttribute("disabled")})||r(te,function(e,t,n){var i;return n?void 0:e[t]===!0?t.toLowerCase():(i=e.getAttributeNode(t))&&i.specified?i.value:null}),t}(e);re.find=ue,re.expr=ue.selectors,re.expr[":"]=re.expr.pseudos,re.uniqueSort=re.unique=ue.uniqueSort,re.text=ue.getText,re.isXMLDoc=ue.isXML,re.contains=ue.contains;var de=function(e,t,n){for(var i=[],s=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(s&&re(e).is(n))break;i.push(e)}return i},pe=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},he=re.expr.match.needsContext,fe=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,_e=/^.[^:#\[\.,]*$/;re.filter=function(e,t,n){var i=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===i.nodeType?re.find.matchesSelector(i,e)?[i]:[]:re.find.matches(e,re.grep(t,function(e){return 1===e.nodeType}))},re.fn.extend({find:function(e){var t,n=this.length,i=[],s=this;if("string"!=typeof e)return this.pushStack(re(e).filter(function(){for(t=0;n>t;t++)if(re.contains(s[t],this))return!0}));for(t=0;n>t;t++)re.find(e,s[t],i);return i=this.pushStack(n>1?re.unique(i):i),i.selector=this.selector?this.selector+" "+e:e,i},filter:function(e){return this.pushStack(i(this,e||[],!1))},not:function(e){return this.pushStack(i(this,e||[],!0))},is:function(e){return!!i(this,"string"==typeof e&&he.test(e)?re(e):e||[],!1).length}});var me,ge=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,ye=re.fn.init=function(e,t,n){var i,s;if(!e)return this;if(n=n||me,"string"==typeof e){if(i="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:ge.exec(e),!i||!i[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(i[1]){if(t=t instanceof re?t[0]:t,re.merge(this,re.parseHTML(i[1],t&&t.nodeType?t.ownerDocument||t:X,!0)),fe.test(i[1])&&re.isPlainObject(t))for(i in t)re.isFunction(this[i])?this[i](t[i]):this.attr(i,t[i]);return this}return s=X.getElementById(i[2]),s&&s.parentNode&&(this.length=1,this[0]=s),this.context=X,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):re.isFunction(e)?void 0!==n.ready?n.ready(e):e(re):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),re.makeArray(e,this))};ye.prototype=re.fn,me=re(X);var ve=/^(?:parents|prev(?:Until|All))/,be={children:!0,contents:!0,next:!0,prev:!0};re.fn.extend({has:function(e){var t=re(e,this),n=t.length;return this.filter(function(){for(var e=0;n>e;e++)if(re.contains(this,t[e]))return!0})},closest:function(e,t){for(var n,i=0,s=this.length,r=[],o=he.test(e)||"string"!=typeof e?re(e,t||this.context):0;s>i;i++)for(n=this[i];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(o?o.index(n)>-1:1===n.nodeType&&re.find.matchesSelector(n,e))){r.push(n);break}return this.pushStack(r.length>1?re.uniqueSort(r):r)},index:function(e){return e?"string"==typeof e?Q.call(re(e),this[0]):Q.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(re.uniqueSort(re.merge(this.get(),re(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),re.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return de(e,"parentNode")},parentsUntil:function(e,t,n){return de(e,"parentNode",n)},next:function(e){return s(e,"nextSibling")},prev:function(e){return s(e,"previousSibling")},nextAll:function(e){return de(e,"nextSibling")},prevAll:function(e){return de(e,"previousSibling")},nextUntil:function(e,t,n){return de(e,"nextSibling",n)},prevUntil:function(e,t,n){return de(e,"previousSibling",n)},siblings:function(e){return pe((e.parentNode||{}).firstChild,e)},children:function(e){return pe(e.firstChild)},contents:function(e){return e.contentDocument||re.merge([],e.childNodes)}},function(e,t){re.fn[e]=function(n,i){var s=re.map(this,t,n);return"Until"!==e.slice(-5)&&(i=n),i&&"string"==typeof i&&(s=re.filter(i,s)),this.length>1&&(be[e]||re.uniqueSort(s),ve.test(e)&&s.reverse()),this.pushStack(s)}});var Ce=/\S+/g;re.Callbacks=function(e){e="string"==typeof e?r(e):re.extend({},e);var t,n,i,s,o=[],a=[],l=-1,c=function(){for(s=e.once,i=t=!0;a.length;l=-1)for(n=a.shift();++l<o.length;)o[l].apply(n[0],n[1])===!1&&e.stopOnFalse&&(l=o.length,n=!1);e.memory||(n=!1),t=!1,s&&(o=n?[]:"")},u={add:function(){return o&&(n&&!t&&(l=o.length-1,a.push(n)),function t(n){re.each(n,function(n,i){re.isFunction(i)?e.unique&&u.has(i)||o.push(i):i&&i.length&&"string"!==re.type(i)&&t(i)})}(arguments),n&&!t&&c()),this},remove:function(){return re.each(arguments,function(e,t){for(var n;(n=re.inArray(t,o,n))>-1;)o.splice(n,1),l>=n&&l--}),this},has:function(e){return e?re.inArray(e,o)>-1:o.length>0},empty:function(){return o&&(o=[]),this},disable:function(){return s=a=[],o=n="",this},disabled:function(){return!o},lock:function(){return s=a=[],n||(o=n=""),this},locked:function(){return!!s},fireWith:function(e,n){return s||(n=n||[],n=[e,n.slice?n.slice():n],a.push(n),t||c()),this},fire:function(){return u.fireWith(this,arguments),this},fired:function(){return!!i}};return u},re.extend({Deferred:function(e){var t=[["resolve","done",re.Callbacks("once memory"),"resolved"],["reject","fail",re.Callbacks("once memory"),"rejected"],["notify","progress",re.Callbacks("memory")]],n="pending",i={state:function(){return n},always:function(){return s.done(arguments).fail(arguments),this},then:function(){var e=arguments;return re.Deferred(function(n){re.each(t,function(t,r){var o=re.isFunction(e[t])&&e[t];s[r[1]](function(){var e=o&&o.apply(this,arguments);e&&re.isFunction(e.promise)?e.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[r[0]+"With"](this===i?n.promise():this,o?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?re.extend(e,i):i}},s={};return i.pipe=i.then,re.each(t,function(e,r){var o=r[2],a=r[3];i[r[1]]=o.add,a&&o.add(function(){n=a},t[1^e][2].disable,t[2][2].lock),s[r[0]]=function(){return s[r[0]+"With"](this===s?i:this,arguments),this},s[r[0]+"With"]=o.fireWith}),i.promise(s),e&&e.call(s,s),s},when:function(e){var t,n,i,s=0,r=Y.call(arguments),o=r.length,a=1!==o||e&&re.isFunction(e.promise)?o:0,l=1===a?e:re.Deferred(),c=function(e,n,i){return function(s){n[e]=this,i[e]=arguments.length>1?Y.call(arguments):s,i===t?l.notifyWith(n,i):--a||l.resolveWith(n,i)}};if(o>1)for(t=new Array(o),n=new Array(o),i=new Array(o);o>s;s++)r[s]&&re.isFunction(r[s].promise)?r[s].promise().progress(c(s,n,t)).done(c(s,i,r)).fail(l.reject):--a;return a||l.resolveWith(i,r),l.promise()}});var xe;re.fn.ready=function(e){return re.ready.promise().done(e),this},re.extend({isReady:!1,readyWait:1,holdReady:function(e){e?re.readyWait++:re.ready(!0)},ready:function(e){(e===!0?--re.readyWait:re.isReady)||(re.isReady=!0,e!==!0&&--re.readyWait>0||(xe.resolveWith(X,[re]),re.fn.triggerHandler&&(re(X).triggerHandler("ready"),re(X).off("ready"))))}}),re.ready.promise=function(t){return xe||(xe=re.Deferred(),"complete"===X.readyState||"loading"!==X.readyState&&!X.documentElement.doScroll?e.setTimeout(re.ready):(X.addEventListener("DOMContentLoaded",o),e.addEventListener("load",o))),xe.promise(t)},re.ready.promise();var Ee=function(e,t,n,i,s,r,o){var a=0,l=e.length,c=null==n;if("object"===re.type(n)){s=!0;for(a in n)Ee(e,t,a,n[a],!0,r,o)}else if(void 0!==i&&(s=!0,re.isFunction(i)||(o=!0),c&&(o?(t.call(e,i),t=null):(c=t,t=function(e,t,n){return c.call(re(e),n)})),t))for(;l>a;a++)t(e[a],n,o?i:i.call(e[a],a,t(e[a],n)));return s?e:c?t.call(e):l?t(e[0],n):r},we=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};a.uid=1,a.prototype={register:function(e,t){var n=t||{};return e.nodeType?e[this.expando]=n:Object.defineProperty(e,this.expando,{value:n,writable:!0,configurable:!0}),e[this.expando]},cache:function(e){if(!we(e))return{};var t=e[this.expando];return t||(t={},we(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var i,s=this.cache(e);if("string"==typeof t)s[t]=n;else for(i in t)s[i]=t[i];return s},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][t]},access:function(e,t,n){var i;return void 0===t||t&&"string"==typeof t&&void 0===n?(i=this.get(e,t),void 0!==i?i:this.get(e,re.camelCase(t))):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,i,s,r=e[this.expando];if(void 0!==r){if(void 0===t)this.register(e);else{re.isArray(t)?i=t.concat(t.map(re.camelCase)):(s=re.camelCase(t),t in r?i=[t,s]:(i=s,i=i in r?[i]:i.match(Ce)||[])),n=i.length;for(;n--;)delete r[i[n]]}(void 0===t||re.isEmptyObject(r))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!re.isEmptyObject(t)}};var ke=new a,Se=new a,Te=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Le=/[A-Z]/g;re.extend({hasData:function(e){return Se.hasData(e)||ke.hasData(e)},data:function(e,t,n){return Se.access(e,t,n)},removeData:function(e,t){Se.remove(e,t)},_data:function(e,t,n){return ke.access(e,t,n)},_removeData:function(e,t){ke.remove(e,t)}}),re.fn.extend({data:function(e,t){var n,i,s,r=this[0],o=r&&r.attributes;if(void 0===e){if(this.length&&(s=Se.get(r),1===r.nodeType&&!ke.get(r,"hasDataAttrs"))){for(n=o.length;n--;)o[n]&&(i=o[n].name,0===i.indexOf("data-")&&(i=re.camelCase(i.slice(5)),l(r,i,s[i])));ke.set(r,"hasDataAttrs",!0)}return s}return"object"==typeof e?this.each(function(){Se.set(this,e)}):Ee(this,function(t){var n,i;if(r&&void 0===t){if(n=Se.get(r,e)||Se.get(r,e.replace(Le,"-$&").toLowerCase()),void 0!==n)return n;if(i=re.camelCase(e),n=Se.get(r,i),void 0!==n)return n;if(n=l(r,i,void 0),void 0!==n)return n}else i=re.camelCase(e),this.each(function(){var n=Se.get(this,i);Se.set(this,i,t),e.indexOf("-")>-1&&void 0!==n&&Se.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){Se.remove(this,e)})}}),re.extend({queue:function(e,t,n){var i;return e?(t=(t||"fx")+"queue",i=ke.get(e,t),n&&(!i||re.isArray(n)?i=ke.access(e,t,re.makeArray(n)):i.push(n)),i||[]):void 0},dequeue:function(e,t){t=t||"fx";var n=re.queue(e,t),i=n.length,s=n.shift(),r=re._queueHooks(e,t),o=function(){re.dequeue(e,t)};"inprogress"===s&&(s=n.shift(),i--),s&&("fx"===t&&n.unshift("inprogress"),delete r.stop,s.call(e,o,r)),!i&&r&&r.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return ke.get(e,n)||ke.access(e,n,{empty:re.Callbacks("once memory").add(function(){ke.remove(e,[t+"queue",n])})})}}),re.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?re.queue(this[0],e):void 0===t?this:this.each(function(){var n=re.queue(this,e,t);re._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&re.dequeue(this,e)})},dequeue:function(e){return this.each(function(){re.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,i=1,s=re.Deferred(),r=this,o=this.length,a=function(){--i||s.resolveWith(r,[r])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";o--;)n=ke.get(r[o],e+"queueHooks"),n&&n.empty&&(i++,n.empty.add(a));return a(),s.promise(t)}});var Ae=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Ie=new RegExp("^(?:([+-])=|)("+Ae+")([a-z%]*)$","i"),Re=["Top","Right","Bottom","Left"],Ne=function(e,t){return e=t||e,"none"===re.css(e,"display")||!re.contains(e.ownerDocument,e)},De=/^(?:checkbox|radio)$/i,Pe=/<([\w:-]+)/,Oe=/^$|\/(?:java|ecma)script/i,je={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};je.optgroup=je.option,je.tbody=je.tfoot=je.colgroup=je.caption=je.thead,je.th=je.td;var Me=/<|&#?\w+;/;!function(){var e=X.createDocumentFragment(),t=e.appendChild(X.createElement("div")),n=X.createElement("input");n.setAttribute("type","radio"),n.setAttribute("checked","checked"),n.setAttribute("name","t"),t.appendChild(n),ie.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,t.innerHTML="<textarea>x</textarea>",ie.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue}();var $e=/^key/,qe=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Fe=/^([^.]*)(?:\.(.+)|)/;re.event={global:{},add:function(e,t,n,i,s){var r,o,a,l,c,u,d,p,h,f,_,m=ke.get(e);if(m)for(n.handler&&(r=n,n=r.handler,s=r.selector),n.guid||(n.guid=re.guid++),(l=m.events)||(l=m.events={}),(o=m.handle)||(o=m.handle=function(t){return"undefined"!=typeof re&&re.event.triggered!==t.type?re.event.dispatch.apply(e,arguments):void 0}),t=(t||"").match(Ce)||[""],c=t.length;c--;)a=Fe.exec(t[c])||[],h=_=a[1],f=(a[2]||"").split(".").sort(),h&&(d=re.event.special[h]||{},h=(s?d.delegateType:d.bindType)||h,d=re.event.special[h]||{},u=re.extend({type:h,origType:_,data:i,handler:n,guid:n.guid,selector:s,needsContext:s&&re.expr.match.needsContext.test(s),namespace:f.join(".")},r),(p=l[h])||(p=l[h]=[],p.delegateCount=0,d.setup&&d.setup.call(e,i,f,o)!==!1||e.addEventListener&&e.addEventListener(h,o)),d.add&&(d.add.call(e,u),u.handler.guid||(u.handler.guid=n.guid)),s?p.splice(p.delegateCount++,0,u):p.push(u),re.event.global[h]=!0)},remove:function(e,t,n,i,s){var r,o,a,l,c,u,d,p,h,f,_,m=ke.hasData(e)&&ke.get(e);if(m&&(l=m.events)){for(t=(t||"").match(Ce)||[""],c=t.length;c--;)if(a=Fe.exec(t[c])||[],h=_=a[1],f=(a[2]||"").split(".").sort(),h){for(d=re.event.special[h]||{},h=(i?d.delegateType:d.bindType)||h,p=l[h]||[],a=a[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),o=r=p.length;r--;)u=p[r],!s&&_!==u.origType||n&&n.guid!==u.guid||a&&!a.test(u.namespace)||i&&i!==u.selector&&("**"!==i||!u.selector)||(p.splice(r,1),u.selector&&p.delegateCount--,d.remove&&d.remove.call(e,u));o&&!p.length&&(d.teardown&&d.teardown.call(e,f,m.handle)!==!1||re.removeEvent(e,h,m.handle),delete l[h])}else for(h in l)re.event.remove(e,h+t[c],n,i,!0);re.isEmptyObject(l)&&ke.remove(e,"handle events")}},dispatch:function(e){e=re.event.fix(e);var t,n,i,s,r,o=[],a=Y.call(arguments),l=(ke.get(this,"events")||{})[e.type]||[],c=re.event.special[e.type]||{};if(a[0]=e,e.delegateTarget=this,!c.preDispatch||c.preDispatch.call(this,e)!==!1){for(o=re.event.handlers.call(this,e,l),t=0;(s=o[t++])&&!e.isPropagationStopped();)for(e.currentTarget=s.elem,n=0;(r=s.handlers[n++])&&!e.isImmediatePropagationStopped();)e.rnamespace&&!e.rnamespace.test(r.namespace)||(e.handleObj=r,e.data=r.data,i=((re.event.special[r.origType]||{}).handle||r.handler).apply(s.elem,a),void 0!==i&&(e.result=i)===!1&&(e.preventDefault(),e.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,e),e.result}},handlers:function(e,t){var n,i,s,r,o=[],a=t.delegateCount,l=e.target;if(a&&l.nodeType&&("click"!==e.type||isNaN(e.button)||e.button<1))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&(l.disabled!==!0||"click"!==e.type)){for(i=[],n=0;a>n;n++)r=t[n],s=r.selector+" ",void 0===i[s]&&(i[s]=r.needsContext?re(s,this).index(l)>-1:re.find(s,this,null,[l]).length),i[s]&&i.push(r);i.length&&o.push({elem:l,handlers:i})}return a<t.length&&o.push({elem:this,handlers:t.slice(a)}),o},props:"altKey bubbles cancelable ctrlKey currentTarget detail eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var n,i,s,r=t.button;return null==e.pageX&&null!=t.clientX&&(n=e.target.ownerDocument||X,i=n.documentElement,s=n.body,e.pageX=t.clientX+(i&&i.scrollLeft||s&&s.scrollLeft||0)-(i&&i.clientLeft||s&&s.clientLeft||0),e.pageY=t.clientY+(i&&i.scrollTop||s&&s.scrollTop||0)-(i&&i.clientTop||s&&s.clientTop||0)),e.which||void 0===r||(e.which=1&r?1:2&r?3:4&r?2:0),e}},fix:function(e){if(e[re.expando])return e;var t,n,i,s=e.type,r=e,o=this.fixHooks[s];for(o||(this.fixHooks[s]=o=qe.test(s)?this.mouseHooks:$e.test(s)?this.keyHooks:{}),i=o.props?this.props.concat(o.props):this.props,e=new re.Event(r),t=i.length;t--;)n=i[t],e[n]=r[n];return e.target||(e.target=X),3===e.target.nodeType&&(e.target=e.target.parentNode),o.filter?o.filter(e,r):e},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==_()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===_()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&re.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(e){return re.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},re.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},re.Event=function(e,t){return this instanceof re.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&e.returnValue===!1?h:f):this.type=e,t&&re.extend(this,t),this.timeStamp=e&&e.timeStamp||re.now(),void(this[re.expando]=!0)):new re.Event(e,t)},re.Event.prototype={constructor:re.Event,isDefaultPrevented:f,isPropagationStopped:f,isImmediatePropagationStopped:f,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=h,e&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=h,e&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=h,e&&e.stopImmediatePropagation(),this.stopPropagation()}},re.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){re.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,i=this,s=e.relatedTarget,r=e.handleObj;return s&&(s===i||re.contains(i,s))||(e.type=r.origType,n=r.handler.apply(this,arguments),e.type=t),n}}}),re.fn.extend({on:function(e,t,n,i){return m(this,e,t,n,i)},one:function(e,t,n,i){return m(this,e,t,n,i,1)},off:function(e,t,n){var i,s;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,re(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof e){for(s in e)this.off(s,t,e[s]);return this}return t!==!1&&"function"!=typeof t||(n=t,t=void 0),n===!1&&(n=f),this.each(function(){re.event.remove(this,e,n,t)})}});var Be=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,He=/<script|<style|<link/i,Ue=/checked\s*(?:[^=]|=\s*.checked.)/i,ze=/^true\/(.*)/,We=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;re.extend({htmlPrefilter:function(e){return e.replace(Be,"<$1></$2>")},clone:function(e,t,n){var i,s,r,o,a=e.cloneNode(!0),l=re.contains(e.ownerDocument,e);if(!(ie.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||re.isXMLDoc(e)))for(o=u(a),r=u(e),i=0,s=r.length;s>i;i++)C(r[i],o[i]);if(t)if(n)for(r=r||u(e),o=o||u(a),i=0,s=r.length;s>i;i++)b(r[i],o[i]);else b(e,a);return o=u(a,"script"),o.length>0&&d(o,!l&&u(e,"script")),a},cleanData:function(e){for(var t,n,i,s=re.event.special,r=0;void 0!==(n=e[r]);r++)if(we(n)){if(t=n[ke.expando]){if(t.events)for(i in t.events)s[i]?re.event.remove(n,i):re.removeEvent(n,i,t.handle);n[ke.expando]=void 0}n[Se.expando]&&(n[Se.expando]=void 0)}}}),re.fn.extend({domManip:x,detach:function(e){return E(this,e,!0)},remove:function(e){return E(this,e)},text:function(e){return Ee(this,function(e){return void 0===e?re.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return x(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=g(this,e);t.appendChild(e)}})},prepend:function(){return x(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=g(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return x(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return x(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(re.cleanData(u(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return re.clone(this,e,t)})},html:function(e){return Ee(this,function(e){var t=this[0]||{},n=0,i=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!He.test(e)&&!je[(Pe.exec(e)||["",""])[1].toLowerCase()]){e=re.htmlPrefilter(e);try{for(;i>n;n++)t=this[n]||{},1===t.nodeType&&(re.cleanData(u(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=[];return x(this,arguments,function(t){var n=this.parentNode;re.inArray(this,e)<0&&(re.cleanData(u(this)),n&&n.replaceChild(t,this))},e)}}),re.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){re.fn[e]=function(e){for(var n,i=[],s=re(e),r=s.length-1,o=0;r>=o;o++)n=o===r?this:this.clone(!0),re(s[o])[t](n),J.apply(i,n.get());return this.pushStack(i)}});var Ge,Ve={HTML:"block",BODY:"block"},Ke=/^margin/,Xe=new RegExp("^("+Ae+")(?!px)[a-z%]+$","i"),Ye=function(t){var n=t.ownerDocument.defaultView;return n&&n.opener||(n=e),n.getComputedStyle(t)},Ze=function(e,t,n,i){var s,r,o={};for(r in t)o[r]=e.style[r],e.style[r]=t[r];s=n.apply(e,i||[]);for(r in t)e.style[r]=o[r];return s},Je=X.documentElement;!function(){function t(){a.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",a.innerHTML="",Je.appendChild(o);var t=e.getComputedStyle(a);n="1%"!==t.top,r="2px"===t.marginLeft,i="4px"===t.width,a.style.marginRight="50%",s="4px"===t.marginRight,Je.removeChild(o)}var n,i,s,r,o=X.createElement("div"),a=X.createElement("div");a.style&&(a.style.backgroundClip="content-box",a.cloneNode(!0).style.backgroundClip="",ie.clearCloneStyle="content-box"===a.style.backgroundClip,o.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",o.appendChild(a),re.extend(ie,{pixelPosition:function(){return t(),n},boxSizingReliable:function(){return null==i&&t(),i},pixelMarginRight:function(){return null==i&&t(),s},reliableMarginLeft:function(){return null==i&&t(),r},reliableMarginRight:function(){var t,n=a.appendChild(X.createElement("div"));return n.style.cssText=a.style.cssText="-webkit-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",n.style.marginRight=n.style.width="0",a.style.width="1px",Je.appendChild(o),t=!parseFloat(e.getComputedStyle(n).marginRight),Je.removeChild(o),a.removeChild(n),t}}))}();var Qe=/^(none|table(?!-c[ea]).+)/,et={position:"absolute",visibility:"hidden",display:"block"},tt={letterSpacing:"0",fontWeight:"400"},nt=["Webkit","O","Moz","ms"],it=X.createElement("div").style;re.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=S(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:"cssFloat"},style:function(e,t,n,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var s,r,o,a=re.camelCase(t),l=e.style;return t=re.cssProps[a]||(re.cssProps[a]=L(a)||a),o=re.cssHooks[t]||re.cssHooks[a],void 0===n?o&&"get"in o&&void 0!==(s=o.get(e,!1,i))?s:l[t]:(r=typeof n,"string"===r&&(s=Ie.exec(n))&&s[1]&&(n=c(e,t,s),r="number"),void(null!=n&&n===n&&("number"===r&&(n+=s&&s[3]||(re.cssNumber[a]?"":"px")),ie.clearCloneStyle||""!==n||0!==t.indexOf("background")||(l[t]="inherit"),o&&"set"in o&&void 0===(n=o.set(e,n,i))||(l[t]=n))))}},css:function(e,t,n,i){var s,r,o,a=re.camelCase(t);return t=re.cssProps[a]||(re.cssProps[a]=L(a)||a),o=re.cssHooks[t]||re.cssHooks[a],o&&"get"in o&&(s=o.get(e,!0,n)),void 0===s&&(s=S(e,t,i)),"normal"===s&&t in tt&&(s=tt[t]),""===n||n?(r=parseFloat(s),n===!0||isFinite(r)?r||0:s):s}}),re.each(["height","width"],function(e,t){re.cssHooks[t]={get:function(e,n,i){return n?Qe.test(re.css(e,"display"))&&0===e.offsetWidth?Ze(e,et,function(){return R(e,t,i)}):R(e,t,i):void 0},set:function(e,n,i){var s,r=i&&Ye(e),o=i&&I(e,t,i,"border-box"===re.css(e,"boxSizing",!1,r),r);return o&&(s=Ie.exec(n))&&"px"!==(s[3]||"px")&&(e.style[t]=n,n=re.css(e,t)),A(e,n,o)}}}),re.cssHooks.marginLeft=T(ie.reliableMarginLeft,function(e,t){return t?(parseFloat(S(e,"marginLeft"))||e.getBoundingClientRect().left-Ze(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px":void 0}),re.cssHooks.marginRight=T(ie.reliableMarginRight,function(e,t){return t?Ze(e,{display:"inline-block"},S,[e,"marginRight"]):void 0}),re.each({margin:"",padding:"",border:"Width"},function(e,t){re.cssHooks[e+t]={expand:function(n){for(var i=0,s={},r="string"==typeof n?n.split(" "):[n];4>i;i++)s[e+Re[i]+t]=r[i]||r[i-2]||r[0];return s}},Ke.test(e)||(re.cssHooks[e+t].set=A)}),re.fn.extend({css:function(e,t){return Ee(this,function(e,t,n){var i,s,r={},o=0;if(re.isArray(t)){for(i=Ye(e),s=t.length;s>o;o++)r[t[o]]=re.css(e,t[o],!1,i);return r}return void 0!==n?re.style(e,t,n):re.css(e,t)},e,t,arguments.length>1)},show:function(){return N(this,!0)},hide:function(){return N(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){Ne(this)?re(this).show():re(this).hide()})}}),re.Tween=D,D.prototype={constructor:D,init:function(e,t,n,i,s,r){this.elem=e,this.prop=n,this.easing=s||re.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=i,this.unit=r||(re.cssNumber[n]?"":"px")},cur:function(){var e=D.propHooks[this.prop];return e&&e.get?e.get(this):D.propHooks._default.get(this);
},run:function(e){var t,n=D.propHooks[this.prop];return this.options.duration?this.pos=t=re.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):D.propHooks._default.set(this),this}},D.prototype.init.prototype=D.prototype,D.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=re.css(e.elem,e.prop,""),t&&"auto"!==t?t:0)},set:function(e){re.fx.step[e.prop]?re.fx.step[e.prop](e):1!==e.elem.nodeType||null==e.elem.style[re.cssProps[e.prop]]&&!re.cssHooks[e.prop]?e.elem[e.prop]=e.now:re.style(e.elem,e.prop,e.now+e.unit)}}},D.propHooks.scrollTop=D.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},re.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},re.fx=D.prototype.init,re.fx.step={};var st,rt,ot=/^(?:toggle|show|hide)$/,at=/queueHooks$/;re.Animation=re.extend(q,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return c(n.elem,e,Ie.exec(t),n),n}]},tweener:function(e,t){re.isFunction(e)?(t=e,e=["*"]):e=e.match(Ce);for(var n,i=0,s=e.length;s>i;i++)n=e[i],q.tweeners[n]=q.tweeners[n]||[],q.tweeners[n].unshift(t)},prefilters:[M],prefilter:function(e,t){t?q.prefilters.unshift(e):q.prefilters.push(e)}}),re.speed=function(e,t,n){var i=e&&"object"==typeof e?re.extend({},e):{complete:n||!n&&t||re.isFunction(e)&&e,duration:e,easing:n&&t||t&&!re.isFunction(t)&&t};return i.duration=re.fx.off?0:"number"==typeof i.duration?i.duration:i.duration in re.fx.speeds?re.fx.speeds[i.duration]:re.fx.speeds._default,null!=i.queue&&i.queue!==!0||(i.queue="fx"),i.old=i.complete,i.complete=function(){re.isFunction(i.old)&&i.old.call(this),i.queue&&re.dequeue(this,i.queue)},i},re.fn.extend({fadeTo:function(e,t,n,i){return this.filter(Ne).css("opacity",0).show().end().animate({opacity:t},e,n,i)},animate:function(e,t,n,i){var s=re.isEmptyObject(e),r=re.speed(t,n,i),o=function(){var t=q(this,re.extend({},e),r);(s||ke.get(this,"finish"))&&t.stop(!0)};return o.finish=o,s||r.queue===!1?this.each(o):this.queue(r.queue,o)},stop:function(e,t,n){var i=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,s=null!=e&&e+"queueHooks",r=re.timers,o=ke.get(this);if(s)o[s]&&o[s].stop&&i(o[s]);else for(s in o)o[s]&&o[s].stop&&at.test(s)&&i(o[s]);for(s=r.length;s--;)r[s].elem!==this||null!=e&&r[s].queue!==e||(r[s].anim.stop(n),t=!1,r.splice(s,1));!t&&n||re.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=ke.get(this),i=n[e+"queue"],s=n[e+"queueHooks"],r=re.timers,o=i?i.length:0;for(n.finish=!0,re.queue(this,e,[]),s&&s.stop&&s.stop.call(this,!0),t=r.length;t--;)r[t].elem===this&&r[t].queue===e&&(r[t].anim.stop(!0),r.splice(t,1));for(t=0;o>t;t++)i[t]&&i[t].finish&&i[t].finish.call(this);delete n.finish})}}),re.each(["toggle","show","hide"],function(e,t){var n=re.fn[t];re.fn[t]=function(e,i,s){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(O(t,!0),e,i,s)}}),re.each({slideDown:O("show"),slideUp:O("hide"),slideToggle:O("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){re.fn[e]=function(e,n,i){return this.animate(t,e,n,i)}}),re.timers=[],re.fx.tick=function(){var e,t=0,n=re.timers;for(st=re.now();t<n.length;t++)e=n[t],e()||n[t]!==e||n.splice(t--,1);n.length||re.fx.stop(),st=void 0},re.fx.timer=function(e){re.timers.push(e),e()?re.fx.start():re.timers.pop()},re.fx.interval=13,re.fx.start=function(){rt||(rt=e.setInterval(re.fx.tick,re.fx.interval))},re.fx.stop=function(){e.clearInterval(rt),rt=null},re.fx.speeds={slow:600,fast:200,_default:400},re.fn.delay=function(t,n){return t=re.fx?re.fx.speeds[t]||t:t,n=n||"fx",this.queue(n,function(n,i){var s=e.setTimeout(n,t);i.stop=function(){e.clearTimeout(s)}})},function(){var e=X.createElement("input"),t=X.createElement("select"),n=t.appendChild(X.createElement("option"));e.type="checkbox",ie.checkOn=""!==e.value,ie.optSelected=n.selected,t.disabled=!0,ie.optDisabled=!n.disabled,e=X.createElement("input"),e.value="t",e.type="radio",ie.radioValue="t"===e.value}();var lt,ct=re.expr.attrHandle;re.fn.extend({attr:function(e,t){return Ee(this,re.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){re.removeAttr(this,e)})}}),re.extend({attr:function(e,t,n){var i,s,r=e.nodeType;if(3!==r&&8!==r&&2!==r)return"undefined"==typeof e.getAttribute?re.prop(e,t,n):(1===r&&re.isXMLDoc(e)||(t=t.toLowerCase(),s=re.attrHooks[t]||(re.expr.match.bool.test(t)?lt:void 0)),void 0!==n?null===n?void re.removeAttr(e,t):s&&"set"in s&&void 0!==(i=s.set(e,n,t))?i:(e.setAttribute(t,n+""),n):s&&"get"in s&&null!==(i=s.get(e,t))?i:(i=re.find.attr(e,t),null==i?void 0:i))},attrHooks:{type:{set:function(e,t){if(!ie.radioValue&&"radio"===t&&re.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,i,s=0,r=t&&t.match(Ce);if(r&&1===e.nodeType)for(;n=r[s++];)i=re.propFix[n]||n,re.expr.match.bool.test(n)&&(e[i]=!1),e.removeAttribute(n)}}),lt={set:function(e,t,n){return t===!1?re.removeAttr(e,n):e.setAttribute(n,n),n}},re.each(re.expr.match.bool.source.match(/\w+/g),function(e,t){var n=ct[t]||re.find.attr;ct[t]=function(e,t,i){var s,r;return i||(r=ct[t],ct[t]=s,s=null!=n(e,t,i)?t.toLowerCase():null,ct[t]=r),s}});var ut=/^(?:input|select|textarea|button)$/i,dt=/^(?:a|area)$/i;re.fn.extend({prop:function(e,t){return Ee(this,re.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[re.propFix[e]||e]})}}),re.extend({prop:function(e,t,n){var i,s,r=e.nodeType;if(3!==r&&8!==r&&2!==r)return 1===r&&re.isXMLDoc(e)||(t=re.propFix[t]||t,s=re.propHooks[t]),void 0!==n?s&&"set"in s&&void 0!==(i=s.set(e,n,t))?i:e[t]=n:s&&"get"in s&&null!==(i=s.get(e,t))?i:e[t]},propHooks:{tabIndex:{get:function(e){var t=re.find.attr(e,"tabindex");return t?parseInt(t,10):ut.test(e.nodeName)||dt.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),ie.optSelected||(re.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),re.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){re.propFix[this.toLowerCase()]=this});var pt=/[\t\r\n\f]/g;re.fn.extend({addClass:function(e){var t,n,i,s,r,o,a,l=0;if(re.isFunction(e))return this.each(function(t){re(this).addClass(e.call(this,t,F(this)))});if("string"==typeof e&&e)for(t=e.match(Ce)||[];n=this[l++];)if(s=F(n),i=1===n.nodeType&&(" "+s+" ").replace(pt," ")){for(o=0;r=t[o++];)i.indexOf(" "+r+" ")<0&&(i+=r+" ");a=re.trim(i),s!==a&&n.setAttribute("class",a)}return this},removeClass:function(e){var t,n,i,s,r,o,a,l=0;if(re.isFunction(e))return this.each(function(t){re(this).removeClass(e.call(this,t,F(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof e&&e)for(t=e.match(Ce)||[];n=this[l++];)if(s=F(n),i=1===n.nodeType&&(" "+s+" ").replace(pt," ")){for(o=0;r=t[o++];)for(;i.indexOf(" "+r+" ")>-1;)i=i.replace(" "+r+" "," ");a=re.trim(i),s!==a&&n.setAttribute("class",a)}return this},toggleClass:function(e,t){var n=typeof e;return"boolean"==typeof t&&"string"===n?t?this.addClass(e):this.removeClass(e):re.isFunction(e)?this.each(function(n){re(this).toggleClass(e.call(this,n,F(this),t),t)}):this.each(function(){var t,i,s,r;if("string"===n)for(i=0,s=re(this),r=e.match(Ce)||[];t=r[i++];)s.hasClass(t)?s.removeClass(t):s.addClass(t);else void 0!==e&&"boolean"!==n||(t=F(this),t&&ke.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||e===!1?"":ke.get(this,"__className__")||""))})},hasClass:function(e){var t,n,i=0;for(t=" "+e+" ";n=this[i++];)if(1===n.nodeType&&(" "+F(n)+" ").replace(pt," ").indexOf(t)>-1)return!0;return!1}});var ht=/\r/g,ft=/[\x20\t\r\n\f]+/g;re.fn.extend({val:function(e){var t,n,i,s=this[0];return arguments.length?(i=re.isFunction(e),this.each(function(n){var s;1===this.nodeType&&(s=i?e.call(this,n,re(this).val()):e,null==s?s="":"number"==typeof s?s+="":re.isArray(s)&&(s=re.map(s,function(e){return null==e?"":e+""})),t=re.valHooks[this.type]||re.valHooks[this.nodeName.toLowerCase()],t&&"set"in t&&void 0!==t.set(this,s,"value")||(this.value=s))})):s?(t=re.valHooks[s.type]||re.valHooks[s.nodeName.toLowerCase()],t&&"get"in t&&void 0!==(n=t.get(s,"value"))?n:(n=s.value,"string"==typeof n?n.replace(ht,""):null==n?"":n)):void 0}}),re.extend({valHooks:{option:{get:function(e){var t=re.find.attr(e,"value");return null!=t?t:re.trim(re.text(e)).replace(ft," ")}},select:{get:function(e){for(var t,n,i=e.options,s=e.selectedIndex,r="select-one"===e.type||0>s,o=r?null:[],a=r?s+1:i.length,l=0>s?a:r?s:0;a>l;l++)if(n=i[l],(n.selected||l===s)&&(ie.optDisabled?!n.disabled:null===n.getAttribute("disabled"))&&(!n.parentNode.disabled||!re.nodeName(n.parentNode,"optgroup"))){if(t=re(n).val(),r)return t;o.push(t)}return o},set:function(e,t){for(var n,i,s=e.options,r=re.makeArray(t),o=s.length;o--;)i=s[o],(i.selected=re.inArray(re.valHooks.option.get(i),r)>-1)&&(n=!0);return n||(e.selectedIndex=-1),r}}}}),re.each(["radio","checkbox"],function(){re.valHooks[this]={set:function(e,t){return re.isArray(t)?e.checked=re.inArray(re(e).val(),t)>-1:void 0}},ie.checkOn||(re.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var _t=/^(?:focusinfocus|focusoutblur)$/;re.extend(re.event,{trigger:function(t,n,i,s){var r,o,a,l,c,u,d,p=[i||X],h=ne.call(t,"type")?t.type:t,f=ne.call(t,"namespace")?t.namespace.split("."):[];if(o=a=i=i||X,3!==i.nodeType&&8!==i.nodeType&&!_t.test(h+re.event.triggered)&&(h.indexOf(".")>-1&&(f=h.split("."),h=f.shift(),f.sort()),c=h.indexOf(":")<0&&"on"+h,t=t[re.expando]?t:new re.Event(h,"object"==typeof t&&t),t.isTrigger=s?2:3,t.namespace=f.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=i),n=null==n?[t]:re.makeArray(n,[t]),d=re.event.special[h]||{},s||!d.trigger||d.trigger.apply(i,n)!==!1)){if(!s&&!d.noBubble&&!re.isWindow(i)){for(l=d.delegateType||h,_t.test(l+h)||(o=o.parentNode);o;o=o.parentNode)p.push(o),a=o;a===(i.ownerDocument||X)&&p.push(a.defaultView||a.parentWindow||e)}for(r=0;(o=p[r++])&&!t.isPropagationStopped();)t.type=r>1?l:d.bindType||h,u=(ke.get(o,"events")||{})[t.type]&&ke.get(o,"handle"),u&&u.apply(o,n),u=c&&o[c],u&&u.apply&&we(o)&&(t.result=u.apply(o,n),t.result===!1&&t.preventDefault());return t.type=h,s||t.isDefaultPrevented()||d._default&&d._default.apply(p.pop(),n)!==!1||!we(i)||c&&re.isFunction(i[h])&&!re.isWindow(i)&&(a=i[c],a&&(i[c]=null),re.event.triggered=h,i[h](),re.event.triggered=void 0,a&&(i[c]=a)),t.result}},simulate:function(e,t,n){var i=re.extend(new re.Event,n,{type:e,isSimulated:!0});re.event.trigger(i,null,t),i.isDefaultPrevented()&&n.preventDefault()}}),re.fn.extend({trigger:function(e,t){return this.each(function(){re.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];return n?re.event.trigger(e,t,n,!0):void 0}}),re.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){re.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),re.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),ie.focusin="onfocusin"in e,ie.focusin||re.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){re.event.simulate(t,e.target,re.event.fix(e))};re.event.special[t]={setup:function(){var i=this.ownerDocument||this,s=ke.access(i,t);s||i.addEventListener(e,n,!0),ke.access(i,t,(s||0)+1)},teardown:function(){var i=this.ownerDocument||this,s=ke.access(i,t)-1;s?ke.access(i,t,s):(i.removeEventListener(e,n,!0),ke.remove(i,t))}}});var mt=e.location,gt=re.now(),yt=/\?/;re.parseJSON=function(e){return JSON.parse(e+"")},re.parseXML=function(t){var n;if(!t||"string"!=typeof t)return null;try{n=(new e.DOMParser).parseFromString(t,"text/xml")}catch(e){n=void 0}return n&&!n.getElementsByTagName("parsererror").length||re.error("Invalid XML: "+t),n};var vt=/#.*$/,bt=/([?&])_=[^&]*/,Ct=/^(.*?):[ \t]*([^\r\n]*)$/gm,xt=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Et=/^(?:GET|HEAD)$/,wt=/^\/\//,kt={},St={},Tt="*/".concat("*"),Lt=X.createElement("a");Lt.href=mt.href,re.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:mt.href,type:"GET",isLocal:xt.test(mt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Tt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":re.parseJSON,"text xml":re.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?U(U(e,re.ajaxSettings),t):U(re.ajaxSettings,e)},ajaxPrefilter:B(kt),ajaxTransport:B(St),ajax:function(t,n){function i(t,n,i,a){var c,d,y,v,C,E=n;2!==b&&(b=2,l&&e.clearTimeout(l),s=void 0,o=a||"",x.readyState=t>0?4:0,c=t>=200&&300>t||304===t,i&&(v=z(p,x,i)),v=W(p,v,x,c),c?(p.ifModified&&(C=x.getResponseHeader("Last-Modified"),C&&(re.lastModified[r]=C),C=x.getResponseHeader("etag"),C&&(re.etag[r]=C)),204===t||"HEAD"===p.type?E="nocontent":304===t?E="notmodified":(E=v.state,d=v.data,y=v.error,c=!y)):(y=E,!t&&E||(E="error",0>t&&(t=0))),x.status=t,x.statusText=(n||E)+"",c?_.resolveWith(h,[d,E,x]):_.rejectWith(h,[x,E,y]),x.statusCode(g),g=void 0,u&&f.trigger(c?"ajaxSuccess":"ajaxError",[x,p,c?d:y]),m.fireWith(h,[x,E]),u&&(f.trigger("ajaxComplete",[x,p]),--re.active||re.event.trigger("ajaxStop")))}"object"==typeof t&&(n=t,t=void 0),n=n||{};var s,r,o,a,l,c,u,d,p=re.ajaxSetup({},n),h=p.context||p,f=p.context&&(h.nodeType||h.jquery)?re(h):re.event,_=re.Deferred(),m=re.Callbacks("once memory"),g=p.statusCode||{},y={},v={},b=0,C="canceled",x={readyState:0,getResponseHeader:function(e){var t;if(2===b){if(!a)for(a={};t=Ct.exec(o);)a[t[1].toLowerCase()]=t[2];t=a[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===b?o:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return b||(e=v[n]=v[n]||e,y[e]=t),this},overrideMimeType:function(e){return b||(p.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>b)for(t in e)g[t]=[g[t],e[t]];else x.always(e[x.status]);return this},abort:function(e){var t=e||C;return s&&s.abort(t),i(0,t),this}};if(_.promise(x).complete=m.add,x.success=x.done,x.error=x.fail,p.url=((t||p.url||mt.href)+"").replace(vt,"").replace(wt,mt.protocol+"//"),p.type=n.method||n.type||p.method||p.type,p.dataTypes=re.trim(p.dataType||"*").toLowerCase().match(Ce)||[""],null==p.crossDomain){c=X.createElement("a");try{c.href=p.url,c.href=c.href,p.crossDomain=Lt.protocol+"//"+Lt.host!=c.protocol+"//"+c.host}catch(e){p.crossDomain=!0}}if(p.data&&p.processData&&"string"!=typeof p.data&&(p.data=re.param(p.data,p.traditional)),H(kt,p,n,x),2===b)return x;u=re.event&&p.global,u&&0===re.active++&&re.event.trigger("ajaxStart"),p.type=p.type.toUpperCase(),p.hasContent=!Et.test(p.type),r=p.url,p.hasContent||(p.data&&(r=p.url+=(yt.test(r)?"&":"?")+p.data,delete p.data),p.cache===!1&&(p.url=bt.test(r)?r.replace(bt,"$1_="+gt++):r+(yt.test(r)?"&":"?")+"_="+gt++)),p.ifModified&&(re.lastModified[r]&&x.setRequestHeader("If-Modified-Since",re.lastModified[r]),re.etag[r]&&x.setRequestHeader("If-None-Match",re.etag[r])),(p.data&&p.hasContent&&p.contentType!==!1||n.contentType)&&x.setRequestHeader("Content-Type",p.contentType),x.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+("*"!==p.dataTypes[0]?", "+Tt+"; q=0.01":""):p.accepts["*"]);for(d in p.headers)x.setRequestHeader(d,p.headers[d]);if(p.beforeSend&&(p.beforeSend.call(h,x,p)===!1||2===b))return x.abort();C="abort";for(d in{success:1,error:1,complete:1})x[d](p[d]);if(s=H(St,p,n,x)){if(x.readyState=1,u&&f.trigger("ajaxSend",[x,p]),2===b)return x;p.async&&p.timeout>0&&(l=e.setTimeout(function(){x.abort("timeout")},p.timeout));try{b=1,s.send(y,i)}catch(e){if(!(2>b))throw e;i(-1,e)}}else i(-1,"No Transport");return x},getJSON:function(e,t,n){return re.get(e,t,n,"json")},getScript:function(e,t){return re.get(e,void 0,t,"script")}}),re.each(["get","post"],function(e,t){re[t]=function(e,n,i,s){return re.isFunction(n)&&(s=s||i,i=n,n=void 0),re.ajax(re.extend({url:e,type:t,dataType:s,data:n,success:i},re.isPlainObject(e)&&e))}}),re._evalUrl=function(e){return re.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,throws:!0})},re.fn.extend({wrapAll:function(e){var t;return re.isFunction(e)?this.each(function(t){re(this).wrapAll(e.call(this,t))}):(this[0]&&(t=re(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this)},wrapInner:function(e){return re.isFunction(e)?this.each(function(t){re(this).wrapInner(e.call(this,t))}):this.each(function(){var t=re(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=re.isFunction(e);return this.each(function(n){re(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){re.nodeName(this,"body")||re(this).replaceWith(this.childNodes)}).end()}}),re.expr.filters.hidden=function(e){return!re.expr.filters.visible(e)},re.expr.filters.visible=function(e){return e.offsetWidth>0||e.offsetHeight>0||e.getClientRects().length>0};var At=/%20/g,It=/\[\]$/,Rt=/\r?\n/g,Nt=/^(?:submit|button|image|reset|file)$/i,Dt=/^(?:input|select|textarea|keygen)/i;re.param=function(e,t){var n,i=[],s=function(e,t){t=re.isFunction(t)?t():null==t?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t&&(t=re.ajaxSettings&&re.ajaxSettings.traditional),re.isArray(e)||e.jquery&&!re.isPlainObject(e))re.each(e,function(){s(this.name,this.value)});else for(n in e)G(n,e[n],t,s);return i.join("&").replace(At,"+")},re.fn.extend({serialize:function(){return re.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=re.prop(this,"elements");return e?re.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!re(this).is(":disabled")&&Dt.test(this.nodeName)&&!Nt.test(e)&&(this.checked||!De.test(e))}).map(function(e,t){var n=re(this).val();return null==n?null:re.isArray(n)?re.map(n,function(e){return{name:t.name,value:e.replace(Rt,"\r\n")}}):{name:t.name,value:n.replace(Rt,"\r\n")}}).get()}}),re.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch(e){}};var Pt={0:200,1223:204},Ot=re.ajaxSettings.xhr();ie.cors=!!Ot&&"withCredentials"in Ot,ie.ajax=Ot=!!Ot,re.ajaxTransport(function(t){var n,i;return ie.cors||Ot&&!t.crossDomain?{send:function(s,r){var o,a=t.xhr();if(a.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(o in t.xhrFields)a[o]=t.xhrFields[o];t.mimeType&&a.overrideMimeType&&a.overrideMimeType(t.mimeType),t.crossDomain||s["X-Requested-With"]||(s["X-Requested-With"]="XMLHttpRequest");for(o in s)a.setRequestHeader(o,s[o]);n=function(e){return function(){n&&(n=i=a.onload=a.onerror=a.onabort=a.onreadystatechange=null,"abort"===e?a.abort():"error"===e?"number"!=typeof a.status?r(0,"error"):r(a.status,a.statusText):r(Pt[a.status]||a.status,a.statusText,"text"!==(a.responseType||"text")||"string"!=typeof a.responseText?{binary:a.response}:{text:a.responseText},a.getAllResponseHeaders()))}},a.onload=n(),i=a.onerror=n("error"),void 0!==a.onabort?a.onabort=i:a.onreadystatechange=function(){4===a.readyState&&e.setTimeout(function(){n&&i()})},n=n("abort");try{a.send(t.hasContent&&t.data||null)}catch(e){if(n)throw e}},abort:function(){n&&n()}}:void 0}),re.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return re.globalEval(e),e}}}),re.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),re.ajaxTransport("script",function(e){if(e.crossDomain){var t,n;return{send:function(i,s){t=re("<script>").prop({charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&s("error"===e.type?404:200,e.type)}),X.head.appendChild(t[0])},abort:function(){n&&n()}}}});var jt=[],Mt=/(=)\?(?=&|$)|\?\?/;re.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=jt.pop()||re.expando+"_"+gt++;return this[e]=!0,e}}),re.ajaxPrefilter("json jsonp",function(t,n,i){var s,r,o,a=t.jsonp!==!1&&(Mt.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Mt.test(t.data)&&"data");return a||"jsonp"===t.dataTypes[0]?(s=t.jsonpCallback=re.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,a?t[a]=t[a].replace(Mt,"$1"+s):t.jsonp!==!1&&(t.url+=(yt.test(t.url)?"&":"?")+t.jsonp+"="+s),t.converters["script json"]=function(){return o||re.error(s+" was not called"),o[0]},t.dataTypes[0]="json",r=e[s],e[s]=function(){o=arguments},i.always(function(){void 0===r?re(e).removeProp(s):e[s]=r,t[s]&&(t.jsonpCallback=n.jsonpCallback,jt.push(s)),o&&re.isFunction(r)&&r(o[0]),o=r=void 0}),"script"):void 0}),re.parseHTML=function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||X;var i=fe.exec(e),s=!n&&[];return i?[t.createElement(i[1])]:(i=p([e],t,s),s&&s.length&&re(s).remove(),re.merge([],i.childNodes))};var $t=re.fn.load;re.fn.load=function(e,t,n){if("string"!=typeof e&&$t)return $t.apply(this,arguments);var i,s,r,o=this,a=e.indexOf(" ");return a>-1&&(i=re.trim(e.slice(a)),e=e.slice(0,a)),re.isFunction(t)?(n=t,t=void 0):t&&"object"==typeof t&&(s="POST"),o.length>0&&re.ajax({url:e,type:s||"GET",dataType:"html",data:t}).done(function(e){r=arguments,o.html(i?re("<div>").append(re.parseHTML(e)).find(i):e)}).always(n&&function(e,t){o.each(function(){n.apply(this,r||[e.responseText,t,e])})}),this},re.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){re.fn[t]=function(e){return this.on(t,e)}}),re.expr.filters.animated=function(e){return re.grep(re.timers,function(t){return e===t.elem}).length},re.offset={setOffset:function(e,t,n){var i,s,r,o,a,l,c,u=re.css(e,"position"),d=re(e),p={};"static"===u&&(e.style.position="relative"),a=d.offset(),r=re.css(e,"top"),l=re.css(e,"left"),c=("absolute"===u||"fixed"===u)&&(r+l).indexOf("auto")>-1,c?(i=d.position(),o=i.top,s=i.left):(o=parseFloat(r)||0,s=parseFloat(l)||0),re.isFunction(t)&&(t=t.call(e,n,re.extend({},a))),null!=t.top&&(p.top=t.top-a.top+o),null!=t.left&&(p.left=t.left-a.left+s),"using"in t?t.using.call(e,p):d.css(p)}},re.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){re.offset.setOffset(this,e,t)});var t,n,i=this[0],s={top:0,left:0},r=i&&i.ownerDocument;return r?(t=r.documentElement,re.contains(t,i)?(s=i.getBoundingClientRect(),n=V(r),{top:s.top+n.pageYOffset-t.clientTop,left:s.left+n.pageXOffset-t.clientLeft}):s):void 0},position:function(){if(this[0]){var e,t,n=this[0],i={top:0,left:0};return"fixed"===re.css(n,"position")?t=n.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),re.nodeName(e[0],"html")||(i=e.offset()),i.top+=re.css(e[0],"borderTopWidth",!0),i.left+=re.css(e[0],"borderLeftWidth",!0)),{top:t.top-i.top-re.css(n,"marginTop",!0),left:t.left-i.left-re.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===re.css(e,"position");)e=e.offsetParent;return e||Je})}}),re.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var n="pageYOffset"===t;re.fn[e]=function(i){return Ee(this,function(e,i,s){var r=V(e);return void 0===s?r?r[t]:e[i]:void(r?r.scrollTo(n?r.pageXOffset:s,n?s:r.pageYOffset):e[i]=s)},e,i,arguments.length)}}),re.each(["top","left"],function(e,t){re.cssHooks[t]=T(ie.pixelPosition,function(e,n){return n?(n=S(e,t),Xe.test(n)?re(e).position()[t]+"px":n):void 0})}),re.each({Height:"height",Width:"width"},function(e,t){re.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,i){re.fn[i]=function(i,s){var r=arguments.length&&(n||"boolean"!=typeof i),o=n||(i===!0||s===!0?"margin":"border");return Ee(this,function(t,n,i){var s;return re.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(s=t.documentElement,Math.max(t.body["scroll"+e],s["scroll"+e],t.body["offset"+e],s["offset"+e],s["client"+e])):void 0===i?re.css(t,n,o):re.style(t,n,i,o)},t,r?i:void 0,r,null)}})}),re.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,i){return this.on(t,e,n,i)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},size:function(){return this.length}}),re.fn.andSelf=re.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return re});var qt=e.jQuery,Ft=e.$;return re.noConflict=function(t){return e.$===re&&(e.$=Ft),t&&e.jQuery===re&&(e.jQuery=qt),re},t||(e.jQuery=e.$=re),re}),function(){function e(e,t){return e.set(t[0],t[1]),e}function t(e,t){return e.add(t),e}function n(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function i(e,t,n,i){for(var s=-1,r=e.length;++s<r;){var o=e[s];t(i,o,n(o),e)}return i}function s(e,t){for(var n=-1,i=e.length;++n<i&&!1!==t(e[n],n,e););return e}function r(e,t){for(var n=e.length;n--&&!1!==t(e[n],n,e););return e}function o(e,t){for(var n=-1,i=e.length;++n<i;)if(!t(e[n],n,e))return!1;return!0}function a(e,t){for(var n=-1,i=e.length,s=0,r=[];++n<i;){var o=e[n];t(o,n,e)&&(r[s++]=o)}return r}function l(e,t){return!!e.length&&-1<g(e,t,0)}function c(e,t,n){for(var i=-1,s=e.length;++i<s;)if(n(t,e[i]))return!0;return!1}function u(e,t){for(var n=-1,i=e.length,s=Array(i);++n<i;)s[n]=t(e[n],n,e);return s}function d(e,t){for(var n=-1,i=t.length,s=e.length;++n<i;)e[s+n]=t[n];return e}function p(e,t,n,i){var s=-1,r=e.length;for(i&&r&&(n=e[++s]);++s<r;)n=t(n,e[s],s,e);return n}function h(e,t,n,i){var s=e.length;for(i&&s&&(n=e[--s]);s--;)n=t(n,e[s],s,e);return n}function f(e,t){for(var n=-1,i=e.length;++n<i;)if(t(e[n],n,e))return!0;return!1}function _(e,t,n,i){var s;return n(e,function(e,n,r){return t(e,n,r)?(s=i?n:e,!1):void 0}),s}function m(e,t,n){for(var i=e.length,s=n?i:-1;n?s--:++s<i;)if(t(e[s],s,e))return s;return-1}function g(e,t,n){if(t!==t)return P(e,n);--n;for(var i=e.length;++n<i;)if(e[n]===t)return n;return-1}function y(e,t,n,i){--n;for(var s=e.length;++n<s;)if(i(e[n],t))return n;return-1}function v(e,t){var n=e?e.length:0;return n?x(e,t)/n:G}function b(e,t,n,i,s){return s(e,function(e,s,r){n=i?(i=!1,e):t(n,e,s,r)}),n}function C(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].c;return e}function x(e,t){for(var n,i=-1,s=e.length;++i<s;){var r=t(e[i]);r!==z&&(n=n===z?r:n+r)}return n}function E(e,t){for(var n=-1,i=Array(e);++n<e;)i[n]=t(n);return i}function w(e,t){return u(t,function(t){return[t,e[t]]})}function k(e){return function(t){return e(t)}}function S(e,t){return u(t,function(t){return e[t]})}function T(e,t){return e.has(t)}function L(e,t){for(var n=-1,i=e.length;++n<i&&-1<g(t,e[n],0););return n}function A(e,t){for(var n=e.length;n--&&-1<g(t,e[n],0););return n}function I(e){return e&&e.Object===Object?e:null}function R(e){return je[e]}function N(e){return Me[e]}function D(e){return"\\"+Fe[e]}function P(e,t,n){var i=e.length;for(t+=n?0:-1;n?t--:++t<i;){var s=e[t];if(s!==s)return t}return-1}function O(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}function j(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}function M(e){var t=-1,n=Array(e.size);return e.forEach(function(e,i){n[++t]=[i,e]}),n}function $(e,t){for(var n=-1,i=e.length,s=0,r=[];++n<i;){var o=e[n];o!==t&&"__lodash_placeholder__"!==o||(e[n]="__lodash_placeholder__",r[s++]=n)}return r}function q(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}function F(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=[e,e]}),n}function B(e){if(!e||!Re.test(e))return e.length;for(var t=Ae.lastIndex=0;Ae.test(e);)t++;return t}function H(e){return $e[e]}function U(I){function we(e){if($i(e)&&!lo(e)&&!(e instanceof je)){if(e instanceof Se)return e;if(xs.call(e,"__wrapped__"))return oi(e)}return new Se(e)}function ke(){}function Se(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=z}function je(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}function Me(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function $e(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function qe(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function Fe(e){var t=-1,n=e?e.length:0;for(this.__data__=new qe;++t<n;)this.add(e[t])}function Ue(e){this.__data__=new $e(e)}function ze(e,t,n,i){return e===z||Ai(e,vs[n])&&!xs.call(i,n)?t:e}function Ge(e,t,n){(n===z||Ai(e[t],n))&&("number"!=typeof t||n!==z||t in e)||(e[t]=n)}function Ve(e,t,n){var i=e[t];xs.call(e,t)&&Ai(i,n)&&(n!==z||t in e)||(e[t]=n)}function Ke(e,t){for(var n=e.length;n--;)if(Ai(e[n][0],t))return n;return-1}function Ze(e,t,n,i){return mr(e,function(e,s,r){t(i,e,n(e),r)}),i}function Je(e,t){return e&&cn(t,ts(t),e)}function Qe(e,t){for(var n=-1,i=null==e,s=t.length,r=Array(s);++n<s;)r[n]=i?z:Qi(e,t[n]);return r}function et(e,t,n){return e===e&&(n!==z&&(e=n>=e?e:n),t!==z&&(e=e>=t?e:t)),e}function tt(e,t,n,i,r,o,a){var l;if(i&&(l=o?i(e,r,o,a):i(e)),l!==z)return l;if(!Mi(e))return e;if(r=lo(e)){if(l=zn(e),!t)return ln(e,l)}else{var c=Hn(e),u="[object Function]"==c||"[object GeneratorFunction]"==c;if(co(e))return nn(e,t);if("[object Object]"==c||"[object Arguments]"==c||u&&!o){if(O(e))return o?e:{};if(l=Wn(u?{}:e),!t)return un(e,Je(l,e))}else{if(!Oe[c])return o?e:{};l=Gn(e,c,tt,t)}}if(a||(a=new Ue),o=a.get(e))return o;if(a.set(e,l),!r)var d=n?ft(e,ts,Bn):ts(e);return s(d||e,function(s,r){d&&(r=s,s=e[r]),Ve(l,r,tt(s,t,n,i,r,e,a))}),l}function nt(e){var t=ts(e),n=t.length;return function(i){if(null==i)return!n;for(var s=n;s--;){var r=t[s],o=e[r],a=i[r];if(a===z&&!(r in Object(i))||!o(a))return!1}return!0}}function it(e){return Mi(e)?js(e):{}}function st(e,t,n){if("function"!=typeof e)throw new gs("Expected a function");return $s(function(){e.apply(z,n)},t)}function rt(e,t,n,i){var s=-1,r=l,o=!0,a=e.length,d=[],p=t.length;if(!a)return d;n&&(t=u(t,k(n))),i?(r=c,o=!1):t.length>=200&&(r=T,o=!1,t=new Fe(t));e:for(;++s<a;){var h=e[s],f=n?n(h):h,h=i||0!==h?h:0;if(o&&f===f){for(var _=p;_--;)if(t[_]===f)continue e;d.push(h)}else r(t,f,i)||d.push(h)}return d}function ot(e,t){var n=!0;return mr(e,function(e,i,s){return n=!!t(e,i,s)}),n}function at(e,t,n){for(var i=-1,s=e.length;++i<s;){var r=e[i],o=t(r);if(null!=o&&(a===z?o===o&&!zi(o):n(o,a)))var a=o,l=r}return l}function lt(e,t){var n=[];return mr(e,function(e,i,s){t(e,i,s)&&n.push(e)}),n}function ct(e,t,n,i,s){var r=-1,o=e.length;for(n||(n=Kn),s||(s=[]);++r<o;){var a=e[r];t>0&&n(a)?t>1?ct(a,t-1,n,i,s):d(s,a):i||(s[s.length]=a)}return s}function ut(e,t){
return e&&yr(e,t,ts)}function dt(e,t){return e&&vr(e,t,ts)}function pt(e,t){return a(t,function(t){return Pi(e[t])})}function ht(e,t){t=Jn(t,e)?[t]:en(t);for(var n=0,i=t.length;null!=e&&i>n;)e=e[si(t[n++])];return n&&n==i?e:z}function ft(e,t,n){return t=t(e),lo(e)?t:d(t,n(e))}function _t(e,t){return e>t}function mt(e,t){return xs.call(e,t)||"object"==typeof e&&t in e&&null===Hs(Object(e))}function gt(e,t){return t in Object(e)}function yt(e,t,n){for(var i=n?c:l,s=e[0].length,r=e.length,o=r,a=Array(r),d=1/0,p=[];o--;){var h=e[o];o&&t&&(h=u(h,k(t))),d=Vs(h.length,d),a[o]=!n&&(t||s>=120&&h.length>=120)?new Fe(o&&h):z}var h=e[0],f=-1,_=a[0];e:for(;++f<s&&d>p.length;){var m=h[f],g=t?t(m):m,m=n||0!==m?m:0;if(_?!T(_,g):!i(p,g,n)){for(o=r;--o;){var y=a[o];if(y?!T(y,g):!i(e[o],g,n))continue e}_&&_.push(g),p.push(m)}}return p}function vt(e,t,n){var i={};return ut(e,function(e,s,r){t(i,n(e),s,r)}),i}function bt(e,t,i){return Jn(t,e)||(t=en(t),e=ii(e,t),t=ui(t)),t=null==e?e:e[si(t)],null==t?z:n(t,e,i)}function Ct(e,t,n,i,s){if(e===t)t=!0;else if(null==e||null==t||!Mi(e)&&!$i(t))t=e!==e&&t!==t;else e:{var r=lo(e),o=lo(t),a="[object Array]",l="[object Array]";r||(a=Hn(e),a="[object Arguments]"==a?"[object Object]":a),o||(l=Hn(t),l="[object Arguments]"==l?"[object Object]":l);var c="[object Object]"==a&&!O(e),o="[object Object]"==l&&!O(t);if((l=a==l)&&!c)s||(s=new Ue),t=r||Wi(e)?Dn(e,t,Ct,n,i,s):Pn(e,t,a,Ct,n,i,s);else{if(!(2&i)&&(r=c&&xs.call(e,"__wrapped__"),a=o&&xs.call(t,"__wrapped__"),r||a)){e=r?e.value():e,t=a?t.value():t,s||(s=new Ue),t=Ct(e,t,n,i,s);break e}if(l)t:if(s||(s=new Ue),r=2&i,a=ts(e),o=a.length,l=ts(t).length,o==l||r){for(c=o;c--;){var u=a[c];if(!(r?u in t:mt(t,u))){t=!1;break t}}if(l=s.get(e))t=l==t;else{l=!0,s.set(e,t);for(var d=r;++c<o;){var u=a[c],p=e[u],h=t[u];if(n)var f=r?n(h,p,u,t,e,s):n(p,h,u,e,t,s);if(f===z?p!==h&&!Ct(p,h,n,i,s):!f){l=!1;break}d||(d="constructor"==u)}l&&!d&&(n=e.constructor,i=t.constructor,n!=i&&"constructor"in e&&"constructor"in t&&!("function"==typeof n&&n instanceof n&&"function"==typeof i&&i instanceof i)&&(l=!1)),s.delete(e),t=l}}else t=!1;else t=!1}}return t}function xt(e,t,n,i){var s=n.length,r=s,o=!i;if(null==e)return!r;for(e=Object(e);s--;){var a=n[s];if(o&&a[2]?a[1]!==e[a[0]]:!(a[0]in e))return!1}for(;++s<r;){var a=n[s],l=a[0],c=e[l],u=a[1];if(o&&a[2]){if(c===z&&!(l in e))return!1}else{if(a=new Ue,i)var d=i(c,u,l,e,t,a);if(d===z?!Ct(u,c,i,3,a):!d)return!1}}return!0}function Et(e){return"function"==typeof e?e:null==e?ls:"object"==typeof e?lo(e)?Lt(e[0],e[1]):Tt(e):ps(e)}function wt(e){e=null==e?e:Object(e);var t,n=[];for(t in e)n.push(t);return n}function kt(e,t){return t>e}function St(e,t){var n=-1,i=Ri(e)?Array(e.length):[];return mr(e,function(e,s,r){i[++n]=t(e,s,r)}),i}function Tt(e){var t=qn(e);return 1==t.length&&t[0][2]?ti(t[0][0],t[0][1]):function(n){return n===e||xt(n,e,t)}}function Lt(e,t){return Jn(e)&&t===t&&!Mi(t)?ti(si(e),t):function(n){var i=Qi(n,e);return i===z&&i===t?es(n,e):Ct(t,i,z,3)}}function At(e,t,n,i,r){if(e!==t){if(!lo(t)&&!Wi(t))var o=ns(t);s(o||t,function(s,a){if(o&&(a=s,s=t[a]),Mi(s)){r||(r=new Ue);var l=a,c=r,u=e[l],d=t[l],p=c.get(d);if(p)Ge(e,l,p);else{var p=i?i(u,d,l+"",e,t,c):z,h=p===z;h&&(p=d,lo(d)||Wi(d)?lo(u)?p=u:Ni(u)?p=ln(u):(h=!1,p=tt(d,!0)):Bi(d)||Ii(d)?Ii(u)?p=Zi(u):!Mi(u)||n&&Pi(u)?(h=!1,p=tt(d,!0)):p=u:h=!1),c.set(d,p),h&&At(p,d,n,i,c),c.delete(d),Ge(e,l,p)}}else l=i?i(e[a],s,a+"",e,t,r):z,l===z&&(l=s),Ge(e,a,l)})}}function It(e,t){var n=e.length;return n?(t+=0>t?n:0,Yn(t,n)?e[t]:z):void 0}function Rt(e,t,n){var i=-1;return t=u(t.length?t:[ls],k(Mn())),e=St(e,function(e){return{a:u(t,function(t){return t(e)}),b:++i,c:e}}),C(e,function(e,t){var i;e:{i=-1;for(var s=e.a,r=t.a,o=s.length,a=n.length;++i<o;){var l=rn(s[i],r[i]);if(l){i=i>=a?l:l*("desc"==n[i]?-1:1);break e}}i=e.b-t.b}return i})}function Nt(e,t){return e=Object(e),p(t,function(t,n){return n in e&&(t[n]=e[n]),t},{})}function Dt(e,t){for(var n=-1,i=ft(e,ns,wr),s=i.length,r={};++n<s;){var o=i[n],a=e[o];t(a,o)&&(r[o]=a)}return r}function Pt(e){return function(t){return null==t?z:t[e]}}function Ot(e){return function(t){return ht(t,e)}}function jt(e,t,n,i){var s=i?y:g,r=-1,o=t.length,a=e;for(n&&(a=u(e,k(n)));++r<o;)for(var l=0,c=t[r],c=n?n(c):c;-1<(l=s(a,c,l,i));)a!==e&&qs.call(a,l,1),qs.call(e,l,1);return e}function Mt(e,t){for(var n=e?t.length:0,i=n-1;n--;){var s=t[n];if(n==i||s!==r){var r=s;if(Yn(s))qs.call(e,s,1);else if(Jn(s,e))delete e[si(s)];else{var s=en(s),o=ii(e,s);null!=o&&delete o[si(ui(s))]}}}}function $t(e,t){return e+Bs(Xs()*(t-e+1))}function qt(e,t){var n="";if(!e||1>t||t>9007199254740991)return n;do t%2&&(n+=e),(t=Bs(t/2))&&(e+=e);while(t);return n}function Ft(e,t,n,i){t=Jn(t,e)?[t]:en(t);for(var s=-1,r=t.length,o=r-1,a=e;null!=a&&++s<r;){var l=si(t[s]);if(Mi(a)){var c=n;if(s!=o){var u=a[l],c=i?i(u,l,a):z;c===z&&(c=null==u?Yn(t[s+1])?[]:{}:u)}Ve(a,l,c)}a=a[l]}return e}function Bt(e,t,n){var i=-1,s=e.length;for(0>t&&(t=-t>s?0:s+t),n=n>s?s:n,0>n&&(n+=s),s=t>n?0:n-t>>>0,t>>>=0,n=Array(s);++i<s;)n[i]=e[i+t];return n}function Ht(e,t){var n;return mr(e,function(e,i,s){return n=t(e,i,s),!n}),!!n}function Ut(e,t,n){var i=0,s=e?e.length:i;if("number"==typeof t&&t===t&&2147483647>=s){for(;s>i;){var r=i+s>>>1,o=e[r];null!==o&&!zi(o)&&(n?t>=o:t>o)?i=r+1:s=r}return s}return zt(e,t,ls,n)}function zt(e,t,n,i){t=n(t);for(var s=0,r=e?e.length:0,o=t!==t,a=null===t,l=zi(t),c=t===z;r>s;){var u=Bs((s+r)/2),d=n(e[u]),p=d!==z,h=null===d,f=d===d,_=zi(d);(o?i||f:c?f&&(i||p):a?f&&p&&(i||!h):l?f&&p&&!h&&(i||!_):h||_?0:i?t>=d:t>d)?s=u+1:r=u}return Vs(r,4294967294)}function Wt(e,t){for(var n=-1,i=e.length,s=0,r=[];++n<i;){var o=e[n],a=t?t(o):o;if(!n||!Ai(a,l)){var l=a;r[s++]=0===o?0:o}}return r}function Gt(e){return"number"==typeof e?e:zi(e)?G:+e}function Vt(e){if("string"==typeof e)return e;if(zi(e))return _r?_r.call(e):"";var t=e+"";return"0"==t&&1/e==-W?"-0":t}function Kt(e,t,n){var i=-1,s=l,r=e.length,o=!0,a=[],u=a;if(n)o=!1,s=c;else if(r>=200){if(s=t?null:Cr(e))return q(s);o=!1,s=T,u=new Fe}else u=t?[]:a;e:for(;++i<r;){var d=e[i],p=t?t(d):d,d=n||0!==d?d:0;if(o&&p===p){for(var h=u.length;h--;)if(u[h]===p)continue e;t&&u.push(p),a.push(d)}else s(u,p,n)||(u!==a&&u.push(p),a.push(d))}return a}function Xt(e,t,n,i){for(var s=e.length,r=i?s:-1;(i?r--:++r<s)&&t(e[r],r,e););return n?Bt(e,i?0:r,i?r+1:s):Bt(e,i?r+1:0,i?s:r)}function Yt(e,t){var n=e;return n instanceof je&&(n=n.value()),p(t,function(e,t){return t.func.apply(t.thisArg,d([e],t.args))},n)}function Zt(e,t,n){for(var i=-1,s=e.length;++i<s;)var r=r?d(rt(r,e[i],t,n),rt(e[i],r,t,n)):e[i];return r&&r.length?Kt(r,t,n):[]}function Jt(e,t,n){for(var i=-1,s=e.length,r=t.length,o={};++i<s;)n(o,e[i],r>i?t[i]:z);return o}function Qt(e){return Ni(e)?e:[]}function en(e){return lo(e)?e:Sr(e)}function tn(e,t,n){var i=e.length;return n=n===z?i:n,!t&&n>=i?e:Bt(e,t,n)}function nn(e,t){if(t)return e.slice();var n=new e.constructor(e.length);return e.copy(n),n}function sn(e){var t=new e.constructor(e.byteLength);return new Rs(t).set(new Rs(e)),t}function rn(e,t){if(e!==t){var n=e!==z,i=null===e,s=e===e,r=zi(e),o=t!==z,a=null===t,l=t===t,c=zi(t);if(!a&&!c&&!r&&e>t||r&&o&&l&&!a&&!c||i&&o&&l||!n&&l||!s)return 1;if(!i&&!r&&!c&&t>e||c&&n&&s&&!i&&!r||a&&n&&s||!o&&s||!l)return-1}return 0}function on(e,t,n,i){var s=-1,r=e.length,o=n.length,a=-1,l=t.length,c=Gs(r-o,0),u=Array(l+c);for(i=!i;++a<l;)u[a]=t[a];for(;++s<o;)(i||r>s)&&(u[n[s]]=e[s]);for(;c--;)u[a++]=e[s++];return u}function an(e,t,n,i){var s=-1,r=e.length,o=-1,a=n.length,l=-1,c=t.length,u=Gs(r-a,0),d=Array(u+c);for(i=!i;++s<u;)d[s]=e[s];for(u=s;++l<c;)d[u+l]=t[l];for(;++o<a;)(i||r>s)&&(d[u+n[o]]=e[s++]);return d}function ln(e,t){var n=-1,i=e.length;for(t||(t=Array(i));++n<i;)t[n]=e[n];return t}function cn(e,t,n,i){n||(n={});for(var s=-1,r=t.length;++s<r;){var o=t[s],a=i?i(n[o],e[o],o,n,e):e[o];Ve(n,o,a)}return n}function un(e,t){return cn(e,Bn(e),t)}function dn(e,t){return function(n,s){var r=lo(n)?i:Ze,o=t?t():{};return r(n,e,Mn(s),o)}}function pn(e){return Li(function(t,n){var i=-1,s=n.length,r=s>1?n[s-1]:z,o=s>2?n[2]:z,r=e.length>3&&"function"==typeof r?(s--,r):z;for(o&&Zn(n[0],n[1],o)&&(r=3>s?z:r,s=1),t=Object(t);++i<s;)(o=n[i])&&e(t,o,i,r);return t})}function hn(e,t){return function(n,i){if(null==n)return n;if(!Ri(n))return e(n,i);for(var s=n.length,r=t?s:-1,o=Object(n);(t?r--:++r<s)&&!1!==i(o[r],r,o););return n}}function fn(e){return function(t,n,i){var s=-1,r=Object(t);i=i(t);for(var o=i.length;o--;){var a=i[e?o:++s];if(!1===n(r[a],a,r))break}return t}}function _n(e,t,n){function i(){return(this&&this!==Xe&&this instanceof i?r:e).apply(s?n:this,arguments)}var s=1&t,r=yn(e);return i}function mn(e){return function(t){t=Ji(t);var n=Re.test(t)?t.match(Ae):z,i=n?n[0]:t.charAt(0);return t=n?tn(n,1).join(""):t.slice(1),i[e]()+t}}function gn(e){return function(t){return p(os(rs(t).replace(Te,"")),e,"")}}function yn(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=it(e.prototype),t=e.apply(n,t);return Mi(t)?t:n}}function vn(e,t,i){function s(){for(var o=arguments.length,a=Array(o),l=o,c=jn(s);l--;)a[l]=arguments[l];return l=3>o&&a[0]!==c&&a[o-1]!==c?[]:$(a,c),o-=l.length,i>o?An(e,t,Cn,s.placeholder,z,a,l,z,z,i-o):n(this&&this!==Xe&&this instanceof s?r:e,this,a)}var r=yn(e);return s}function bn(e){return Li(function(t){t=ct(t,1);var n=t.length,i=n,s=Se.prototype.thru;for(e&&t.reverse();i--;){var r=t[i];if("function"!=typeof r)throw new gs("Expected a function");if(s&&!o&&"wrapper"==On(r))var o=new Se([],!0)}for(i=o?i:n;++i<n;)var r=t[i],s=On(r),a="wrapper"==s?xr(r):z,o=a&&Qn(a[0])&&424==a[1]&&!a[4].length&&1==a[9]?o[On(a[0])].apply(o,a[3]):1==r.length&&Qn(r)?o[s]():o.thru(r);return function(){var e=arguments,i=e[0];if(o&&1==e.length&&lo(i)&&i.length>=200)return o.plant(i).value();for(var s=0,e=n?t[s].apply(this,e):i;++s<n;)e=t[s].call(this,e);return e}})}function Cn(e,t,n,i,s,r,o,a,l,c){function u(){for(var g=arguments.length,y=Array(g),v=g;v--;)y[v]=arguments[v];if(f){var b,C=jn(u),v=y.length;for(b=0;v--;)y[v]===C&&b++}if(i&&(y=on(y,i,s,f)),r&&(y=an(y,r,o,f)),g-=b,f&&c>g)return C=$(y,C),An(e,t,Cn,u.placeholder,n,y,C,a,l,c-g);if(C=p?n:this,v=h?C[e]:e,g=y.length,a){b=y.length;for(var x=Vs(a.length,b),E=ln(y);x--;){var w=a[x];y[x]=Yn(w,b)?E[w]:z}}else _&&g>1&&y.reverse();return d&&g>l&&(y.length=l),this&&this!==Xe&&this instanceof u&&(v=m||yn(v)),v.apply(C,y)}var d=128&t,p=1&t,h=2&t,f=24&t,_=512&t,m=h?z:yn(e);return u}function xn(e,t){return function(n,i){return vt(n,e,t(i))}}function En(e){return function(t,n){var i;if(t===z&&n===z)return 0;if(t!==z&&(i=t),n!==z){if(i===z)return n;"string"==typeof t||"string"==typeof n?(t=Vt(t),n=Vt(n)):(t=Gt(t),n=Gt(n)),i=e(t,n)}return i}}function wn(e){return Li(function(t){return t=1==t.length&&lo(t[0])?u(t[0],k(Mn())):u(ct(t,1,Xn),k(Mn())),Li(function(i){var s=this;return e(t,function(e){return n(e,s,i)})})})}function kn(e,t){t=t===z?" ":Vt(t);var n=t.length;return 2>n?n?qt(t,e):t:(n=qt(t,Fs(e/B(t))),Re.test(t)?tn(n.match(Ae),0,e).join(""):n.slice(0,e))}function Sn(e,t,i,s){function r(){for(var t=-1,l=arguments.length,c=-1,u=s.length,d=Array(u+l),p=this&&this!==Xe&&this instanceof r?a:e;++c<u;)d[c]=s[c];for(;l--;)d[c++]=arguments[++t];return n(p,o?i:this,d)}var o=1&t,a=yn(e);return r}function Tn(e){return function(t,n,i){i&&"number"!=typeof i&&Zn(t,n,i)&&(n=i=z),t=Yi(t),t=t===t?t:0,n===z?(n=t,t=0):n=Yi(n)||0,i=i===z?n>t?1:-1:Yi(i)||0;var s=-1;n=Gs(Fs((n-t)/(i||1)),0);for(var r=Array(n);n--;)r[e?n:++s]=t,t+=i;return r}}function Ln(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=Yi(t),n=Yi(n)),e(t,n)}}function An(e,t,n,i,s,r,o,a,l,c){var u=8&t,d=u?o:z;o=u?z:o;var p=u?r:z;return r=u?z:r,t=(t|(u?32:64))&~(u?64:32),4&t||(t&=-4),t=[e,t,s,p,d,r,o,a,l,c],n=n.apply(z,t),Qn(e)&&kr(n,t),n.placeholder=i,n}function In(e){var t=_s[e];return function(e,n){if(e=Yi(e),n=Ki(n)){var i=(Ji(e)+"e").split("e"),i=t(i[0]+"e"+(+i[1]+n)),i=(Ji(i)+"e").split("e");return+(i[0]+"e"+(+i[1]-n))}return t(e)}}function Rn(e){return function(t){var n=Hn(t);return"[object Map]"==n?M(t):"[object Set]"==n?F(t):w(t,e(t))}}function Nn(e,t,n,i,s,r,o,a){var l=2&t;if(!l&&"function"!=typeof e)throw new gs("Expected a function");var c=i?i.length:0;if(c||(t&=-97,i=s=z),o=o===z?o:Gs(Ki(o),0),a=a===z?a:Ki(a),c-=s?s.length:0,64&t){var u=i,d=s;i=s=z}var p=l?z:xr(e);return r=[e,t,n,i,s,u,d,r,o,a],p&&(n=r[1],e=p[1],t=n|e,i=128==e&&8==n||128==e&&256==n&&p[8]>=r[7].length||384==e&&p[8]>=p[7].length&&8==n,131>t||i)&&(1&e&&(r[2]=p[2],t|=1&n?0:4),(n=p[3])&&(i=r[3],r[3]=i?on(i,n,p[4]):n,r[4]=i?$(r[3],"__lodash_placeholder__"):p[4]),(n=p[5])&&(i=r[5],r[5]=i?an(i,n,p[6]):n,r[6]=i?$(r[5],"__lodash_placeholder__"):p[6]),(n=p[7])&&(r[7]=n),128&e&&(r[8]=null==r[8]?p[8]:Vs(r[8],p[8])),null==r[9]&&(r[9]=p[9]),r[0]=p[0],r[1]=t),e=r[0],t=r[1],n=r[2],i=r[3],s=r[4],a=r[9]=null==r[9]?l?0:e.length:Gs(r[9]-c,0),!a&&24&t&&(t&=-25),(p?br:kr)(t&&1!=t?8==t||16==t?vn(e,t,a):32!=t&&33!=t||s.length?Cn.apply(z,r):Sn(e,t,n,i):_n(e,t,n),r)}function Dn(e,t,n,i,s,r){var o=2&s,a=e.length,l=t.length;if(a!=l&&!(o&&l>a))return!1;if(l=r.get(e))return l==t;var l=-1,c=!0,u=1&s?new Fe:z;for(r.set(e,t);++l<a;){var d=e[l],p=t[l];if(i)var h=o?i(p,d,l,t,e,r):i(d,p,l,e,t,r);if(h!==z){if(h)continue;c=!1;break}if(u){if(!f(t,function(e,t){return u.has(t)||d!==e&&!n(d,e,i,s,r)?void 0:u.add(t)})){c=!1;break}}else if(d!==p&&!n(d,p,i,s,r)){c=!1;break}}return r.delete(e),c}function Pn(e,t,n,i,s,r,o){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)break;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":if(e.byteLength!=t.byteLength||!i(new Rs(e),new Rs(t)))break;return!0;case"[object Boolean]":case"[object Date]":return+e==+t;case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object Number]":return e!=+e?t!=+t:e==+t;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var a=M;case"[object Set]":if(a||(a=q),e.size!=t.size&&!(2&r))break;return(n=o.get(e))?n==t:(r|=1,o.set(e,t),Dn(a(e),a(t),i,s,r,o));case"[object Symbol]":if(fr)return fr.call(e)==fr.call(t)}return!1}function On(e){for(var t=e.name+"",n=ar[t],i=xs.call(ar,t)?n.length:0;i--;){var s=n[i],r=s.func;if(null==r||r==e)return s.name}return t}function jn(e){return(xs.call(we,"placeholder")?we:e).placeholder}function Mn(){var e=we.iteratee||cs,e=e===cs?Et:e;return arguments.length?e(arguments[0],arguments[1]):e}function $n(e,t){var n=e.__data__,i=typeof t;return("string"==i||"number"==i||"symbol"==i||"boolean"==i?"__proto__"!==t:null===t)?n["string"==typeof t?"string":"hash"]:n.map}function qn(e){e=To(e);for(var t=e.length;t--;){var n=e[t][1];e[t][2]=n===n&&!Mi(n)}return e}function Fn(e,t){var n=e[t];return qi(n)?n:z}function Bn(e){return Ps(Object(e))}function Hn(e){return ks.call(e)}function Un(e,t,n){t=Jn(t,e)?[t]:en(t);for(var i,s=-1,r=t.length;++s<r;){var o=si(t[s]);if(!(i=null!=e&&n(e,o)))break;e=e[o]}return i?i:(r=e?e.length:0,!!r&&ji(r)&&Yn(o,r)&&(lo(e)||Ui(e)||Ii(e)))}function zn(e){var t=e.length,n=e.constructor(t);return t&&"string"==typeof e[0]&&xs.call(e,"index")&&(n.index=e.index,n.input=e.input),n}function Wn(e){return"function"!=typeof e.constructor||ei(e)?{}:it(Hs(Object(e)))}function Gn(n,i,s,r){var o=n.constructor;switch(i){case"[object ArrayBuffer]":return sn(n);case"[object Boolean]":case"[object Date]":return new o(+n);case"[object DataView]":return i=r?sn(n.buffer):n.buffer,new n.constructor(i,n.byteOffset,n.byteLength);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return i=r?sn(n.buffer):n.buffer,new n.constructor(i,n.byteOffset,n.length);case"[object Map]":return i=r?s(M(n),!0):M(n),p(i,e,new n.constructor);case"[object Number]":case"[object String]":return new o(n);case"[object RegExp]":return i=new n.constructor(n.source,fe.exec(n)),i.lastIndex=n.lastIndex,i;case"[object Set]":return i=r?s(q(n),!0):q(n),p(i,t,new n.constructor);case"[object Symbol]":return fr?Object(fr.call(n)):{}}}function Vn(e){var t=e?e.length:z;return ji(t)&&(lo(e)||Ui(e)||Ii(e))?E(t,String):null}function Kn(e){return lo(e)||Ii(e)}function Xn(e){return lo(e)&&!(2==e.length&&!Pi(e[0]))}function Yn(e,t){return t=null==t?9007199254740991:t,!!t&&("number"==typeof e||be.test(e))&&e>-1&&0==e%1&&t>e}function Zn(e,t,n){if(!Mi(n))return!1;var i=typeof t;return!!("number"==i?Ri(n)&&Yn(t,n.length):"string"==i&&t in n)&&Ai(n[t],e)}function Jn(e,t){if(lo(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!zi(e))||(se.test(e)||!ie.test(e)||null!=t&&e in Object(t))}function Qn(e){var t=On(e),n=we[t];return"function"==typeof n&&t in je.prototype&&(e===n||(t=xr(n),!!t&&e===t[0]))}function ei(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||vs)}function ti(e,t){return function(n){return null!=n&&(n[e]===t&&(t!==z||e in Object(n)))}}function ni(e,t,n,i,s,r){return Mi(e)&&Mi(t)&&At(e,t,z,ni,r.set(t,e)),e}function ii(e,t){return 1==t.length?e:ht(e,Bt(t,0,-1))}function si(e){if("string"==typeof e||zi(e))return e;var t=e+"";return"0"==t&&1/e==-W?"-0":t}function ri(e){if(null!=e){try{return Cs.call(e)}catch(e){}return e+""}return""}function oi(e){if(e instanceof je)return e.clone();var t=new Se(e.__wrapped__,e.__chain__);return t.__actions__=ln(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}function ai(e,t,n){var i=e?e.length:0;return i?(t=n||t===z?1:Ki(t),Bt(e,0>t?0:t,i)):[]}function li(e,t,n){var i=e?e.length:0;return i?(t=n||t===z?1:Ki(t),t=i-t,Bt(e,0,0>t?0:t)):[]}function ci(e){return e&&e.length?e[0]:z}function ui(e){var t=e?e.length:0;return t?e[t-1]:z}function di(e,t){return e&&e.length&&t&&t.length?jt(e,t):e}function pi(e){return e?Zs.call(e):e}function hi(e){if(!e||!e.length)return[];var t=0;return e=a(e,function(e){return Ni(e)?(t=Gs(e.length,t),!0):void 0}),E(t,function(t){return u(e,Pt(t))})}function fi(e,t){if(!e||!e.length)return[];var i=hi(e);return null==t?i:u(i,function(e){return n(t,z,e)})}function _i(e){return e=we(e),e.__chain__=!0,e}function mi(e,t){return t(e)}function gi(){return this}function yi(e,t){return(lo(e)?s:mr)(e,Mn(t,3))}function vi(e,t){return(lo(e)?r:gr)(e,Mn(t,3))}function bi(e,t){return(lo(e)?u:St)(e,Mn(t,3))}function Ci(e,t,n){var i=-1,s=Gi(e),r=s.length,o=r-1;for(t=(n?Zn(e,t,n):t===z)?1:et(Ki(t),0,r);++i<t;)e=$t(i,o),n=s[e],s[e]=s[i],s[i]=n;return s.length=t,s}function xi(e,t,n){return t=n?z:t,t=e&&null==t?e.length:t,Nn(e,128,z,z,z,z,t)}function Ei(e,t){var n;if("function"!=typeof t)throw new gs("Expected a function");return e=Ki(e),function(){return 0<--e&&(n=t.apply(this,arguments)),1>=e&&(t=z),n}}function wi(e,t,n){return t=n?z:t,e=Nn(e,8,z,z,z,z,z,t),e.placeholder=wi.placeholder,e}function ki(e,t,n){return t=n?z:t,e=Nn(e,16,z,z,z,z,z,t),e.placeholder=ki.placeholder,e}function Si(e,t,n){function i(t){var n=l,i=c;return l=c=z,f=t,d=e.apply(i,n)}function s(e){var n=e-h;return e-=f,!h||n>=t||0>n||m&&e>=u}function r(){var e=Zr();if(s(e))return o(e);var n;n=e-f,e=t-(e-h),n=m?Vs(e,u-n):e,p=$s(r,n)}function o(e){return Ns(p),p=z,g&&l?i(e):(l=c=z,d)}function a(){var e=Zr(),n=s(e);if(l=arguments,c=this,h=e,n){if(p===z)return f=e=h,p=$s(r,t),_?i(e):d;if(m)return Ns(p),p=$s(r,t),i(h)}return p===z&&(p=$s(r,t)),d}var l,c,u,d,p,h=0,f=0,_=!1,m=!1,g=!0;if("function"!=typeof e)throw new gs("Expected a function");return t=Yi(t)||0,Mi(n)&&(_=!!n.leading,u=(m="maxWait"in n)?Gs(Yi(n.maxWait)||0,t):u,g="trailing"in n?!!n.trailing:g),a.cancel=function(){p!==z&&Ns(p),h=f=0,l=c=p=z},a.flush=function(){return p===z?d:o(Zr())},a}function Ti(e,t){function n(){var i=arguments,s=t?t.apply(this,i):i[0],r=n.cache;return r.has(s)?r.get(s):(i=e.apply(this,i),n.cache=r.set(s,i),i)}if("function"!=typeof e||t&&"function"!=typeof t)throw new gs("Expected a function");return n.cache=new(Ti.Cache||qe),n}function Li(e,t){if("function"!=typeof e)throw new gs("Expected a function");return t=Gs(t===z?e.length-1:Ki(t),0),function(){for(var i=arguments,s=-1,r=Gs(i.length-t,0),o=Array(r);++s<r;)o[s]=i[t+s];switch(t){case 0:return e.call(this,o);case 1:return e.call(this,i[0],o);case 2:return e.call(this,i[0],i[1],o)}for(r=Array(t+1),s=-1;++s<t;)r[s]=i[s];return r[t]=o,n(e,this,r)}}function Ai(e,t){return e===t||e!==e&&t!==t}function Ii(e){return Ni(e)&&xs.call(e,"callee")&&(!Ms.call(e,"callee")||"[object Arguments]"==ks.call(e))}function Ri(e){return null!=e&&ji(Er(e))&&!Pi(e)}function Ni(e){return $i(e)&&Ri(e)}function Di(e){return!!$i(e)&&("[object Error]"==ks.call(e)||"string"==typeof e.message&&"string"==typeof e.name)}function Pi(e){return e=Mi(e)?ks.call(e):"","[object Function]"==e||"[object GeneratorFunction]"==e}function Oi(e){return"number"==typeof e&&e==Ki(e)}function ji(e){return"number"==typeof e&&e>-1&&0==e%1&&9007199254740991>=e}function Mi(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function $i(e){return!!e&&"object"==typeof e}function qi(e){return!!Mi(e)&&(Pi(e)||O(e)?Ts:ye).test(ri(e))}function Fi(e){return"number"==typeof e||$i(e)&&"[object Number]"==ks.call(e)}function Bi(e){return!(!$i(e)||"[object Object]"!=ks.call(e)||O(e))&&(e=Hs(Object(e)),null===e||(e=xs.call(e,"constructor")&&e.constructor,"function"==typeof e&&e instanceof e&&Cs.call(e)==ws))}function Hi(e){return Mi(e)&&"[object RegExp]"==ks.call(e)}function Ui(e){return"string"==typeof e||!lo(e)&&$i(e)&&"[object String]"==ks.call(e)}function zi(e){return"symbol"==typeof e||$i(e)&&"[object Symbol]"==ks.call(e)}function Wi(e){return $i(e)&&ji(e.length)&&!!Pe[ks.call(e)]}function Gi(e){if(!e)return[];if(Ri(e))return Ui(e)?e.match(Ae):ln(e);if(Os&&e[Os])return j(e[Os]());var t=Hn(e);return("[object Map]"==t?M:"[object Set]"==t?q:is)(e)}function Vi(e){return e?(e=Yi(e),e===W||e===-W?1.7976931348623157e308*(0>e?-1:1):e===e?e:0):0===e?e:0}function Ki(e){e=Vi(e);var t=e%1;return e===e?t?e-t:e:0}function Xi(e){return e?et(Ki(e),0,4294967295):0}function Yi(e){if("number"==typeof e)return e;if(zi(e))return G;if(Mi(e)&&(e=Pi(e.valueOf)?e.valueOf():e,e=Mi(e)?e+"":e),"string"!=typeof e)return 0===e?e:+e;e=e.replace(le,"");var t=ge.test(e);return t||ve.test(e)?He(e.slice(2),t?2:8):me.test(e)?G:+e}function Zi(e){return cn(e,ns(e))}function Ji(e){return null==e?"":Vt(e)}function Qi(e,t,n){return e=null==e?z:ht(e,t),e===z?n:e}function es(e,t){return null!=e&&Un(e,t,gt)}function ts(e){var t=ei(e);if(!t&&!Ri(e))return Ws(Object(e));var n,i=Vn(e),s=!!i,i=i||[],r=i.length;for(n in e)!mt(e,n)||s&&("length"==n||Yn(n,r))||t&&"constructor"==n||i.push(n);return i}function ns(e){for(var t=-1,n=ei(e),i=wt(e),s=i.length,r=Vn(e),o=!!r,r=r||[],a=r.length;++t<s;){var l=i[t];o&&("length"==l||Yn(l,a))||"constructor"==l&&(n||!xs.call(e,l))||r.push(l)}return r}function is(e){return e?S(e,ts(e)):[]}function ss(e){return jo(Ji(e).toLowerCase())}function rs(e){return(e=Ji(e))&&e.replace(Ce,R).replace(Le,"")}function os(e,t,n){return e=Ji(e),t=n?z:t,t===z&&(t=Ne.test(e)?Ie:de),e.match(t)||[]}function as(e){return function(){return e}}function ls(e){return e}function cs(e){return Et("function"==typeof e?e:tt(e,!0))}function us(e,t,n){var i=ts(t),r=pt(t,i);null!=n||Mi(t)&&(r.length||!i.length)||(n=t,t=e,e=this,r=pt(t,ts(t)));var o=!(Mi(n)&&"chain"in n&&!n.chain),a=Pi(e);return s(r,function(n){var i=t[n];e[n]=i,a&&(e.prototype[n]=function(){var t=this.__chain__;if(o||t){var n=e(this.__wrapped__);return(n.__actions__=ln(this.__actions__)).push({func:i,args:arguments,thisArg:e}),n.__chain__=t,n}return i.apply(e,d([this.value()],arguments))})}),e}function ds(){}function ps(e){return Jn(e)?Pt(si(e)):Ot(e)}I=I?Ye.defaults({},I,Ye.pick(Xe,De)):Xe;var hs=I.Date,fs=I.Error,_s=I.Math,ms=I.RegExp,gs=I.TypeError,ys=I.Array.prototype,vs=I.Object.prototype,bs=I.String.prototype,Cs=I.Function.prototype.toString,xs=vs.hasOwnProperty,Es=0,ws=Cs.call(Object),ks=vs.toString,Ss=Xe._,Ts=ms("^"+Cs.call(xs).replace(oe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ls=We?I.Buffer:z,As=I.Reflect,Is=I.Symbol,Rs=I.Uint8Array,Ns=I.clearTimeout,Ds=As?As.f:z,Ps=Object.getOwnPropertySymbols,Os="symbol"==typeof(Os=Is&&Is.iterator)?Os:z,js=Object.create,Ms=vs.propertyIsEnumerable,$s=I.setTimeout,qs=ys.splice,Fs=_s.ceil,Bs=_s.floor,Hs=Object.getPrototypeOf,Us=I.isFinite,zs=ys.join,Ws=Object.keys,Gs=_s.max,Vs=_s.min,Ks=I.parseInt,Xs=_s.random,Ys=bs.replace,Zs=ys.reverse,Js=bs.split,Qs=Fn(I,"DataView"),er=Fn(I,"Map"),tr=Fn(I,"Promise"),nr=Fn(I,"Set"),ir=Fn(I,"WeakMap"),sr=Fn(Object,"create"),rr=ir&&new ir,or=!Ms.call({valueOf:1},"valueOf"),ar={},lr=ri(Qs),cr=ri(er),ur=ri(tr),dr=ri(nr),pr=ri(ir),hr=Is?Is.prototype:z,fr=hr?hr.valueOf:z,_r=hr?hr.toString:z;we.templateSettings={escape:ee,evaluate:te,interpolate:ne,variable:"",imports:{_:we}},we.prototype=ke.prototype,we.prototype.constructor=we,Se.prototype=it(ke.prototype),Se.prototype.constructor=Se,je.prototype=it(ke.prototype),je.prototype.constructor=je,Me.prototype.clear=function(){this.__data__=sr?sr(null):{}},Me.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},Me.prototype.get=function(e){var t=this.__data__;return sr?(e=t[e],"__lodash_hash_undefined__"===e?z:e):xs.call(t,e)?t[e]:z},Me.prototype.has=function(e){var t=this.__data__;return sr?t[e]!==z:xs.call(t,e)},Me.prototype.set=function(e,t){return this.__data__[e]=sr&&t===z?"__lodash_hash_undefined__":t,this},$e.prototype.clear=function(){this.__data__=[]},$e.prototype.delete=function(e){var t=this.__data__;return e=Ke(t,e),!(0>e)&&(e==t.length-1?t.pop():qs.call(t,e,1),!0)},$e.prototype.get=function(e){var t=this.__data__;return e=Ke(t,e),0>e?z:t[e][1]},$e.prototype.has=function(e){return-1<Ke(this.__data__,e)},$e.prototype.set=function(e,t){var n=this.__data__,i=Ke(n,e);return 0>i?n.push([e,t]):n[i][1]=t,this},qe.prototype.clear=function(){this.__data__={hash:new Me,map:new(er||$e),string:new Me}},qe.prototype.delete=function(e){return $n(this,e).delete(e)},qe.prototype.get=function(e){return $n(this,e).get(e)},qe.prototype.has=function(e){return $n(this,e).has(e)},qe.prototype.set=function(e,t){return $n(this,e).set(e,t),this},Fe.prototype.add=Fe.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},Fe.prototype.has=function(e){return this.__data__.has(e)},Ue.prototype.clear=function(){this.__data__=new $e},Ue.prototype.delete=function(e){return this.__data__.delete(e)},Ue.prototype.get=function(e){return this.__data__.get(e)},Ue.prototype.has=function(e){return this.__data__.has(e)},Ue.prototype.set=function(e,t){var n=this.__data__;return n instanceof $e&&200==n.__data__.length&&(n=this.__data__=new qe(n.__data__)),n.set(e,t),this};var mr=hn(ut),gr=hn(dt,!0),yr=fn(),vr=fn(!0);Ds&&!Ms.call({valueOf:1},"valueOf")&&(wt=function(e){return j(Ds(e))});var br=rr?function(e,t){return rr.set(e,t),e}:ls,Cr=nr&&1/q(new nr([,-0]))[1]==W?function(e){return new nr(e)}:ds,xr=rr?function(e){return rr.get(e)}:ds,Er=Pt("length");Ps||(Bn=function(){return[]});var wr=Ps?function(e){for(var t=[];e;)d(t,Bn(e)),e=Hs(Object(e));return t}:Bn;(Qs&&"[object DataView]"!=Hn(new Qs(new ArrayBuffer(1)))||er&&"[object Map]"!=Hn(new er)||tr&&"[object Promise]"!=Hn(tr.resolve())||nr&&"[object Set]"!=Hn(new nr)||ir&&"[object WeakMap]"!=Hn(new ir))&&(Hn=function(e){var t=ks.call(e);if(e=(e="[object Object]"==t?e.constructor:z)?ri(e):z)switch(e){case lr:return"[object DataView]";case cr:return"[object Map]";case ur:return"[object Promise]";case dr:return"[object Set]";case pr:return"[object WeakMap]"}return t});var kr=function(){var e=0,t=0;return function(n,i){var s=Zr(),r=16-(s-t);if(t=s,r>0){if(150<=++e)return n}else e=0;return br(n,i)}}(),Sr=Ti(function(e){var t=[];return Ji(e).replace(re,function(e,n,i,s){t.push(i?s.replace(pe,"$1"):n||e)}),t}),Tr=Li(function(e,t){return Ni(e)?rt(e,ct(t,1,Ni,!0)):[]}),Lr=Li(function(e,t){var n=ui(t);return Ni(n)&&(n=z),Ni(e)?rt(e,ct(t,1,Ni,!0),Mn(n)):[]}),Ar=Li(function(e,t){var n=ui(t);return Ni(n)&&(n=z),Ni(e)?rt(e,ct(t,1,Ni,!0),z,n):[]}),Ir=Li(function(e){var t=u(e,Qt);return t.length&&t[0]===e[0]?yt(t):[]}),Rr=Li(function(e){var t=ui(e),n=u(e,Qt);return t===ui(n)?t=z:n.pop(),n.length&&n[0]===e[0]?yt(n,Mn(t)):[]}),Nr=Li(function(e){var t=ui(e),n=u(e,Qt);return t===ui(n)?t=z:n.pop(),n.length&&n[0]===e[0]?yt(n,z,t):[]}),Dr=Li(di),Pr=Li(function(e,t){t=ct(t,1);var n=e?e.length:0,i=Qe(e,t);return Mt(e,u(t,function(e){return Yn(e,n)?+e:e}).sort(rn)),i}),Or=Li(function(e){return Kt(ct(e,1,Ni,!0))}),jr=Li(function(e){var t=ui(e);return Ni(t)&&(t=z),Kt(ct(e,1,Ni,!0),Mn(t))}),Mr=Li(function(e){var t=ui(e);return Ni(t)&&(t=z),Kt(ct(e,1,Ni,!0),z,t)}),$r=Li(function(e,t){return Ni(e)?rt(e,t):[]}),qr=Li(function(e){return Zt(a(e,Ni))}),Fr=Li(function(e){var t=ui(e);return Ni(t)&&(t=z),Zt(a(e,Ni),Mn(t))}),Br=Li(function(e){var t=ui(e);return Ni(t)&&(t=z),Zt(a(e,Ni),z,t)}),Hr=Li(hi),Ur=Li(function(e){var t=e.length,t=t>1?e[t-1]:z,t="function"==typeof t?(e.pop(),t):z;return fi(e,t)}),zr=Li(function(e){function t(t){return Qe(t,e)}e=ct(e,1);var n=e.length,i=n?e[0]:0,s=this.__wrapped__;return!(n>1||this.__actions__.length)&&s instanceof je&&Yn(i)?(s=s.slice(i,+i+(n?1:0)),s.__actions__.push({func:mi,args:[t],thisArg:z}),new Se(s,this.__chain__).thru(function(e){return n&&!e.length&&e.push(z),e})):this.thru(t)}),Wr=dn(function(e,t,n){xs.call(e,n)?++e[n]:e[n]=1}),Gr=dn(function(e,t,n){xs.call(e,n)?e[n].push(t):e[n]=[t]}),Vr=Li(function(e,t,i){var s=-1,r="function"==typeof t,o=Jn(t),a=Ri(e)?Array(e.length):[];return mr(e,function(e){var l=r?t:o&&null!=e?e[t]:z;a[++s]=l?n(l,e,i):bt(e,t,i)}),a}),Kr=dn(function(e,t,n){e[n]=t}),Xr=dn(function(e,t,n){e[n?0:1].push(t)},function(){return[[],[]]}),Yr=Li(function(e,t){if(null==e)return[];var n=t.length;return n>1&&Zn(e,t[0],t[1])?t=[]:n>2&&Zn(t[0],t[1],t[2])&&(t=[t[0]]),t=1==t.length&&lo(t[0])?t[0]:ct(t,1,Xn),Rt(e,t,[])}),Zr=hs.now,Jr=Li(function(e,t,n){var i=1;if(n.length)var s=$(n,jn(Jr)),i=32|i;return Nn(e,i,t,n,s)}),Qr=Li(function(e,t,n){var i=3;if(n.length)var s=$(n,jn(Qr)),i=32|i;return Nn(t,i,e,n,s)}),eo=Li(function(e,t){return st(e,1,t)}),to=Li(function(e,t,n){return st(e,Yi(t)||0,n)});Ti.Cache=qe;var no=Li(function(e,t){t=1==t.length&&lo(t[0])?u(t[0],k(Mn())):u(ct(t,1,Xn),k(Mn()));var i=t.length;return Li(function(s){for(var r=-1,o=Vs(s.length,i);++r<o;)s[r]=t[r].call(this,s[r]);return n(e,this,s)})}),io=Li(function(e,t){var n=$(t,jn(io));return Nn(e,32,z,t,n)}),so=Li(function(e,t){var n=$(t,jn(so));return Nn(e,64,z,t,n)}),ro=Li(function(e,t){return Nn(e,256,z,z,z,ct(t,1))}),oo=Ln(_t),ao=Ln(function(e,t){return e>=t}),lo=Array.isArray,co=Ls?function(e){return e instanceof Ls}:as(!1),uo=Ln(kt),po=Ln(function(e,t){return t>=e}),ho=pn(function(e,t){if(or||ei(t)||Ri(t))cn(t,ts(t),e);else for(var n in t)xs.call(t,n)&&Ve(e,n,t[n])}),fo=pn(function(e,t){if(or||ei(t)||Ri(t))cn(t,ns(t),e);else for(var n in t)Ve(e,n,t[n])}),_o=pn(function(e,t,n,i){cn(t,ns(t),e,i)}),mo=pn(function(e,t,n,i){cn(t,ts(t),e,i)}),go=Li(function(e,t){return Qe(e,ct(t,1))}),yo=Li(function(e){return e.push(z,ze),n(_o,z,e)}),vo=Li(function(e){return e.push(z,ni),n(wo,z,e)}),bo=xn(function(e,t,n){e[t]=n},as(ls)),Co=xn(function(e,t,n){xs.call(e,t)?e[t].push(n):e[t]=[n]},Mn),xo=Li(bt),Eo=pn(function(e,t,n){At(e,t,n)}),wo=pn(function(e,t,n,i){At(e,t,n,i)}),ko=Li(function(e,t){return null==e?{}:(t=u(ct(t,1),si),Nt(e,rt(ft(e,ns,wr),t)))}),So=Li(function(e,t){return null==e?{}:Nt(e,u(ct(t,1),si))}),To=Rn(ts),Lo=Rn(ns),Ao=gn(function(e,t,n){return t=t.toLowerCase(),e+(n?ss(t):t)}),Io=gn(function(e,t,n){return e+(n?"-":"")+t.toLowerCase()}),Ro=gn(function(e,t,n){return e+(n?" ":"")+t.toLowerCase()}),No=mn("toLowerCase"),Do=gn(function(e,t,n){
return e+(n?"_":"")+t.toLowerCase()}),Po=gn(function(e,t,n){return e+(n?" ":"")+jo(t)}),Oo=gn(function(e,t,n){return e+(n?" ":"")+t.toUpperCase()}),jo=mn("toUpperCase"),Mo=Li(function(e,t){try{return n(e,z,t)}catch(e){return Di(e)?e:new fs(e)}}),$o=Li(function(e,t){return s(ct(t,1),function(t){t=si(t),e[t]=Jr(e[t],e)}),e}),qo=bn(),Fo=bn(!0),Bo=Li(function(e,t){return function(n){return bt(n,e,t)}}),Ho=Li(function(e,t){return function(n){return bt(e,n,t)}}),Uo=wn(u),zo=wn(o),Wo=wn(f),Go=Tn(),Vo=Tn(!0),Ko=En(function(e,t){return e+t}),Xo=In("ceil"),Yo=En(function(e,t){return e/t}),Zo=In("floor"),Jo=En(function(e,t){return e*t}),Qo=In("round"),ea=En(function(e,t){return e-t});return we.after=function(e,t){if("function"!=typeof t)throw new gs("Expected a function");return e=Ki(e),function(){return 1>--e?t.apply(this,arguments):void 0}},we.ary=xi,we.assign=ho,we.assignIn=fo,we.assignInWith=_o,we.assignWith=mo,we.at=go,we.before=Ei,we.bind=Jr,we.bindAll=$o,we.bindKey=Qr,we.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return lo(e)?e:[e]},we.chain=_i,we.chunk=function(e,t,n){if(t=(n?Zn(e,t,n):t===z)?1:Gs(Ki(t),0),n=e?e.length:0,!n||1>t)return[];for(var i=0,s=0,r=Array(Fs(n/t));n>i;)r[s++]=Bt(e,i,i+=t);return r},we.compact=function(e){for(var t=-1,n=e?e.length:0,i=0,s=[];++t<n;){var r=e[t];r&&(s[i++]=r)}return s},we.concat=function(){for(var e=arguments.length,t=Array(e?e-1:0),n=arguments[0],i=e;i--;)t[i-1]=arguments[i];return e?d(lo(n)?ln(n):[n],ct(t,1)):[]},we.cond=function(e){var t=e?e.length:0,i=Mn();return e=t?u(e,function(e){if("function"!=typeof e[1])throw new gs("Expected a function");return[i(e[0]),e[1]]}):[],Li(function(i){for(var s=-1;++s<t;){var r=e[s];if(n(r[0],this,i))return n(r[1],this,i)}})},we.conforms=function(e){return nt(tt(e,!0))},we.constant=as,we.countBy=Wr,we.create=function(e,t){var n=it(e);return t?Je(n,t):n},we.curry=wi,we.curryRight=ki,we.debounce=Si,we.defaults=yo,we.defaultsDeep=vo,we.defer=eo,we.delay=to,we.difference=Tr,we.differenceBy=Lr,we.differenceWith=Ar,we.drop=ai,we.dropRight=li,we.dropRightWhile=function(e,t){return e&&e.length?Xt(e,Mn(t,3),!0,!0):[]},we.dropWhile=function(e,t){return e&&e.length?Xt(e,Mn(t,3),!0):[]},we.fill=function(e,t,n,i){var s=e?e.length:0;if(!s)return[];for(n&&"number"!=typeof n&&Zn(e,t,n)&&(n=0,i=s),s=e.length,n=Ki(n),0>n&&(n=-n>s?0:s+n),i=i===z||i>s?s:Ki(i),0>i&&(i+=s),i=n>i?0:Xi(i);i>n;)e[n++]=t;return e},we.filter=function(e,t){return(lo(e)?a:lt)(e,Mn(t,3))},we.flatMap=function(e,t){return ct(bi(e,t),1)},we.flatMapDeep=function(e,t){return ct(bi(e,t),W)},we.flatMapDepth=function(e,t,n){return n=n===z?1:Ki(n),ct(bi(e,t),n)},we.flatten=function(e){return e&&e.length?ct(e,1):[]},we.flattenDeep=function(e){return e&&e.length?ct(e,W):[]},we.flattenDepth=function(e,t){return e&&e.length?(t=t===z?1:Ki(t),ct(e,t)):[]},we.flip=function(e){return Nn(e,512)},we.flow=qo,we.flowRight=Fo,we.fromPairs=function(e){for(var t=-1,n=e?e.length:0,i={};++t<n;){var s=e[t];i[s[0]]=s[1]}return i},we.functions=function(e){return null==e?[]:pt(e,ts(e))},we.functionsIn=function(e){return null==e?[]:pt(e,ns(e))},we.groupBy=Gr,we.initial=function(e){return li(e,1)},we.intersection=Ir,we.intersectionBy=Rr,we.intersectionWith=Nr,we.invert=bo,we.invertBy=Co,we.invokeMap=Vr,we.iteratee=cs,we.keyBy=Kr,we.keys=ts,we.keysIn=ns,we.map=bi,we.mapKeys=function(e,t){var n={};return t=Mn(t,3),ut(e,function(e,i,s){n[t(e,i,s)]=e}),n},we.mapValues=function(e,t){var n={};return t=Mn(t,3),ut(e,function(e,i,s){n[i]=t(e,i,s)}),n},we.matches=function(e){return Tt(tt(e,!0))},we.matchesProperty=function(e,t){return Lt(e,tt(t,!0))},we.memoize=Ti,we.merge=Eo,we.mergeWith=wo,we.method=Bo,we.methodOf=Ho,we.mixin=us,we.negate=function(e){if("function"!=typeof e)throw new gs("Expected a function");return function(){return!e.apply(this,arguments)}},we.nthArg=function(e){return e=Ki(e),Li(function(t){return It(t,e)})},we.omit=ko,we.omitBy=function(e,t){return t=Mn(t),Dt(e,function(e,n){return!t(e,n)})},we.once=function(e){return Ei(2,e)},we.orderBy=function(e,t,n,i){return null==e?[]:(lo(t)||(t=null==t?[]:[t]),n=i?z:n,lo(n)||(n=null==n?[]:[n]),Rt(e,t,n))},we.over=Uo,we.overArgs=no,we.overEvery=zo,we.overSome=Wo,we.partial=io,we.partialRight=so,we.partition=Xr,we.pick=So,we.pickBy=function(e,t){return null==e?{}:Dt(e,Mn(t))},we.property=ps,we.propertyOf=function(e){return function(t){return null==e?z:ht(e,t)}},we.pull=Dr,we.pullAll=di,we.pullAllBy=function(e,t,n){return e&&e.length&&t&&t.length?jt(e,t,Mn(n)):e},we.pullAllWith=function(e,t,n){return e&&e.length&&t&&t.length?jt(e,t,z,n):e},we.pullAt=Pr,we.range=Go,we.rangeRight=Vo,we.rearg=ro,we.reject=function(e,t){var n=lo(e)?a:lt;return t=Mn(t,3),n(e,function(e,n,i){return!t(e,n,i)})},we.remove=function(e,t){var n=[];if(!e||!e.length)return n;var i=-1,s=[],r=e.length;for(t=Mn(t,3);++i<r;){var o=e[i];t(o,i,e)&&(n.push(o),s.push(i))}return Mt(e,s),n},we.rest=Li,we.reverse=pi,we.sampleSize=Ci,we.set=function(e,t,n){return null==e?e:Ft(e,t,n)},we.setWith=function(e,t,n,i){return i="function"==typeof i?i:z,null==e?e:Ft(e,t,n,i)},we.shuffle=function(e){return Ci(e,4294967295)},we.slice=function(e,t,n){var i=e?e.length:0;return i?(n&&"number"!=typeof n&&Zn(e,t,n)?(t=0,n=i):(t=null==t?0:Ki(t),n=n===z?i:Ki(n)),Bt(e,t,n)):[]},we.sortBy=Yr,we.sortedUniq=function(e){return e&&e.length?Wt(e):[]},we.sortedUniqBy=function(e,t){return e&&e.length?Wt(e,Mn(t)):[]},we.split=function(e,t,n){return n&&"number"!=typeof n&&Zn(e,t,n)&&(t=n=z),n=n===z?4294967295:n>>>0,n?(e=Ji(e))&&("string"==typeof t||null!=t&&!Hi(t))&&(t=Vt(t),""==t&&Re.test(e))?tn(e.match(Ae),0,n):Js.call(e,t,n):[]},we.spread=function(e,t){if("function"!=typeof e)throw new gs("Expected a function");return t=t===z?0:Gs(Ki(t),0),Li(function(i){var s=i[t];return i=tn(i,0,t),s&&d(i,s),n(e,this,i)})},we.tail=function(e){return ai(e,1)},we.take=function(e,t,n){return e&&e.length?(t=n||t===z?1:Ki(t),Bt(e,0,0>t?0:t)):[]},we.takeRight=function(e,t,n){var i=e?e.length:0;return i?(t=n||t===z?1:Ki(t),t=i-t,Bt(e,0>t?0:t,i)):[]},we.takeRightWhile=function(e,t){return e&&e.length?Xt(e,Mn(t,3),!1,!0):[]},we.takeWhile=function(e,t){return e&&e.length?Xt(e,Mn(t,3)):[]},we.tap=function(e,t){return t(e),e},we.throttle=function(e,t,n){var i=!0,s=!0;if("function"!=typeof e)throw new gs("Expected a function");return Mi(n)&&(i="leading"in n?!!n.leading:i,s="trailing"in n?!!n.trailing:s),Si(e,t,{leading:i,maxWait:t,trailing:s})},we.thru=mi,we.toArray=Gi,we.toPairs=To,we.toPairsIn=Lo,we.toPath=function(e){return lo(e)?u(e,si):zi(e)?[e]:ln(Sr(e))},we.toPlainObject=Zi,we.transform=function(e,t,n){var i=lo(e)||Wi(e);if(t=Mn(t,4),null==n)if(i||Mi(e)){var r=e.constructor;n=i?lo(e)?new r:[]:Pi(r)?it(Hs(Object(e))):{}}else n={};return(i?s:ut)(e,function(e,i,s){return t(n,e,i,s)}),n},we.unary=function(e){return xi(e,1)},we.union=Or,we.unionBy=jr,we.unionWith=Mr,we.uniq=function(e){return e&&e.length?Kt(e):[]},we.uniqBy=function(e,t){return e&&e.length?Kt(e,Mn(t)):[]},we.uniqWith=function(e,t){return e&&e.length?Kt(e,z,t):[]},we.unset=function(e,t){var n;if(null==e)n=!0;else{n=e;var i=t,i=Jn(i,n)?[i]:en(i);n=ii(n,i),i=si(ui(i)),n=!(null!=n&&mt(n,i))||delete n[i]}return n},we.unzip=hi,we.unzipWith=fi,we.update=function(e,t,n){return null==e?e:Ft(e,t,("function"==typeof n?n:ls)(ht(e,t)),void 0)},we.updateWith=function(e,t,n,i){return i="function"==typeof i?i:z,null!=e&&(e=Ft(e,t,("function"==typeof n?n:ls)(ht(e,t)),i)),e},we.values=is,we.valuesIn=function(e){return null==e?[]:S(e,ns(e))},we.without=$r,we.words=os,we.wrap=function(e,t){return t=null==t?ls:t,io(t,e)},we.xor=qr,we.xorBy=Fr,we.xorWith=Br,we.zip=Hr,we.zipObject=function(e,t){return Jt(e||[],t||[],Ve)},we.zipObjectDeep=function(e,t){return Jt(e||[],t||[],Ft)},we.zipWith=Ur,we.entries=To,we.entriesIn=Lo,we.extend=fo,we.extendWith=_o,us(we,we),we.add=Ko,we.attempt=Mo,we.camelCase=Ao,we.capitalize=ss,we.ceil=Xo,we.clamp=function(e,t,n){return n===z&&(n=t,t=z),n!==z&&(n=Yi(n),n=n===n?n:0),t!==z&&(t=Yi(t),t=t===t?t:0),et(Yi(e),t,n)},we.clone=function(e){return tt(e,!1,!0)},we.cloneDeep=function(e){return tt(e,!0,!0)},we.cloneDeepWith=function(e,t){return tt(e,!0,!0,t)},we.cloneWith=function(e,t){return tt(e,!1,!0,t)},we.deburr=rs,we.divide=Yo,we.endsWith=function(e,t,n){e=Ji(e),t=Vt(t);var i=e.length;return n=n===z?i:et(Ki(n),0,i),n-=t.length,n>=0&&e.indexOf(t,n)==n},we.eq=Ai,we.escape=function(e){return(e=Ji(e))&&Q.test(e)?e.replace(Z,N):e},we.escapeRegExp=function(e){return(e=Ji(e))&&ae.test(e)?e.replace(oe,"\\$&"):e},we.every=function(e,t,n){var i=lo(e)?o:ot;return n&&Zn(e,t,n)&&(t=z),i(e,Mn(t,3))},we.find=function(e,t){if(t=Mn(t,3),lo(e)){var n=m(e,t);return n>-1?e[n]:z}return _(e,t,mr)},we.findIndex=function(e,t){return e&&e.length?m(e,Mn(t,3)):-1},we.findKey=function(e,t){return _(e,Mn(t,3),ut,!0)},we.findLast=function(e,t){if(t=Mn(t,3),lo(e)){var n=m(e,t,!0);return n>-1?e[n]:z}return _(e,t,gr)},we.findLastIndex=function(e,t){return e&&e.length?m(e,Mn(t,3),!0):-1},we.findLastKey=function(e,t){return _(e,Mn(t,3),dt,!0)},we.floor=Zo,we.forEach=yi,we.forEachRight=vi,we.forIn=function(e,t){return null==e?e:yr(e,Mn(t,3),ns)},we.forInRight=function(e,t){return null==e?e:vr(e,Mn(t,3),ns)},we.forOwn=function(e,t){return e&&ut(e,Mn(t,3))},we.forOwnRight=function(e,t){return e&&dt(e,Mn(t,3))},we.get=Qi,we.gt=oo,we.gte=ao,we.has=function(e,t){return null!=e&&Un(e,t,mt)},we.hasIn=es,we.head=ci,we.identity=ls,we.includes=function(e,t,n,i){return e=Ri(e)?e:is(e),n=n&&!i?Ki(n):0,i=e.length,0>n&&(n=Gs(i+n,0)),Ui(e)?i>=n&&-1<e.indexOf(t,n):!!i&&-1<g(e,t,n)},we.indexOf=function(e,t,n){var i=e?e.length:0;return i?(n=Ki(n),0>n&&(n=Gs(i+n,0)),g(e,t,n)):-1},we.inRange=function(e,t,n){return t=Yi(t)||0,n===z?(n=t,t=0):n=Yi(n)||0,e=Yi(e),e>=Vs(t,n)&&e<Gs(t,n)},we.invoke=xo,we.isArguments=Ii,we.isArray=lo,we.isArrayBuffer=function(e){return $i(e)&&"[object ArrayBuffer]"==ks.call(e)},we.isArrayLike=Ri,we.isArrayLikeObject=Ni,we.isBoolean=function(e){return!0===e||!1===e||$i(e)&&"[object Boolean]"==ks.call(e)},we.isBuffer=co,we.isDate=function(e){return $i(e)&&"[object Date]"==ks.call(e)},we.isElement=function(e){return!!e&&1===e.nodeType&&$i(e)&&!Bi(e)},we.isEmpty=function(e){if(Ri(e)&&(lo(e)||Ui(e)||Pi(e.splice)||Ii(e)||co(e)))return!e.length;if($i(e)){var t=Hn(e);if("[object Map]"==t||"[object Set]"==t)return!e.size}for(var n in e)if(xs.call(e,n))return!1;return!(or&&ts(e).length)},we.isEqual=function(e,t){return Ct(e,t)},we.isEqualWith=function(e,t,n){var i=(n="function"==typeof n?n:z)?n(e,t):z;return i===z?Ct(e,t,n):!!i},we.isError=Di,we.isFinite=function(e){return"number"==typeof e&&Us(e)},we.isFunction=Pi,we.isInteger=Oi,we.isLength=ji,we.isMap=function(e){return $i(e)&&"[object Map]"==Hn(e)},we.isMatch=function(e,t){return e===t||xt(e,t,qn(t))},we.isMatchWith=function(e,t,n){return n="function"==typeof n?n:z,xt(e,t,qn(t),n)},we.isNaN=function(e){return Fi(e)&&e!=+e},we.isNative=qi,we.isNil=function(e){return null==e},we.isNull=function(e){return null===e},we.isNumber=Fi,we.isObject=Mi,we.isObjectLike=$i,we.isPlainObject=Bi,we.isRegExp=Hi,we.isSafeInteger=function(e){return Oi(e)&&e>=-9007199254740991&&9007199254740991>=e},we.isSet=function(e){return $i(e)&&"[object Set]"==Hn(e)},we.isString=Ui,we.isSymbol=zi,we.isTypedArray=Wi,we.isUndefined=function(e){return e===z},we.isWeakMap=function(e){return $i(e)&&"[object WeakMap]"==Hn(e)},we.isWeakSet=function(e){return $i(e)&&"[object WeakSet]"==ks.call(e)},we.join=function(e,t){return e?zs.call(e,t):""},we.kebabCase=Io,we.last=ui,we.lastIndexOf=function(e,t,n){var i=e?e.length:0;if(!i)return-1;var s=i;if(n!==z&&(s=Ki(n),s=(0>s?Gs(i+s,0):Vs(s,i-1))+1),t!==t)return P(e,s,!0);for(;s--;)if(e[s]===t)return s;return-1},we.lowerCase=Ro,we.lowerFirst=No,we.lt=uo,we.lte=po,we.max=function(e){return e&&e.length?at(e,ls,_t):z},we.maxBy=function(e,t){return e&&e.length?at(e,Mn(t),_t):z},we.mean=function(e){return v(e,ls)},we.meanBy=function(e,t){return v(e,Mn(t))},we.min=function(e){return e&&e.length?at(e,ls,kt):z},we.minBy=function(e,t){return e&&e.length?at(e,Mn(t),kt):z},we.multiply=Jo,we.nth=function(e,t){return e&&e.length?It(e,Ki(t)):z},we.noConflict=function(){return Xe._===this&&(Xe._=Ss),this},we.noop=ds,we.now=Zr,we.pad=function(e,t,n){e=Ji(e);var i=(t=Ki(t))?B(e):0;return!t||i>=t?e:(t=(t-i)/2,kn(Bs(t),n)+e+kn(Fs(t),n))},we.padEnd=function(e,t,n){e=Ji(e);var i=(t=Ki(t))?B(e):0;return t&&t>i?e+kn(t-i,n):e},we.padStart=function(e,t,n){e=Ji(e);var i=(t=Ki(t))?B(e):0;return t&&t>i?kn(t-i,n)+e:e},we.parseInt=function(e,t,n){return n||null==t?t=0:t&&(t=+t),e=Ji(e).replace(le,""),Ks(e,t||(_e.test(e)?16:10))},we.random=function(e,t,n){if(n&&"boolean"!=typeof n&&Zn(e,t,n)&&(t=n=z),n===z&&("boolean"==typeof t?(n=t,t=z):"boolean"==typeof e&&(n=e,e=z)),e===z&&t===z?(e=0,t=1):(e=Yi(e)||0,t===z?(t=e,e=0):t=Yi(t)||0),e>t){var i=e;e=t,t=i}return n||e%1||t%1?(n=Xs(),Vs(e+n*(t-e+Be("1e-"+((n+"").length-1))),t)):$t(e,t)},we.reduce=function(e,t,n){var i=lo(e)?p:b,s=3>arguments.length;return i(e,Mn(t,4),n,s,mr)},we.reduceRight=function(e,t,n){var i=lo(e)?h:b,s=3>arguments.length;return i(e,Mn(t,4),n,s,gr)},we.repeat=function(e,t,n){return t=(n?Zn(e,t,n):t===z)?1:Ki(t),qt(Ji(e),t)},we.replace=function(){var e=arguments,t=Ji(e[0]);return 3>e.length?t:Ys.call(t,e[1],e[2])},we.result=function(e,t,n){t=Jn(t,e)?[t]:en(t);var i=-1,s=t.length;for(s||(e=z,s=1);++i<s;){var r=null==e?z:e[si(t[i])];r===z&&(i=s,r=n),e=Pi(r)?r.call(e):r}return e},we.round=Qo,we.runInContext=U,we.sample=function(e){e=Ri(e)?e:is(e);var t=e.length;return t>0?e[$t(0,t-1)]:z},we.size=function(e){if(null==e)return 0;if(Ri(e)){var t=e.length;return t&&Ui(e)?B(e):t}return $i(e)&&(t=Hn(e),"[object Map]"==t||"[object Set]"==t)?e.size:ts(e).length},we.snakeCase=Do,we.some=function(e,t,n){var i=lo(e)?f:Ht;return n&&Zn(e,t,n)&&(t=z),i(e,Mn(t,3))},we.sortedIndex=function(e,t){return Ut(e,t)},we.sortedIndexBy=function(e,t,n){return zt(e,t,Mn(n))},we.sortedIndexOf=function(e,t){var n=e?e.length:0;if(n){var i=Ut(e,t);if(n>i&&Ai(e[i],t))return i}return-1},we.sortedLastIndex=function(e,t){return Ut(e,t,!0)},we.sortedLastIndexBy=function(e,t,n){return zt(e,t,Mn(n),!0)},we.sortedLastIndexOf=function(e,t){if(e&&e.length){var n=Ut(e,t,!0)-1;if(Ai(e[n],t))return n}return-1},we.startCase=Po,we.startsWith=function(e,t,n){return e=Ji(e),n=et(Ki(n),0,e.length),e.lastIndexOf(Vt(t),n)==n},we.subtract=ea,we.sum=function(e){return e&&e.length?x(e,ls):0},we.sumBy=function(e,t){return e&&e.length?x(e,Mn(t)):0},we.template=function(e,t,n){var i=we.templateSettings;n&&Zn(e,t,n)&&(t=z),e=Ji(e),t=_o({},t,i,ze),n=_o({},t.imports,i.imports,ze);var s,r,o=ts(n),a=S(n,o),l=0;n=t.interpolate||xe;var c="__p+='";n=ms((t.escape||xe).source+"|"+n.source+"|"+(n===ne?he:xe).source+"|"+(t.evaluate||xe).source+"|$","g");var u="sourceURL"in t?"//# sourceURL="+t.sourceURL+"\n":"";if(e.replace(n,function(t,n,i,o,a,u){return i||(i=o),c+=e.slice(l,u).replace(Ee,D),n&&(s=!0,c+="'+__e("+n+")+'"),a&&(r=!0,c+="';"+a+";\n__p+='"),i&&(c+="'+((__t=("+i+"))==null?'':__t)+'"),l=u+t.length,t}),c+="';",(t=t.variable)||(c="with(obj){"+c+"}"),c=(r?c.replace(V,""):c).replace(K,"$1").replace(X,"$1;"),c="function("+(t||"obj")+"){"+(t?"":"obj||(obj={});")+"var __t,__p=''"+(s?",__e=_.escape":"")+(r?",__j=Array.prototype.join;function print(){__p+=__j.call(arguments,'')}":";")+c+"return __p}",t=Mo(function(){return Function(o,u+"return "+c).apply(z,a)}),t.source=c,Di(t))throw t;return t},we.times=function(e,t){if(e=Ki(e),1>e||e>9007199254740991)return[];var n=4294967295,i=Vs(e,4294967295);for(t=Mn(t),e-=4294967295,i=E(i,t);++n<e;)t(n);return i},we.toFinite=Vi,we.toInteger=Ki,we.toLength=Xi,we.toLower=function(e){return Ji(e).toLowerCase()},we.toNumber=Yi,we.toSafeInteger=function(e){return et(Ki(e),-9007199254740991,9007199254740991)},we.toString=Ji,we.toUpper=function(e){return Ji(e).toUpperCase()},we.trim=function(e,t,n){return(e=Ji(e))&&(n||t===z)?e.replace(le,""):e&&(t=Vt(t))?(e=e.match(Ae),t=t.match(Ae),tn(e,L(e,t),A(e,t)+1).join("")):e},we.trimEnd=function(e,t,n){return(e=Ji(e))&&(n||t===z)?e.replace(ue,""):e&&(t=Vt(t))?(e=e.match(Ae),t=A(e,t.match(Ae))+1,tn(e,0,t).join("")):e},we.trimStart=function(e,t,n){return(e=Ji(e))&&(n||t===z)?e.replace(ce,""):e&&(t=Vt(t))?(e=e.match(Ae),t=L(e,t.match(Ae)),tn(e,t).join("")):e},we.truncate=function(e,t){var n=30,i="...";if(Mi(t))var s="separator"in t?t.separator:s,n="length"in t?Ki(t.length):n,i="omission"in t?Vt(t.omission):i;e=Ji(e);var r=e.length;if(Re.test(e))var o=e.match(Ae),r=o.length;if(n>=r)return e;if(r=n-B(i),1>r)return i;if(n=o?tn(o,0,r).join(""):e.slice(0,r),s===z)return n+i;if(o&&(r+=n.length-r),Hi(s)){if(e.slice(r).search(s)){var a=n;for(s.global||(s=ms(s.source,Ji(fe.exec(s))+"g")),s.lastIndex=0;o=s.exec(a);)var l=o.index;n=n.slice(0,l===z?r:l)}}else e.indexOf(Vt(s),r)!=r&&(s=n.lastIndexOf(s),s>-1&&(n=n.slice(0,s)));return n+i},we.unescape=function(e){return(e=Ji(e))&&J.test(e)?e.replace(Y,H):e},we.uniqueId=function(e){var t=++Es;return Ji(e)+t},we.upperCase=Oo,we.upperFirst=jo,we.each=yi,we.eachRight=vi,we.first=ci,us(we,function(){var e={};return ut(we,function(t,n){xs.call(we.prototype,n)||(e[n]=t)}),e}(),{chain:!1}),we.VERSION="4.12.0",s("bind bindKey curry curryRight partial partialRight".split(" "),function(e){we[e].placeholder=we}),s(["drop","take"],function(e,t){je.prototype[e]=function(n){var i=this.__filtered__;if(i&&!t)return new je(this);n=n===z?1:Gs(Ki(n),0);var s=this.clone();return i?s.__takeCount__=Vs(n,s.__takeCount__):s.__views__.push({size:Vs(n,4294967295),type:e+(0>s.__dir__?"Right":"")}),s},je.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}}),s(["filter","map","takeWhile"],function(e,t){var n=t+1,i=1==n||3==n;je.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:Mn(e,3),type:n}),t.__filtered__=t.__filtered__||i,t}}),s(["head","last"],function(e,t){var n="take"+(t?"Right":"");je.prototype[e]=function(){return this[n](1).value()[0]}}),s(["initial","tail"],function(e,t){var n="drop"+(t?"":"Right");je.prototype[e]=function(){return this.__filtered__?new je(this):this[n](1)}}),je.prototype.compact=function(){return this.filter(ls)},je.prototype.find=function(e){return this.filter(e).head()},je.prototype.findLast=function(e){return this.reverse().find(e)},je.prototype.invokeMap=Li(function(e,t){return"function"==typeof e?new je(this):this.map(function(n){return bt(n,e,t)})}),je.prototype.reject=function(e){return e=Mn(e,3),this.filter(function(t){return!e(t)})},je.prototype.slice=function(e,t){e=Ki(e);var n=this;return n.__filtered__&&(e>0||0>t)?new je(n):(0>e?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==z&&(t=Ki(t),n=0>t?n.dropRight(-t):n.take(t-e)),n)},je.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},je.prototype.toArray=function(){return this.take(4294967295)},ut(je.prototype,function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),i=/^(?:head|last)$/.test(t),s=we[i?"take"+("last"==t?"Right":""):t],r=i||/^find/.test(t);s&&(we.prototype[t]=function(){function t(e){return e=s.apply(we,d([e],a)),i&&p?e[0]:e}var o=this.__wrapped__,a=i?[1]:arguments,l=o instanceof je,c=a[0],u=l||lo(o);u&&n&&"function"==typeof c&&1!=c.length&&(l=u=!1);var p=this.__chain__,h=!!this.__actions__.length,c=r&&!p,l=l&&!h;return!r&&u?(o=l?o:new je(this),o=e.apply(o,a),o.__actions__.push({func:mi,args:[t],thisArg:z}),new Se(o,p)):c&&l?e.apply(this,a):(o=this.thru(t),c?i?o.value()[0]:o.value():o)})}),s("pop push shift sort splice unshift".split(" "),function(e){var t=ys[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",i=/^(?:pop|shift)$/.test(e);we.prototype[e]=function(){var e=arguments;if(i&&!this.__chain__){var s=this.value();return t.apply(lo(s)?s:[],e)}return this[n](function(n){return t.apply(lo(n)?n:[],e)})}}),ut(je.prototype,function(e,t){var n=we[t];if(n){var i=n.name+"";(ar[i]||(ar[i]=[])).push({name:t,func:n})}}),ar[Cn(z,2).name]=[{name:"wrapper",func:z}],je.prototype.clone=function(){var e=new je(this.__wrapped__);return e.__actions__=ln(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=ln(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=ln(this.__views__),e},je.prototype.reverse=function(){if(this.__filtered__){var e=new je(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e},je.prototype.value=function(){var e,t=this.__wrapped__.value(),n=this.__dir__,i=lo(t),s=0>n,r=i?t.length:0;e=r;for(var o=this.__views__,a=0,l=-1,c=o.length;++l<c;){var u=o[l],d=u.size;switch(u.type){case"drop":a+=d;break;case"dropRight":e-=d;break;case"take":e=Vs(e,a+d);break;case"takeRight":a=Gs(a,e-d)}}if(e={start:a,end:e},o=e.start,a=e.end,e=a-o,s=s?a:o-1,o=this.__iteratees__,a=o.length,l=0,c=Vs(e,this.__takeCount__),!i||200>r||r==e&&c==e)return Yt(t,this.__actions__);i=[];e:for(;e--&&c>l;){for(s+=n,r=-1,u=t[s];++r<a;){var p=o[r],d=p.type,p=(0,p.iteratee)(u);if(2==d)u=p;else if(!p){if(1==d)continue e;break e}}i[l++]=u}return i},we.prototype.at=zr,we.prototype.chain=function(){return _i(this)},we.prototype.commit=function(){return new Se(this.value(),this.__chain__)},we.prototype.next=function(){this.__values__===z&&(this.__values__=Gi(this.value()));var e=this.__index__>=this.__values__.length,t=e?z:this.__values__[this.__index__++];return{done:e,value:t}},we.prototype.plant=function(e){for(var t,n=this;n instanceof ke;){var i=oi(n);i.__index__=0,i.__values__=z,t?s.__wrapped__=i:t=i;var s=i,n=n.__wrapped__}return s.__wrapped__=e,t},we.prototype.reverse=function(){var e=this.__wrapped__;return e instanceof je?(this.__actions__.length&&(e=new je(this)),e=e.reverse(),e.__actions__.push({func:mi,args:[pi],thisArg:z}),new Se(e,this.__chain__)):this.thru(pi)},we.prototype.toJSON=we.prototype.valueOf=we.prototype.value=function(){return Yt(this.__wrapped__,this.__actions__)},Os&&(we.prototype[Os]=gi),we}var z,W=1/0,G=NaN,V=/\b__p\+='';/g,K=/\b(__p\+=)''\+/g,X=/(__e\(.*?\)|\b__t\))\+'';/g,Y=/&(?:amp|lt|gt|quot|#39|#96);/g,Z=/[&<>"'`]/g,J=RegExp(Y.source),Q=RegExp(Z.source),ee=/<%-([\s\S]+?)%>/g,te=/<%([\s\S]+?)%>/g,ne=/<%=([\s\S]+?)%>/g,ie=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,se=/^\w*$/,re=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]/g,oe=/[\\^$.*+?()[\]{}|]/g,ae=RegExp(oe.source),le=/^\s+|\s+$/g,ce=/^\s+/,ue=/\s+$/,de=/[a-zA-Z0-9]+/g,pe=/\\(\\)?/g,he=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,fe=/\w*$/,_e=/^0x/i,me=/^[-+]0x[0-9a-f]+$/i,ge=/^0b[01]+$/i,ye=/^\[object .+?Constructor\]$/,ve=/^0o[0-7]+$/i,be=/^(?:0|[1-9]\d*)$/,Ce=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,xe=/($^)/,Ee=/['\n\r\u2028\u2029\\]/g,we="[\\ufe0e\\ufe0f]?(?:[\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0]|\\ud83c[\\udffb-\\udfff])?(?:\\u200d(?:[^\\ud800-\\udfff]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff])[\\ufe0e\\ufe0f]?(?:[\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0]|\\ud83c[\\udffb-\\udfff])?)*",ke="(?:[\\u2700-\\u27bf]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff])"+we,Se="(?:[^\\ud800-\\udfff][\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0]?|[\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff]|[\\ud800-\\udfff])",Te=RegExp("['’]","g"),Le=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0]","g"),Ae=RegExp("\\ud83c[\\udffb-\\udfff](?=\\ud83c[\\udffb-\\udfff])|"+Se+we,"g"),Ie=RegExp(["[A-Z\\xc0-\\xd6\\xd8-\\xde]?[a-z\\xdf-\\xf6\\xf8-\\xff]+(?:['’](?:d|ll|m|re|s|t|ve))?(?=[\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000]|[A-Z\\xc0-\\xd6\\xd8-\\xde]|$)|(?:[A-Z\\xc0-\\xd6\\xd8-\\xde]|[^\\ud800-\\udfff\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde])+(?:['’](?:D|LL|M|RE|S|T|VE))?(?=[\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000]|[A-Z\\xc0-\\xd6\\xd8-\\xde](?:[a-z\\xdf-\\xf6\\xf8-\\xff]|[^\\ud800-\\udfff\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde])|$)|[A-Z\\xc0-\\xd6\\xd8-\\xde]?(?:[a-z\\xdf-\\xf6\\xf8-\\xff]|[^\\ud800-\\udfff\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde])+(?:['’](?:d|ll|m|re|s|t|ve))?|[A-Z\\xc0-\\xd6\\xd8-\\xde]+(?:['’](?:D|LL|M|RE|S|T|VE))?|\\d+",ke].join("|"),"g"),Re=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0\\ufe0e\\ufe0f]"),Ne=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,De="Array Buffer DataView Date Error Float32Array Float64Array Function Int8Array Int16Array Int32Array Map Math Object Promise Reflect RegExp Set String Symbol TypeError Uint8Array Uint8ClampedArray Uint16Array Uint32Array WeakMap _ clearTimeout isFinite parseInt setTimeout".split(" "),Pe={};Pe["[object Float32Array]"]=Pe["[object Float64Array]"]=Pe["[object Int8Array]"]=Pe["[object Int16Array]"]=Pe["[object Int32Array]"]=Pe["[object Uint8Array]"]=Pe["[object Uint8ClampedArray]"]=Pe["[object Uint16Array]"]=Pe["[object Uint32Array]"]=!0,Pe["[object Arguments]"]=Pe["[object Array]"]=Pe["[object ArrayBuffer]"]=Pe["[object Boolean]"]=Pe["[object DataView]"]=Pe["[object Date]"]=Pe["[object Error]"]=Pe["[object Function]"]=Pe["[object Map]"]=Pe["[object Number]"]=Pe["[object Object]"]=Pe["[object RegExp]"]=Pe["[object Set]"]=Pe["[object String]"]=Pe["[object WeakMap]"]=!1;var Oe={};Oe["[object Arguments]"]=Oe["[object Array]"]=Oe["[object ArrayBuffer]"]=Oe["[object DataView]"]=Oe["[object Boolean]"]=Oe["[object Date]"]=Oe["[object Float32Array]"]=Oe["[object Float64Array]"]=Oe["[object Int8Array]"]=Oe["[object Int16Array]"]=Oe["[object Int32Array]"]=Oe["[object Map]"]=Oe["[object Number]"]=Oe["[object Object]"]=Oe["[object RegExp]"]=Oe["[object Set]"]=Oe["[object String]"]=Oe["[object Symbol]"]=Oe["[object Uint8Array]"]=Oe["[object Uint8ClampedArray]"]=Oe["[object Uint16Array]"]=Oe["[object Uint32Array]"]=!0,Oe["[object Error]"]=Oe["[object Function]"]=Oe["[object WeakMap]"]=!1;var je={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss"},Me={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},$e={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},qe={function:!0,object:!0},Fe={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Be=parseFloat,He=parseInt,Ue=qe[typeof exports]&&exports&&!exports.nodeType?exports:z,ze=qe[typeof module]&&module&&!module.nodeType?module:z,We=ze&&ze.exports===Ue?Ue:z,Ge=I(qe[typeof self]&&self),Ve=I(qe[typeof window]&&window),Ke=I(qe[typeof this]&&this),Xe=I(Ue&&ze&&"object"==typeof global&&global)||Ve!==(Ke&&Ke.window)&&Ve||Ge||Ke||Function("return this")(),Ye=U();(Ve||Ge||{})._=Ye,"function"==typeof define&&"object"==typeof define.amd&&define.amd?define("lodash",[],function(){return Ye}):Ue&&ze?(We&&((ze.exports=Ye)._=Ye),Ue._=Ye):Xe._=Ye}.call(this),define("domReady",[],function(){"use strict";function e(e){var t;for(t=0;t<e.length;t+=1)e[t](c)}function t(){var t=u;l&&t.length&&(u=[],e(t))}function n(){l||(l=!0,o&&clearInterval(o),t())}function i(e){return l?e(c):u.push(e),i}var s,r,o,a="undefined"!=typeof window&&window.document,l=!a,c=a?document:null,u=[];if(a){if(document.addEventListener)document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1);else if(window.attachEvent){window.attachEvent("onload",n),r=document.createElement("div");try{s=null===window.frameElement}catch(e){}r.doScroll&&s&&window.external&&(o=setInterval(function(){try{r.doScroll(),n()}catch(e){}},30))}"complete"===document.readyState&&n()}return i.version="2.0.1",i.load=function(e,t,n,s){s.isBuild?n(null):i(n)},i}),define("app/messages",["jquery","lodash","domReady!"],function(e,t){function n(){var t=e(this);t.hasClass("message")||(t=t.closest(".message")),t.remove()}var i,s,r={message:t.template('<div class="message <%=type%>"><div class="content"><i class="material-icons"><%=icon%></i><%=message%><i class="material-icons close">close</i></div></div>'),group:t.template('<div class="messages-<%=group%>">')};return s=e("#messages"),s.on("click","i.close",n).on("remove",n),i=function(t){return this.enabled=!0,this.group=t||"general",this.$messages=s.children(".messages-"+t),this.$messages.length||(this.$messages=e(r.group({group:t})).appendTo(s)),this},i.prototype.add=function(i,s,o,a,l,c){var u=e(r.message({type:a,icon:l||a,group:o||this.group,message:i||"&nbsp;"}));return this.$messages[c?"prepend":"append"](u),app.$window.trigger(a+":"+(o||this.group)),app.$window.trigger(a),s&&setTimeout(t.bind(n,u),1e3*s),u},i.prototype.clear=function(e){var t=this.$messages.children(e?"."+e:"");return!!t.length&&(t.remove(),app.$window.trigger("clear:"+(e?e+":":"")+this.group),!0)},i.prototype.clear_all=function(e){s.find(".message"+(e?"."+e:"")).remove(),app.$window.trigger("clear"+(e?":"+e:""))},i.prototype.success=function(e,t,n){return this.add(e,t,n,"success","check_circle",!0)},i.prototype.warning=function(e,t,n){return this.add(e,t,n,"warning",!1,!0)},i.prototype.error=function(e,t,n){return this.add(e,t,n,"error")},i.prototype.help=function(e,t,n){return this.add(e,t,n,"help",!1,!0)},i.prototype.info=function(e,t,n){return this.add(e,t,n,"info",!1,!0)},i.prototype.comment=function(e,t,n){return this.add(e,t,n,"comment","mode_comment")},i.prototype.player1=function(e,t,n){return this.add(e,t,n,"player1","person")},i.prototype.player2=function(e,t,n){return this.add(e,t,n,"player2","person")},i}),define("app/config",["lodash"],function(e){var t=1024,n={},i={mobile_width:t,presets:{minimal:{show_axis_labels:!1,show_flat_counts:!1,show_current_move:!1,show_unplayed_pieces:!1,show_play_controls:!1},edit_mode:{square_hl:!0,show_roads:!0,show_axis_labels:!0,show_flat_counts:!0,show_current_move:!1,show_unplayed_pieces:!1,show_play_controls:!1},full:{square_hl:!0,show_roads:!0,show_axis_labels:!0,show_flat_counts:!0,show_current_move:!0,show_unplayed_pieces:!0,show_play_controls:!0}},defaults:{edit:{board_opacity:50,show_parse_errors:!0},play:{speed:60,show_annotations:!0},board_rotation:[0,.55,.55],board_max_angle:30,board_rotate_sensitivity:3,board_3d:!1,board_shadows:window.innerWidth>t,animate_board:!0,show_fab:!0},toggle:function(e,t,n){this.set(e,t?!this[t][e]:!this[e],t,n)},set:function(t,n,i,s){var r;i?(r=e.isUndefined(localStorage[i+"."+t]),this[i][t]=n,localStorage[i+"."+t]=JSON.stringify(n)):(r=e.isUndefined(localStorage[t]),this[t]=n,localStorage[t]=JSON.stringify(n)),this.on_change(t,null,i,s,r)},set_css_flag:function(t,n){app.$html&&e.isBoolean(n)&&(n?app.$html.addClass(t.replace(/_/g,"-")):app.$html.removeClass(t.replace(/_/g,"-")));
},update_flags:function(){var e,t;for(e in this[app.mode])t=this[app.mode][e],this.set_css_flag(e,t)},load_preset:function(t,n,i){e.assignIn(this[n],this.presets[t]),i||n!=app.mode||this.update_flags()},load:function(){var t,n,s,r=0;for(e.assignIn(this,this.defaults),i.load_preset("edit_mode","edit",!0),i.load_preset("full","play",!0);t=localStorage.key(r++);){n=localStorage[t],s=t.match(/(\w+)\./),s&&(s=s[1],t=t.substr(s.length+1));try{this.set(t,JSON.parse(n),s)}catch(e){}}},on_change:function(t,i,s,r,o){function a(t){e.has(n,t)?n[t].push(i):n[t]=[i]}var l,c;if(e.isFunction(i))e.isArray(t)?e.each(t,a):a(t);else if(l=s?this[s][t]:this[t],s&&s!=app.mode||this.set_css_flag(t,l),e.has(n,t))for(c=0;c<n[t].length;c++)n[t][c].call(this,l,t,s,r,o);return this}};return i.load(),i}),define("app/hotkeys",["app/messages"],function(e){function n(e,n){return i.info(e+": <strong>"+(n?t.On:t.Off)+"</strong>",1.5)}var i=new e("global");return{global:{Escape:function(e,t,n){app.board.selected_pieces.length?app.board.deselect_all():app.menu.toggle(),e.preventDefault(),e.stopPropagation()},"^Spacebar":function(e,t,n){app.toggle_edit_mode(),e.preventDefault(),e.stopPropagation()},"^s":function(e,t,n){app.$download.click(),e.preventDefault(),e.stopPropagation()},"^o":function(e,t,n){app.$open.click(),e.preventDefault(),e.stopPropagation()},"^d":function(e,t,n){app.game.parse(app.default_ptn,!0),e.preventDefault(),e.stopPropagation()},"^z":function(e){app.undo(e)},"^Z":function(e){app.redo(e)},"^y":function(e){app.redo(e)},"^?":function(e,t,n){app.about(),e.preventDefault(),e.stopPropagation()}},edit:{"^C":function(e,t,n){app.board.trim_to_current_ply(),e.stopPropagation(),e.preventDefault()},"[":function(e,t,n){app.insert_text("]")},'"':function(e,t,n){t.closest(".ply").length||app.insert_text('"')},"'":function(e,t,n){t.closest(".ply").length||app.insert_text("'")},"{":function(e,t,n){t.closest(".body").length&&app.insert_text("}")},Tab:function(e,t,n){app.insert_text("\t",!0),e.stopPropagation(),e.preventDefault()},Enter:function(e,t,n){var i,s=n.parent(".move");app.game.moves.length&&(s.length&&n.is(":last-child")?i=app.game.moves[s.data("index")]||app.game.moves[0]:n.hasClass("body")&&(i=_.last(app.game.moves)),i&&(i.ply2||i.ply1&&i.ply1.turn==2-(1==i.linenum.value))&&app.insert_text(i.linenum.value+1+"."+i.ply1.prefix,!0))}},play:{Spacebar:function(e,t,n){app.board.playpause(e)},ArrowLeft:function(e,t,n){app.board.prev_ply(e)},ArrowRight:function(e,t,n){app.board.next_ply(e)},"+ArrowLeft":function(e,t,n){app.board.prev(e)},"+ArrowRight":function(e,t,n){app.board.next(e)},"^ArrowLeft":function(e,t,n){app.board.first(e)},"^ArrowRight":function(e,t,n){app.board.last(e)},ArrowDown:function(e,t,n){app.board.next_move(e)},ArrowUp:function(e,t,n){app.board.prev_move(e)},3:function(e,i,s){app.config.toggle("board_3d"),n(t.Board_3D,app.config.board_3d)},A:function(e,i,s){app.config.toggle("animate_board"),n(t.Animate_Board,app.config.animate_board)},F:function(e,i,s){app.config.toggle("show_fab"),n(t.Show_FAB,app.config.show_fab)},a:function(e,i,s){app.config.toggle("show_annotations","play"),n(t.Show_Annotations,app.config.play.show_annotations)},s:function(e,i,s){app.config.toggle("board_shadows"),n(t.Board_Shadows,app.config.board_shadows)},c:function(e,i,s){app.config.toggle("show_play_controls","play"),n(t.Play_Controls,app.config.play.show_play_controls)},h:function(e,i,s){app.config.toggle("square_hl","play"),n(t.Square_Highlights,app.config.play.square_hl)},r:function(e,i,s){app.config.toggle("show_roads","play"),n(t.Road_Connections,app.config.play.show_roads)},f:function(e,i,s){app.config.toggle("show_flat_counts","play"),n(t.Flat_Counts,app.config.play.show_flat_counts)},m:function(e,i,s){app.config.toggle("show_current_move","play"),n(t.Current_Move,app.config.play.show_current_move)},u:function(e,i,s){app.config.toggle("show_unplayed_pieces","play"),n(t.Unplayed_Pieces,app.config.play.show_unplayed_pieces)},x:function(e,i,s){app.config.toggle("show_axis_labels","play"),n(t.Axis_Labels,app.config.play.show_axis_labels)}}}}),define("app/menu",["app/config","i18n!nls/main","lodash","jquery","domReady!"],function(e,t,n,i){var s,r=(i("#app"),i("#menu")),o={};return o.open=function(){r.hasClass("is-visible")||this.toggle()},o.close=function(){r.hasClass("is-visible")&&this.toggle()},o.toggle=function(){s.click()},o.content=[{id:"global",items:[{label:t.About_App,icon:"help",onclick:"app.about()"},{label:t.Permalink,icon:"link",id:"permalink",href:"#"+app.ptn_compressed,target:"_blank",rel:"noopener"},{label:t.Save,icon:"file_download",id:"download",href:"#"},{label:t.Open,icon:"folder_open",id:"open",type:"file",accept:".ptn,.txt"},{label:t.New_Game,icon:"insert_drive_file",onclick:"app.game.parse(app.default_ptn, true)"},{label:t.Load_Sample_Game,icon:"apps",onclick:"app.game.parse(app.sample_ptn, true)"},{label:t.Board_3D,type:"checkbox",checked:e.board_3d,"data-id":"board_3d"},{label:t.Board_Shadows,type:"checkbox",checked:e.board_shadows,"data-id":"board_shadows"},{label:t.Animate_Board,type:"checkbox",checked:e.animate_board,"data-id":"animate_board"},{label:t.Show_FAB,type:"checkbox",checked:e.show_fab,"data-id":"show_fab"}]},{id:"edit",label:t.Edit_Mode,icon:"mode_edit",items:[{label:t.Undo,icon:"undo",onclick:"app.undo()",class:"keep-open"},{label:t.Redo,icon:"redo",onclick:"app.redo()",class:"keep-open"},{label:t.Trim_to_current_ply,icon:"content_cut",onclick:"app.board.trim_to_current_ply()"},{label:t.Revert_Game,icon:"restore",onclick:"app.revert_game()"},{label:t.Board_Opacity,type:"slider",min:0,max:100,step:5,value:e.board_opacity,title:e.board_opacity,"data-realtime":!0,"data-id":"board_opacity"},{label:t.Show_Parse_Errors,type:"checkbox",checked:e.edit.show_parse_errors,"data-id":"show_parse_errors","data-mode":"edit"},{label:t.Square_Highlights,type:"checkbox",checked:e.edit.square_hl,"data-id":"square_hl","data-mode":"edit"},{label:t.Road_Connections,type:"checkbox",checked:e.edit.show_roads,"data-id":"show_roads","data-mode":"edit"},{label:t.Axis_Labels,type:"checkbox",checked:e.edit.show_axis_labels,"data-id":"show_axis_labels","data-mode":"edit"},{label:t.Flat_Counts,type:"checkbox",checked:e.edit.show_flat_counts,"data-id":"show_flat_counts","data-mode":"edit"},{label:t.Current_Move,type:"checkbox",checked:e.edit.show_current_move,"data-id":"show_current_move","data-mode":"edit"},{label:t.Unplayed_Pieces,type:"checkbox",checked:e.edit.show_unplayed_pieces,"data-id":"show_unplayed_pieces","data-mode":"edit"},{label:t.Play_Controls,type:"checkbox",checked:e.edit.show_play_controls,"data-id":"show_play_controls","data-mode":"edit"}]},{id:"play",label:t.Play_Mode,icon:"play_arrow",items:[{label:t.Play_Speed,type:"slider",min:20,max:200,step:10,value:e.play.speed,title:e.play.speed,"data-id":"speed","data-mode":"play"},{label:t.Show_Annotations,type:"checkbox",checked:e.play.show_annotations,"data-id":"show_annotations","data-mode":"play"},{label:t.Axis_Labels,type:"checkbox",checked:e.play.show_axis_labels,"data-id":"show_axis_labels","data-mode":"play"},{label:t.Play_Controls,type:"checkbox",checked:e.play.show_play_controls,"data-id":"show_play_controls","data-mode":"play"},{label:t.Flat_Counts,type:"checkbox",checked:e.play.show_flat_counts,"data-id":"show_flat_counts","data-mode":"play"},{label:t.Current_Move,type:"checkbox",checked:e.play.show_current_move,"data-id":"show_current_move","data-mode":"play"},{label:t.Road_Connections,type:"checkbox",checked:e.play.show_roads,"data-id":"show_roads","data-mode":"play"},{label:t.Square_Highlights,type:"checkbox",checked:e.play.square_hl,"data-id":"square_hl","data-mode":"play"},{label:t.Unplayed_Pieces,type:"checkbox",checked:e.play.show_unplayed_pieces,"data-id":"show_unplayed_pieces","data-mode":"play"}]}],o.tpl={item:function(e){return n.has(e,"items")?n.has(e,"label")?app.menu.tpl.accordion(e):app.menu.tpl.section(e):n.has(e,"href")||n.has(e,"onclick")?app.menu.tpl.anchor(e):n.has(e,"type")?app.menu.tpl[e.type](e):void 0},menu:function(e){return'<span class="mdl-layout-title">'+t.app_title+"</span>"+n.map(e.content,app.menu.tpl.item).join("")},section:n.template('<nav id="menu-<%=obj.id%>" class="mdl-list mdl-navigation"><%= _.map(items, app.menu.tpl.item).join("") %></nav>'),accordion:n.template('<div id="menu-<%=obj.id%>" class="mdl-accordion mdl-list mdl-navigation"><a class="mdl-navigation__link mdl-accordion__button keep-open"><span class="label"><i class="material-icons"><%=obj.icon%></i><%=obj.label%></span><i class="material-icons mdl-accordion__icon">expand_more</i></a><div class="mdl-accordion__content-wrapper"><div class="mdl-accordion__content mdl-list"><%= _.map(obj.items, app.menu.tpl.item).join("") %></div></div></div>'),anchor:n.template('<a class="mdl-navigation__link"<% _.each(_.omit(obj, ["label", "icon"]), function(value, key) { %> <%=key%>="<%-value%>"<% }) %>><i class="material-icons"><%=obj.icon%></i><%=obj.label%></a>'),checkbox:n.template('<div class="mdl-navigation__link item-checkbox"><label class="mdl-checkbox mdl-js-checkbox"><input type="checkbox" class="mdl-checkbox__input"<% _.each(_.omit(obj, ["label", "type"]), function(value, key) { %><% if (_.isBoolean(value) && !/^data-/.test(key)) { %> <%= value ? key : "" %><% } else { %> <%=key%>="<%-value%>"<% } %><% }) %>><span class="mdl-checkbox__label"><%=obj.label%></span></label></div>'),slider:n.template('<div class="mdl-navigation__link item-slider"><span class="mdl-slider__label"><%=obj.label%></span><input class="mdl-slider mdl-js-slider" type="range"<% _.each(_.omit(obj, ["label", "type"]), function(value, key) { %><% if (_.isBoolean(value) && !/^data-/.test(key)) { %> <%= value ? key : "" %><% } else { %> <%=key%>="<%-value%>"<% } %><% }) %>></div>'),file:n.template('<div class="mdl-navigation__link item-file"><i class="material-icons"><%=obj.icon%></i><%=obj.label%><input class="invisible-file-input"<% _.each(_.omit(obj, ["label", "icon"]), function(value, key) { %><% if (_.isBoolean(value) && !/^data-/.test(key)) { %> <%= value ? key : "" %><% } else { %> <%=key%>="<%-value%>"<% } %><% }) %>></div>')},o.render=function(){s=i(".mdl-layout__drawer-button").addClass("mdl-button mdl-js-button mdl-button--icon"),r.html(this.tpl.menu(this)),r.find(".mdl-slider, .mdl-checkbox").each(function(){componentHandler.upgradeElement(this)}),r.find(".mdl-accordion__content").each(function(){var e=i(this);e.css("margin-top",-e.outerHeight())}),r.on("click",".mdl-accordion__button",function(){i(this).parent(".mdl-accordion").toggleClass("mdl-accordion--opened")}),r.on("click","#menu-edit .mdl-accordion__button, > #menu-play > .mdl-accordion__button",app.toggle_edit_mode),r.on("click","a:not(.keep-open)",app.menu.toggle),r.on("click",".item-checkbox",function(e){this==e.target&&i(this).find("input").click()}),r.on("change","input[type=checkbox][data-id]",function(){var t=i(this),n=t.data("id"),s=t.data("mode");e.toggle(n,s,"menu")}).on("change input","input[type=range][data-id]",function(t){var n=i(this),s=n.data("id"),r=n.data("mode");("change"==t.type||n.data("realtime"))&&e.set(s,1*this.value,r,"menu")}),r.find(".mdl-checkbox").each(function(){var t=this,n=i(this).find("input"),s=n.data("id"),r=n.data("mode");e.on_change(s,function(e,n,i,s){"menu"!=s&&i==r&&(e?t.MaterialCheckbox.check():t.MaterialCheckbox.uncheck())},r)}),r.find(".mdl-slider").each(function(){var t=this,n=i(this),s=n.data("id"),r=n.data("mode");e.on_change(s,function(e,i,s,r){"menu"!=r&&t.MaterialSlider.change(),n.attr("title",e)},r)})},o}),define("app/grammar",["lodash"],function(e){var t={player1:/^(.*)$/,player2:/^(.*)$/,date:/^(\d\d\d\d)\.(\d\d?)\.(\d\d?)$/,size:/^([3-9])$/,result:/^(R-0|0-R|F-0|0-F|1-0|0-1|1\/2-1\/2|)$/},n={event:/^.*$/,site:/^.*$/,round:/^\d+$/,rating1:/^\d+$/,rating2:/^\d+$/,tps:/^[1-9xSC\/,]+\s+[1,2]\s+\d+$/,points:/^\d+$/,time:/^\d\d(:\d\d){1,2}$/,clock:/^\d+min(\+\d+sec)$|^((((\d\s+)?\d\d?:)?\d\d?:)?\d\d?\s*)?(\+(((\d\s+)?\d\d?:)?\d\d?:)?\d\d?)?$/},i={space:"(?:x[1-9]?)",stack:"(?:[12]+[SC]?)",stack_grouped:"([12]*)([12][SC]?)",separator:"[,\\/]",col:"(?:<space>|<stack>)",cols:"(<col>?<separator>?)",col_grouped:"(<space>?)(<stack>?)(<separator>?)",tps_grouped:"((?:<col>|<separator>)*)(?:(\\s+)([12]))?(?:(\\s+)([1-9]\\d*))?([^]*)",tag:"(?:[^\\[]*\\[.*\\]?)",tag_grouped:"([^\\[]*\\[\\s*?)(\\S+)(\\s*)(['\"]?)([^\\4]*)(\\4)([^]*\\]?)",stone:"[FSC]?",square:"[a-i][1-9]",count:"[1-9]?",direction:"(?:[-+<>])",drops:"[1-9]*",place:"(?:<stone><square>)",place_grouped:"(<stone>)(<square>)",slide:"(?:<count><square><direction><drops><stone>)",slide_grouped:"(<count>)(<square>)(<direction>)(<drops>)(<stone>)",comment:"(?:\\s*?\\{[^}]*\\}?)*",comment_text:"\\s*\\{\\s*[^}]*[^}\\s]?\\s*\\}?",comment_grouped:"(\\s*\\{\\s*)([^}]*[^}\\s])?(\\s*\\}?)",result:"(?:(?:\\s|--)*(?:R-0|0-R|F-0|0-F|1-0|0-1|1\\/2-1\\/2))",result_grouped:"((?:\\s|--)*)(R-0|0-R|F-0|0-F|1-0|0-1|1\\/2-1\\/2)",evaluation:"[?!'\"]*",nop:"(?:\\s*load)",nop_grouped:"(\\s*)(\\S+)",ply:"(?:\\s*(?:<slide>|<place>)<evaluation>)",ply_grouped:"(\\s*)(?:(<slide>)|(<place>))(<evaluation>)",linenum:"(?:^|\\s)+\\d+\\.",linenum_grouped:"(^|\\s+)(\\d+)\\.",move:"(?:<linenum><comment>(?:<nop>|<ply>)?<comment><ply>?<comment><result>?<comment>[ \\t]*[^]*)",move_grouped:"^(<linenum>)(<comment>)(<nop>|<ply>?)(<comment>)(<ply>?)(<comment>)(<result>?)(<comment>)(\\s*)([^]*)",move_only:"^<move>$",ptn_grouped:"^(<tag>+)(<comment>)((?:.|\\s)*?)((?:\\s|--)*)$"},s=new RegExp("<"+e.keys(i).join(">|<")+">","g");return e.each(i,function(t,n){i[n]=t.replace(s,function(t){return i[e.trim(t,"<>")]})}),e.each(i,function(e,t){i[t]=new RegExp(e,/_grouped|_only/.test(t)?"":"g")}),{tags:e.merge({},t,n),required_tags:e.keys(t),other_tags:e.keys(n),grammar:i}}),define("app/game/result",["app/grammar","i18n!nls/main","lodash"],function(e,t,n){var i={0:"loss",1:"win",F:"flat win",R:"road win","1/2":"draw"},s=function(n,s){var r=n.match(e.grammar.result_grouped);return s.config.result=this,n.length?(this.prefix=r[1],this.text=r[2],r=this.text.split("-"),this.player1=r[0],this.player2=r[1],"0"==this.player2?(this.victor=1,this.type=this.player1,this.message=t.result[this.player1]({player:s.config.player1})):"0"==this.player1?(this.victor=2,this.type=this.player2,this.message=t.result[this.player2]({player:s.config.player2})):(this.victor=2,this.type="D",this.message=t.result.tie),this.player1_label=i[this.player1],this.player2_label=i[this.player2],this):(this.print=function(){return""},!1)};return s.prototype.print_value=n.template('<span class="result"><span class="player1 <%=this.player1_label%>"><%=this.player1%></span>-<span class="player2 <%=this.player2_label%>"><%=this.player2%></span></span>'),s.prototype.print=function(){return"<span>"+this.prefix+"</span>"+this.print_value()},s.prototype.print_text=function(){return this.prefix+this.text},s}),define("app/game/tps",["app/grammar","i18n!nls/main","lodash"],function(e,t,n){var i=function(s,r,o){var a=this,l=s.match(e.grammar.tps_grouped);return this.is_valid=!0,this.invalid_dimensions=!1,o&&(this.tag=o,this.char_index=o.char_index+o.print_text().length-s.length-o.q2.length-o.suffix.length),l[1]?(this.squares=i.Square.parse(this,l[1],1*r.config.size),this.space1=l[2],this.player=l[3],this.space2=l[4],this.move=l[5],this.suffix=l[6],this.invalid_dimensions!==!1?r.m.error(t.error.invalid_TPS_dimensions).click(function(){app.set_caret(a.invalid_dimensions)}):this.suffix&&/\S/.test(this.suffix)?r.m.error(t.error.invalid_tag_value({tag:t.TPS,value:this.suffix})).click(function(){app.set_caret([a.char_index+s.length-a.suffix.length,a.char_index+s.length])}):this.is_valid?this.player?this.move||r.m.error(t.error.tps_missing_move).click(function(){app.set_caret(a.char_index+s.length)}):r.m.error(t.error.tps_missing_player).click(function(){app.set_caret(a.char_index+s.length)}):r.m.error(t.error.invalid_tag_value({tag:t.TPS,value:n.find(this.squares,{error:!0}).text})).click(function(){app.set_caret([a.char_index,a.char_index+s.length])}),this.player*=1,this.move*=1,this):(r.m.error(t.error.invalid_tag_value({tag:t.TPS,value:s})).click(function(){app.set_caret([a.char_index,a.char_index+s.length])}),this.is_valid=!1,r.is_valid=!1,this.text=s,this.print=r.print_invalid,!1)};return i.prototype.print=n.template('<%=_.invokeMap(this.squares, "print").join("")%><%=this.space1%><% if (this.player) { %><span class="player<%=this.player%>"><i class="material-icons player<%=this.player%>"></i><%=this.player%></span><% } %><%=this.space2%><% if (this.move) { %><span class="move"><i class="material-icons move"></i><%=this.move%></span><% } %><span class="invalid"><%=this.suffix.replace(/(\\S[a-zA-Z]*)/,\'<span class="first-letter">$1</span>\')%></span>'),i.Square=function(t,n,i,s){var r,o=t.match(e.grammar.col_grouped);return this.char_index=s,this.coord=app.square_coord([i,n]),o[2]?(this.is_space=!1,this.print=this.print_stack,this.text=o[2],r=this.text.match(e.grammar.stack_grouped),this.pieces=r[1].split("").concat(r[2])):(this.is_space=!0,this.print=this.print_space,this.text=o[1]||"",this.count=1*this.text[1]||1),this.separator=o[3],this},i.Square.parse=function(t,s,r){var o,a=r-1,l=0,c=t.char_index,o=n.map(n.compact(s.match(e.grammar.cols)),function(e,n){return e=new i.Square(e,a,l,c),c+=e.text.length+e.separator.length,(l>=r||a<0)&&(e.error=!0,e.separator_error=","==e.separator,t.invalid_dimensions=c),e.is_space?(l+=e.count,l>r&&(e.error=!0,t.invalid_dimensions=c)):l++,"/"==e.separator?((l<r||0==a)&&(e.separator_error=!0,t.invalid_dimensions=c),a--,l=0):","==e.separator&&l==r&&(e.separator_error=!0,t.invalid_dimensions=c),e});return(0!=a||l<r)&&(t.invalid_dimensions=c),o||[]},i.Square.prototype.print_space=n.template('<span class="square space<%=this.error ? " illegal":""%>" data-coord="<%=this.coord%>" data-count="<%=this.count%>"><%=this.text%></span><span class="separator<%=this.separator_error ? " illegal":""%>"><%=this.separator%></span>'),i.Square.prototype.print_stack=n.template('<span class="square stack<%=this.error ? " illegal":""%>" data-coord="<%=this.coord%>"><% _.map(this.pieces, function(piece, i) { %><span class="piece player<%=piece[0]%>"><%=piece[0]%><% if (piece.length > 1) { %><span class="stone"><%=piece[1]%></span><% } %></span><% }).join("") %></span><span class="separator<%=this.separator_error ? " illegal":""%>"><%=this.separator%></span>'),i}),define("app/game/tag",["app/game/result","app/game/tps","app/grammar","i18n!nls/main","lodash"],function(e,t,n,i,s){var r=function(r,o,a){var l=this,c=r.match(n.grammar.tag_grouped);return this.game=o,this.index=s.isNumber(a)?a:o.tags.length,o.tags[this.index]=this,this.char_index=o.char_index,o.char_index+=r.length,this.text=r,c?(this.prefix=c[1],this.name=c[2],this.separator=c[3],this.q1=c[4],this.value=c[5],this.q2=c[6],this.suffix=c[7],this.key=this.name.toLowerCase(),this.icon=this.key,s.has(n.tags,this.key)?(n.required_tags.indexOf(this.key)>=0&&(this.is_required=!0),n.tags[this.key].test(this.value)||"tps"==this.key?("result"==this.key?(this.value&&new e(this.value,o),this.print_value=function(){return o.config.result?o.config.result.print_value():""}):"tps"==this.key?(o.config.tps=new t(this.value,o,this),this.print_value=s.bind(o.config.tps.print,o.config.tps)):o.config[this.key]=this.value,this):(o.m[this.is_required?"error":"warning"](i.error.invalid_tag_value({tag:this.name,value:this.value})).click(function(){app.set_caret([l.char_index+r.length-l.value.length-l.q2.length-l.suffix.length,l.char_index+r.length-l.q2.length-l.suffix.length])}),this.is_required?(o.is_valid=!1,!1):this)):(this.icon="unknown",o.m.warning(i.error.unrecognized_tag({tag:c[2]})).click(function(){app.set_caret([l.char_index+l.prefix.length,l.char_index+l.prefix.length+l.name.length])}),this)):(o.is_valid=!1,this.print=o.print_invalid,o.m.error(i.error.invalid_tag({tag:s.truncate(r,{length:5})})).click(function(){app.select_token_text(l)}),this)};return r.prototype.print=s.template('<span class="tag"><%=this.prefix%><i class="material-icons <%=this.icon%>"></i><span class="name"><%=this.name%></span><%=this.separator%><span class="opening quote"><%=this.q1%></span><span class="value <%=this.q1 ? this.key : ""%>"><%=this.print_value()%></span><span class="closing quote"><%=this.q2%></span><%=this.suffix%></span>'),r.prototype.print_value=function(){return""+this.value},r.prototype.print_text=function(e){return"result"==this.key&&(this.value=this.game.config.result?s.trim(this.game.config.result.print_text()):"",this.text=this.prefix+this.name+this.separator+this.q1+this.value+this.q2+this.suffix),e&&(this.char_index=this.game.char_index,this.game.char_index+=this.text.length),this.text},r}),define("app/game/comment",["app/grammar","i18n!nls/main","lodash"],function(e,t,n){var i=function(t,n){var i=t.match(e.grammar.comment_grouped);return this.game=n,this.char_index=n.char_index,n.char_index+=t.length,i?(this.prefix=i[1],this.text=i[2],this.suffix=i[3],this):(this.prefix=t,this.text="",this.suffix="",this)};return i.prototype.print=n.template('<span class="comment"><%=this.prefix%><span class="text"><%=this.text%></span><%=this.suffix%></span>'),i.prototype.print_text=function(e){var t=this.prefix+this.text+this.suffix;return e&&(this.char_index=this.game.char_index,this.game.char_index+=t.length),t},i.parse=function(t,s){var r=n.map(t.match(e.grammar.comment_text),function(e){return new i(e,s)});return r.length?r:null},i}),define("app/game/linenum",["app/grammar","i18n!nls/main","lodash"],function(e,t,n){var i=function(t,n){var i=t.match(e.grammar.linenum_grouped);return this.game=n,this.prefix=i[1],this.value=n.get_linenum(),this.text=this.value+".",this.char_index=n.char_index,n.char_index+=this.prefix.length+this.text.length,t.length!=this.prefix.length+this.text.length&&app.range.last_bounds&&app.range.last_bounds[1]>=n.char_index-1&&(app.range.last_bounds[0]+=this.text.length-t.length,app.range.last_bounds[1]=app.range.last_bounds[0],n.caret_moved=!0),this};return i.prototype.print=n.template('<span class="space"><%=this.prefix%></span><span class="linenum"><%=this.text%></span>'),i.prototype.print_text=function(e){var t=this.prefix+this.text;return e&&(this.char_index=this.game.char_index,this.game.char_index+=t.length),t},i}),define("app/game/ply",["app/grammar","i18n!nls/main","lodash"],function(e,t,n){function i(e){var t=[e.square],n=e.drops.length,i=app.square_coord(e.square);switch(e.direction){case"+":for(;n--;)i[1]++,t.push(app.square_coord(i));break;case"-":for(;n--;)i[1]--,t.push(app.square_coord(i));break;case"<":for(;n--;)i[0]--,t.push(app.square_coord(i));break;case">":for(;n--;)i[0]++,t.push(app.square_coord(i))}return t}var s=function(s,r,o,a){var l,c=this,u=s.match(e.grammar.ply_grouped);return this.game=o,this.is_valid=!0,this.index=o.plys.length,o.plys[o.plys.length]=this,this.char_index=o.char_index,o.char_index+=s.length,this.move=a,this.is_nop=!1,this.is_illegal=!1,u?(this.prefix=u[1],u[2]?(l=u[2].match(e.grammar.slide_grouped),this.print=this.print_slide,this.is_slide=!0,this.player=r,this.text=u[2],this.count_text=l[1]||"",this.count=1*this.count_text||1,this.col=l[2][0],this.row=1*l[2][1],this.square=this.col+this.row,this.direction=l[3],this.drops_text=l[4]||"",this.drops=l[4]?l[4].split("").map(n.toInteger):[this.count],this.squares=i(this),this.flattens={},this.stone_text=l[5]||"",this.evaluation=u[4]||"",n.sum(this.drops)!=this.count&&(o.m.error(t.error.invalid_ply({ply:this.text})).click(function(){app.select_token_text(c)}),this.is_illegal=!0)):u[3]&&(l=u[3].match(e.grammar.place_grouped),this.print=this.print_place,this.is_slide=!1,this.player=r,this.text=u[3],this.stone_text=l[1]||"",this.stone=this.stone_text||"F",this.true_stone="C"==this.stone?this.stone:"F",this.col=l[2][0],this.row=1*l[2][1],this.square=this.col+this.row,this.squares=[this.square],this.evaluation=u[4]||""),this.player?((this.row>o.config.size||this.col.charCodeAt(0)-"`".charCodeAt(0)>o.config.size)&&(o.is_valid=!1,o.m.error(t.error.invalid_square({square:this.col+this.row})).click(function(){app.select_token_text(c)}),this.is_illegal=!0),this):(o.is_valid=!1,this.is_illegal=!0,this.text=s,this.print=o.print_invalid,o.m.error(t.error.invalid_movetext({text:n.trim(s)[0]})).click(function(){app.select_token_text(c)}),this)):(this.is_nop=!0,this.print=this.print_nop,this.player=r,u=s.match(e.grammar.nop_grouped),this.prefix=u[1],this.text=u[2],o.config.tps&&1!=o.config.tps.player||(o.m.error(t.error.invalid_ply({ply:this.text})).click(function(){app.select_token_text(c)}),this.is_illegal=!0,this.text=this.prefix+this.text,this.print=o.print_invalid),this)};return s.prototype.is_current=function(){return app.board&&app.board.ply_index==this.index},s.prototype.is_first=function(){return 0==this.index},s.prototype.is_last=function(){return this.index==this.game.plys.length-1},s.prototype.print_place=n.template('<span class="space"><%=this.prefix%></span><span class="ply player<%=this.player%><%=this.is_current() ? " active" : ""%>" <%=this.is_illegal ? " illegal" : ""%>" data-index="<%=this.index%>"><% if (this.stone_text) { %><span class="stone"><%=this.stone_text%></span><% } %><span class="column"><%=this.col%></span><span class="row"><%=this.row%></span><% if (this.evaluation) { %><span class="evaluation"><%=this.evaluation%></span><% } %></span>'),s.prototype.print_slide=n.template('<span class="space"><%=this.prefix%></span><span class="ply player<%=this.player%><%=this.is_illegal ? " illegal" : ""%>" data-index="<%=this.index%>"><span class="count_text"><%=this.count_text%></span><span class="column"><%=this.col%></span><span class="row"><%=this.row%></span><span class="direction"><%=this.direction%></span><% if (this.drops_text) { %><span class="drops"><%=this.drops_text%></span><% } %><% if (this.stone_text) { %><span class="stone"><%=this.stone_text%></span><% } %><% if (this.evaluation) { %><span class="evaluation"><%=this.evaluation%></span><% } %></span>'),s.prototype.print_nop=n.template('<span class="space"><%=this.prefix%></span><span class="ply nop" data-index="<%=this.index%>"><%=this.text%></span>'),s.prototype.print_text=function(e){var t=this.prefix+this.text+this.evaluation;return e&&(this.char_index=this.game.char_index,this.game.char_index+=t.length),t},s}),define("app/game/move",["app/game/comment","app/game/linenum","app/game/ply","app/game/result","app/grammar","i18n!nls/main","lodash"],function(e,t,n,i,s,r,o){var a=function(l,c){var u=l.match(s.grammar.move_grouped),d=1,p=2,h=1;return this.game=c,this.char_index=c.char_index,this.index=c.moves.length,c.moves[this.index]=this,u?(this.linenum=new t(u[1],c,o.compact(u.slice(2)).length),c.config.tps&&this.linenum.value==c.config.tps.move?1==c.config.tps.player?(d=1==this.linenum.value?2:1,p=d-1||2):(d=1==this.linenum.value?1:2,p=0,h=2):1==this.linenum.value&&(d=2,p=1),this.first_player=d,this.second_player=p,this.first_turn=h,this.comments1=e.parse(u[2],c),u[3]?(this.ply1=new n(u[3],d,c,this),this.ply1.turn=h,this.ply1.is_nop&&(p=d)):this.ply1=null,this.comments2=e.parse(u[4],c),this.comments1?this.comments2?this.ply1.comments=o.map(this.comments1,"text").concat(o.map(this.comments2,"text")):this.ply1.comments=o.map(this.comments1,"text"):this.comments2&&(this.ply1.comments=o.map(this.comments2,"text")),u[5]?(this.ply2=new n(u[5],p,c,this),this.comments3=e.parse(u[6],c),this.ply2.comments=o.map(this.comments3,"text"),this.ply2.turn=2):this.ply2=null,u[7]?(this.result=new i(u[7],c),this.comments4=e.parse(u[8],c),this.result.comments=o.map(this.comments4,"text"),this.ply2?this.ply2.result=this.result:this.ply1&&(this.ply1.result=this.result)):this.result=null,this.suffix=u[9],c.char_index+=this.suffix.length,u[10]&&(s.grammar.move_only.test(u[10])?new a(u[10],c):(this.text=u[10],this.is_invalid=!0,c.is_valid=!1,c.m.error(r.error.invalid_movetext({text:o.trim(this.text)[0]})).click(function(){app.set_caret(c.char_index)}))),this):(this.text=l,this.is_invalid=!0,c.is_valid=!1,c.m.error(r.error.invalid_movetext({text:o.trim(this.text)[0]})).click(function(){app.set_caret(c.char_index)}),this)};return a.prototype.insert_ply=function(e,t,i,s){var e,r;return 1==t||2==this.first_turn?(e=this.ply1?this.ply1.prefix+e:(r=o.last(this.game.moves))&&r.ply1?r.ply1.prefix+e:" "+e,e=this.ply1=new n(e,this.first_player,this.game,this),this.ply1.turn=this.first_turn):(e=this.ply2?this.ply2.prefix+e:(r=o.last(this.game.moves))&&r.ply2?r.ply2.prefix+e:" "+e,e=this.ply2=new n(e,this.second_player,this.game,this),this.ply2.turn=2),o.isNumber(s)&&(e.flattens=s),e},a.prototype.insert_result=function(e,t,n){var s,r=this["ply"+(2==this.first_turn?1:t)],a=" ";if(r)return s=r.result,s&&(a=s.prefix),r.result=new i(a+e,this.game),this.result=r.result,r.result.comments=o.map(this.comments4,"text"),n||this.game.update_text(!0),r.result},a.prototype.print=function(){var e='<span class="move" data-index="'+this.index+'">';return this.linenum&&(e+=this.linenum.print()),this.comments1&&(e+=o.invokeMap(this.comments1,"print").join("")),this.ply1&&(e+=this.ply1.print()),this.comments2&&(e+=o.invokeMap(this.comments2,"print").join("")),this.ply2&&(e+=this.ply2.print()),this.comments3&&(e+=o.invokeMap(this.comments3,"print").join("")),this.result&&(e+=this.result.print()),this.comments4&&(e+=o.invokeMap(this.comments4,"print").join("")),this.suffix&&(e+='<span class="space">'+this.suffix+"</span>"),this.text&&(e+=this.game.print_invalid.call(this)),e+="</span>"},a.prototype.print_text=function(e){var t="";return e&&(this.char_index=this.game.char_index),this.linenum&&(t+=this.linenum.print_text(e)),this.comments1&&(t+=o.invokeMap(this.comments1,"print_text",e).join("")),this.ply1&&(t+=this.ply1.print_text(e)),this.comments2&&(t+=o.invokeMap(this.comments2,"print_text",e).join("")),this.ply2&&(t+=this.ply2.print_text(e)),this.comments3&&(t+=o.invokeMap(this.comments3,"print_text",e).join("")),this.result&&(t+=this.result.print_text(e)),this.comments4&&(t+=o.invokeMap(this.comments4,"print_text",e).join("")),this.suffix&&(t+=this.suffix,e&&(this.game.char_index+=this.suffix.length)),this.text&&(t+=this.text,e&&(this.game.char_index+=this.text.length)),t},a});var LZString=function(){function e(e,t){if(!s[e]){s[e]={};for(var n=0;n<e.length;n++)s[e][e.charAt(n)]=n}return s[e][t]}var t=String.fromCharCode,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",s={},r={compressToBase64:function(e){if(null==e)return"";var t=r._compress(e,6,function(e){return n.charAt(e)});switch(t.length%4){default:case 0:return t;case 1:return t+"===";case 2:return t+"==";case 3:return t+"="}},decompressFromBase64:function(t){return null==t?"":""==t?null:r._decompress(t.length,32,function(i){return e(n,t.charAt(i))})},compressToUTF16:function(e){return null==e?"":r._compress(e,15,function(e){return t(e+32)})+" "},decompressFromUTF16:function(e){return null==e?"":""==e?null:r._decompress(e.length,16384,function(t){return e.charCodeAt(t)-32})},compressToUint8Array:function(e){for(var t=r.compress(e),n=new Uint8Array(2*t.length),i=0,s=t.length;s>i;i++){var o=t.charCodeAt(i);n[2*i]=o>>>8,n[2*i+1]=o%256}return n},decompressFromUint8Array:function(e){if(null===e||void 0===e)return r.decompress(e);for(var n=new Array(e.length/2),i=0,s=n.length;s>i;i++)n[i]=256*e[2*i]+e[2*i+1];var o=[];return n.forEach(function(e){o.push(t(e))}),r.decompress(o.join(""))},compressToEncodedURIComponent:function(e){return null==e?"":r._compress(e,6,function(e){return i.charAt(e)})},decompressFromEncodedURIComponent:function(t){return null==t?"":""==t?null:(t=t.replace(/ /g,"+"),r._decompress(t.length,32,function(n){return e(i,t.charAt(n))}))},compress:function(e){return r._compress(e,16,function(e){return t(e)})},_compress:function(e,t,n){if(null==e)return"";var i,s,r,o={},a={},l="",c="",u="",d=2,p=3,h=2,f=[],_=0,m=0;for(r=0;r<e.length;r+=1)if(l=e.charAt(r),Object.prototype.hasOwnProperty.call(o,l)||(o[l]=p++,
a[l]=!0),c=u+l,Object.prototype.hasOwnProperty.call(o,c))u=c;else{if(Object.prototype.hasOwnProperty.call(a,u)){if(u.charCodeAt(0)<256){for(i=0;h>i;i++)_<<=1,m==t-1?(m=0,f.push(n(_)),_=0):m++;for(s=u.charCodeAt(0),i=0;8>i;i++)_=_<<1|1&s,m==t-1?(m=0,f.push(n(_)),_=0):m++,s>>=1}else{for(s=1,i=0;h>i;i++)_=_<<1|s,m==t-1?(m=0,f.push(n(_)),_=0):m++,s=0;for(s=u.charCodeAt(0),i=0;16>i;i++)_=_<<1|1&s,m==t-1?(m=0,f.push(n(_)),_=0):m++,s>>=1}d--,0==d&&(d=Math.pow(2,h),h++),delete a[u]}else for(s=o[u],i=0;h>i;i++)_=_<<1|1&s,m==t-1?(m=0,f.push(n(_)),_=0):m++,s>>=1;d--,0==d&&(d=Math.pow(2,h),h++),o[c]=p++,u=String(l)}if(""!==u){if(Object.prototype.hasOwnProperty.call(a,u)){if(u.charCodeAt(0)<256){for(i=0;h>i;i++)_<<=1,m==t-1?(m=0,f.push(n(_)),_=0):m++;for(s=u.charCodeAt(0),i=0;8>i;i++)_=_<<1|1&s,m==t-1?(m=0,f.push(n(_)),_=0):m++,s>>=1}else{for(s=1,i=0;h>i;i++)_=_<<1|s,m==t-1?(m=0,f.push(n(_)),_=0):m++,s=0;for(s=u.charCodeAt(0),i=0;16>i;i++)_=_<<1|1&s,m==t-1?(m=0,f.push(n(_)),_=0):m++,s>>=1}d--,0==d&&(d=Math.pow(2,h),h++),delete a[u]}else for(s=o[u],i=0;h>i;i++)_=_<<1|1&s,m==t-1?(m=0,f.push(n(_)),_=0):m++,s>>=1;d--,0==d&&(d=Math.pow(2,h),h++)}for(s=2,i=0;h>i;i++)_=_<<1|1&s,m==t-1?(m=0,f.push(n(_)),_=0):m++,s>>=1;for(;;){if(_<<=1,m==t-1){f.push(n(_));break}m++}return f.join("")},decompress:function(e){return null==e?"":""==e?null:r._decompress(e.length,32768,function(t){return e.charCodeAt(t)})},_decompress:function(e,n,i){var s,r,o,a,l,c,u,d,p=[],h=4,f=4,_=3,m="",g=[],y={val:i(0),position:n,index:1};for(r=0;3>r;r+=1)p[r]=r;for(a=0,c=Math.pow(2,2),u=1;u!=c;)l=y.val&y.position,y.position>>=1,0==y.position&&(y.position=n,y.val=i(y.index++)),a|=(l>0?1:0)*u,u<<=1;switch(s=a){case 0:for(a=0,c=Math.pow(2,8),u=1;u!=c;)l=y.val&y.position,y.position>>=1,0==y.position&&(y.position=n,y.val=i(y.index++)),a|=(l>0?1:0)*u,u<<=1;d=t(a);break;case 1:for(a=0,c=Math.pow(2,16),u=1;u!=c;)l=y.val&y.position,y.position>>=1,0==y.position&&(y.position=n,y.val=i(y.index++)),a|=(l>0?1:0)*u,u<<=1;d=t(a);break;case 2:return""}for(p[3]=d,o=d,g.push(d);;){if(y.index>e)return"";for(a=0,c=Math.pow(2,_),u=1;u!=c;)l=y.val&y.position,y.position>>=1,0==y.position&&(y.position=n,y.val=i(y.index++)),a|=(l>0?1:0)*u,u<<=1;switch(d=a){case 0:for(a=0,c=Math.pow(2,8),u=1;u!=c;)l=y.val&y.position,y.position>>=1,0==y.position&&(y.position=n,y.val=i(y.index++)),a|=(l>0?1:0)*u,u<<=1;p[f++]=t(a),d=f-1,h--;break;case 1:for(a=0,c=Math.pow(2,16),u=1;u!=c;)l=y.val&y.position,y.position>>=1,0==y.position&&(y.position=n,y.val=i(y.index++)),a|=(l>0?1:0)*u,u<<=1;p[f++]=t(a),d=f-1,h--;break;case 2:return g.join("")}if(0==h&&(h=Math.pow(2,_),_++),p[d])m=p[d];else{if(d!==f)return null;m=o+o.charAt(0)}g.push(m),p[f++]=o+m.charAt(0),h--,o=m,0==h&&(h=Math.pow(2,_),_++)}}};return r}();"function"==typeof define&&define.amd?define("lzstring",[],function(){return LZString}):"undefined"!=typeof module&&null!=module&&(module.exports=LZString),define("app/game",["app/config","app/game/tag","app/game/move","app/game/comment","app/grammar","app/messages","i18n!nls/main","lodash","lzstring"],function(e,t,n,i,s,r,o,a){var l=LZString.compressToEncodedURIComponent,c=LZString.decompressFromEncodedURIComponent,u=function(e){return this.simulator=e,this.is_valid=!1,this.config={},this.tags=[],this.moves=[],this.plys=[],this.ptn="",this.callbacks_start=[],this.callbacks_end=[],this};return u.prototype.on_parse_start=function(e,t){return a.isFunction(e)?this.callbacks_start.push(e):a.invokeMap(this.callbacks_start,"call",t),this},u.prototype.on_parse_end=function(e,t){return a.isFunction(e)?this.callbacks_end.push(e):a.invokeMap(this.callbacks_end,"call",t),this},u.prototype.parse=function(e,r,u){var d,p,h,f,_,m;if(r){if(/^[A-Za-z0-9$+-]+$/.test(e)?d=c(e):(d=decodeURIComponent(e),e=l(d)),d==this.ptn)return!1}else{if(e==this.ptn)return!1;d=e}if(u?(this.original_ptn=d,sessionStorage.ptn=this.original_ptn):this.original_ptn||(this.original_ptn=sessionStorage.ptn),this.on_parse_start(!1,u),this.text=!1,this.comment_text=!1,this.comments=!1,this.is_valid=!0,this.caret_moved=!1,this.tags.length=0,this.moves.length=0,this.plys.length=0,this.m.clear("error"),this.m.clear("warning"),this.char_index=0,_=d.match(s.grammar.ptn_grouped)){p=_[1],h=_[3],this.suffix=_[4]||"",p=p.match(s.grammar.tag),this.config={};for(var f=0;f<p.length;f++)new t(p[f],this);m=a.difference(s.required_tags,a.map(this.tags,"key")),m.length&&(this.m.error(o.error.missing_tags({tags:m})),this.is_valid=!1),this.comment_text=i.parse(_[2],this),this.comments=this.comment_text?a.map(this.comment_text,"text"):null,h&&new n(h,this)}else this.m.error(o.error.invalid_notation),this.is_valid=!1,this.text=d;return this.update_text(),!!this.simulator.validate(this)&&(this.on_parse_end(!1,u),!0)},u.prototype.revert=function(){this.parse(this.original_ptn,!1,!0)},u.prototype.get_linenum=function(){return this.config.tps&&this.config.tps.move?this.config.tps.move+this.moves.length-1:this.moves.length},u.prototype.update_text=function(e){this.ptn=this.print_text(e),this.ptn_compressed=l(this.ptn)},u.prototype.insert_ply=function(e,t,i,s){var r,o,e,l,c=a.isUndefined(t)?null:this.plys[t];return c?(this.char_index=c.char_index,r=c.turn,o=c.move,l=c.comments,this.plys.splice(c.index),this.moves.splice(o.index+1),1!=r&&2!=o.first_turn||(o.ply2=null)):this.moves.length?(o=a.last(this.moves),r=this.plys.length&&1==a.last(this.plys).turn?2:1,this.plys.length&&1==r&&(o.suffix="\n",o=new n(o.linenum.value+1+".",this))):(r=this.config.tps?this.config.tps.player:1,o=new n(this.suffix+this.get_linenum()+".",this),this.suffix=""),e=o.insert_ply(e,r,i,s),e.comments=l||[],this.update_text(),app.update_after_ply_insert(e.index,i),e},u.prototype.trim_to_current_ply=function(e){var n,i,s=this.plys[e.ply_index],r=a.find(this.tags,{key:"tps"});this.moves.length&&this.moves[0].linenum&&(n=this.moves[0].linenum.prefix,new t('\n[TPS "'+e.to_tps()+'"]',this,!!r&&r.index),s&&(this.moves.splice(0,s.move.index+(2==s.turn)),this.moves.length?this.moves[0].linenum.prefix=n:this.suffix=n,s.move.ply1==s&&(s.move.ply1=null,s.move.comments1=null,s.move.comments2=null),e.ply_index=0,e.ply_is_done=!1),this.parse(this.print_text()),app.range.pushstate(),i=this.plys.length?this.get_bounds(this.plys[0])[1]:"end",app.set_caret(i),app.scroll_to_ply())},u.prototype.print=function(){var e="";return this.text&&(e+=this.print_invalid()),e+='<span class="header">',this.tags&&(e+=a.invokeMap(this.tags,"print").join("")),e+='</span><span class="body">',this.comment_text&&(e+=a.invokeMap(this.comment_text,"print").join("")),this.moves&&(e+=a.invokeMap(this.moves,"print").join("")),this.suffix&&(e+=this.suffix),e+="</span>"},u.prototype.print_text=function(e){var t="";return e&&(this.char_index=0),t+=a.invokeMap(this.tags,"print_text",e).join(""),t+=this.comment_text?a.invokeMap(this.comment_text,"print_text").join(""):"",t+=a.invokeMap(this.moves,"print_text",e).join(""),t+=this.suffix},u.prototype.get_bounds=function(e){return[e.char_index+(e.prefix?e.prefix.length:0),e.char_index+(e.print_text?e.print_text().length:0)-(e.suffix?e.suffix.length:"")]},u.prototype.m=new r("parse"),u.prototype.print_invalid=a.template('<span class="invalid"><%=this.text.replace(/(\\S)/, \'<span class="first-letter">$1</span>\')%></span>'),u}),define("app/board/piece",["app/config","i18n!nls/main","lodash"],function(e,t,n){var i=function(e,t,i){return this.needs_updated=!0,this.is_selected=!1,this.board=e,this.player=1*t||1,this.stone=i||"F",this.true_stone="C"==i?i:"F",this.ply=null,this.square=null,this.captor=null,this.captives=[],this.piece_index=e.pieces[this.player][this.true_stone].length,"C"==this.stone&&(this.piece_index+=e.piece_counts.F),e.all_pieces.push(this),e.pieces[this.player][this.true_stone].push(this),n.bindAll(this,"render"),this};return i.prototype.to_tps=function(){return n.map(this.captives,"player").reverse().join("")+this.player+("F"==this.stone?"":this.stone)},i.prototype.set_ply=function(e){this.ply=e,e.is_slide||(this.stone=e.stone)},i.prototype.set_captives=function(e){var t=this;this.captor=null,this.captives=e||[],n.each(this.captives,function(e,n){e.stack_index=n,e.captor=t,e.square=t.square,e.stone="F",e.captives.length=0})},i.prototype.render=function(){var t=this.square,i=6;return this.board.defer_render?void(this.needs_updated=!0):(this.captor?(this.z=this.captor.captives.length-this.stack_index,this.is_immovable=this.stack_index>=this.board.size-1):this.captives.length?(this.z=this.captives.length+1,this.is_immovable=!1,n.invokeMap(this.captives,"render")):(this.is_immovable=!1,t?this.z=1:e.board_3d&&"C"==this.stone?this.z=this.piece_index-this.board.piece_counts.F%this.board.size:this.z=this.piece_index),t?(this.x=100*t.col,this.y=-100*t.row,e.board_3d?this.is_selected&&(this.z+=3):this.is_immovable?this.y+=i*(1-this.z):(this.y+=i*(1-this.z+1*("S"==this.stone&&!!this.captives.length)-(this.is_selected?3:0)),(this.captor||this).z>this.board.size&&(this.y+=i*((this.captor||this).z-this.board.size)))):e.board_3d?(this.x=100*this.board.size,2==this.player&&(this.x+=75),"C"==this.stone?this.y=(this.board.size-1)*-100:this.y=(this.board.size-1)*-100*Math.floor(this.piece_index/this.board.size)/Math.floor(this.board.piece_counts.F/(this.board.size-1*!!(this.board.piece_counts.C&&this.board.piece_counts.F%this.board.size))),this.z=this.z%this.board.size+1):(this.z+=this.board.piece_counts.total,this.x=100*this.board.size,2==this.player&&(this.z+=this.board.piece_counts.total,this.x+=75),this.y=(this.board.size-1)*-100*this.piece_index/this.board.piece_counts.total),this.x=Math.round(1e3*this.x)/1e3,this.y=Math.round(1e3*this.y)/1e3,this.z-=1,this.$view?(this.$view[0].style=this.tpl.location(this),this.$view[0].className=this.tpl.piece_class(this),this.$stone[0].className=this.tpl.stone_class(this)):(this.$view=$(this.tpl.piece(this)),this.$stone=this.$view.find(".stone"),this.$captive=this.$view.find(".captive"),this.$view.data("model",this)),app.$html[0].contains(this.$view[0])||this.board.$pieces.append(this.$view),this.needs_updated=!1,this.$view)},i.prototype.tpl={piece_class:n.template("piece<% if (square) { %><% if (is_immovable) { %> immovable<% } %><% } else { %> unplayed<% } %>"),location:n.template("transform: translate3d(<%=x%>%, <%=y%>%, <%=z%>em);"),stone_class:n.template("stone p<%=player%> <%=stone%>"),piece:n.template('<div class="<%=tpl.piece_class(obj)%>"  style="<%=tpl.location(obj)%>"><div class="captive p<%=player%>"></div><div class="<%=tpl.stone_class(obj)%>"></div></div>')},i}),define("app/board/square",["app/config","i18n!nls/main","lodash"],function(e,t,n){var i=function(e,t,i){return this.needs_updated=!1,this.board=e,this.col=i,this.row=t,this.coord=app.square_coord([i,t]),this.color=t%2!=i%2?"dark":"light",this.piece=null,this.player=0,this.neighbors={},this.is_edge=!1,this.is_corner=!1,this.is_ns=!1,this.is_ew=!1,this.is_valid=!1,this.is_selected=!1,this.is_placed=!1,this.edges=[],this.connections=[],this.road_connections=[],0==t&&(this.is_edge=!0,this.is_ns=!0,this.edges.push("-")),t==e.size-1&&(this.is_edge=!0,this.is_ns=!0,this.edges.push("+")),0==i&&(this.is_edge=!0,this.is_ew=!0,this.edges.push("<")),i==e.size-1&&(this.is_edge=!0,this.is_ew=!0,this.edges.push(">")),this.is_corner=2==this.edges.length,n.bindAll(this,"render","select"),this};return i.prototype.to_tps=function(){return this.piece?this.piece.to_tps():"x"},i.prototype.parse=function(e){var t,i,s,r=this,o="F";return e=e.split("").reverse(),/\d/.test(e[0])||(o=e.shift()),s=e.shift(),!!(t=this.board.pieces[s]["C"==o?o:"F"].pop())&&(t.stone=o,i=n.map(e,function(e){return r.board.pieces[e].F.pop()}),!(i.indexOf(void 0)>=0)&&(t.set_captives(i),this.set_piece(t,!1)))},i.prototype.set_connection=function(e,t,n){var i=this.connections.indexOf(e),s=n?-1:this.road_connections.indexOf(e);t?i<0&&(this.connections.push(e),n||this.road_connections.push(e),this.needs_updated=!0):i>=0&&(this.connections.splice(i,1),!n&&s>=0&&this.road_connections.splice(s,1),this.needs_updated=!0)},i.prototype.set_piece=function(e,t){var n,i,s,r=this.piece;this.piece=e||null,r&&"F"==r.stone&&this.board.flat_score[r.player]--,e?(this.player=e.player,this.board.flat_score[e.player]+=1*("F"==e.stone),e.square=this,e.set_captives(t||e.captives),e.render(),this.needs_updated=!0,r||(this.board.empty_count-=1)):r&&(this.board.empty_count+=1,this.player=0,r.render(),this.needs_updated=!0);for(n in this.board.direction_names)i=this.board.opposite_direction[n],s=this.neighbors[n],s?(e&&s.player==this.player&&"S"!=e.stone&&"S"!=s.piece.stone?(this.set_connection(n,!0),s.set_connection(i,!0)):(this.set_connection(n,!1),s.set_connection(i,!1)),s.needs_updated&&s.update_view()):e&&"S"!=e.stone?this.set_connection(n,!0,!0):this.set_connection(n,!1);return this.$view&&this.needs_updated&&!this.board.defer_render&&(this.update_view(),this.board.update_scores()),this.piece},i.prototype.set_active=function(){this.$view&&this.$view.addClass("active")},i.prototype.render=function(){return this.$view=$(this.tpl(this)),this.$view.data("model",this),this.$view},i.prototype.update_view=function(){var e=[];if(this.$view){if(this.board.defer_render)return void(this.needs_updated=!0);this.$view.removeClass("p1 p2 valid selected placed "+n.values(this.board.direction_names).join(" ")),this.player&&e.push("p"+this.player),this.is_valid&&e.push("valid"),this.is_selected&&e.push("selected"),this.is_placed&&e.push("placed"),this.$view.addClass(e.join(" ")+" "+n.map(this.connections,this.board.direction_name).join(" ")),this.needs_updated=!1}},i.prototype.select=function(e){var t,n,i=(this.board.tmp_ply,e&&(!!e.click_duration||2==e.button)),s=this.board.current_linenum(),r=1==s?1==this.board.turn?2:1:this.board.turn;if(this.board.selected_pieces.length)this.drop_selection(i);else if(this.piece)if(t=this.piece,!t.ply||this.board.ply_index!=t.ply.index||1==s||2==s&&1==this.board.turn){if(1!=s){this.board.selected_pieces=i?[t]:[t].concat(t.captives.slice(0,this.board.size-1));for(var o=0;o<this.board.selected_pieces.length;o++)this.board.selected_pieces[o].is_selected=!0;t.render(),this.board.update_valid_squares(),this.board.set_active_squares([this]),this.$view.addClass("selected")}}else n="F"==t.stone?"S":"C"==t.stone&&this.board.pieces[1==r?2:1].F.length||"S"==t.stone&&!this.board.pieces[1==r?2:1].C.length?"":"C",this.board.go_to_ply(this.board.ply_index,!1),this.board.game.insert_ply(n+this.coord,this.board.ply_index);else n="",1!=s&&(i&&0===e.button||!this.board.pieces[r].F.length?n=this.board.pieces[r].C.length?"C":"S":i&&(n="S")),this.board.game.insert_ply(n+this.coord,this.board.ply_index+1*this.board.ply_is_done)},i.prototype.drop_selection=function(e){var t,i,s=this.board.tmp_ply;if(this.board.selected_pieces[0].square==this)e?(t=this.piece,this.board.deselect_all(!0),s&&(s.drops[s.drops.length-1]+=this.board.selected_pieces.length),this.board.selected_pieces.length=0):(t=this.board.selected_pieces.pop(),t.is_selected=!1,s&&(s.drops[s.drops.length-1]+=1)),t.render(),this.board.selected_pieces.length||this.board.set_active_squares(this.board.game.plys.length?app.get_current_ply().squares:[]);else{var r=this.board.selected_pieces[0].square,o=r.piece.captives.slice(this.board.selected_pieces.length-1);s?(this.board.validate_neighbor(this,this.neighbors[s.direction],this.board.selected_pieces.length-1)||(e=!0),s.drops.push(e?this.board.selected_pieces.length:1)):(i=n.findKey(r.neighbors,this),this.board.validate_neighbor(this,this.neighbors[i],this.board.selected_pieces.length-1)||(e=!0),s=this.board.tmp_ply={count:this.board.selected_pieces.length,square:r.coord,direction:i,drops:[e?this.board.selected_pieces.length:1]}),this.piece&&"S"==this.piece.stone&&(s.flattens=s.drops.length-1),e?this.board.deselect_all(!0):n.last(this.board.selected_pieces).is_selected=!1,r.set_piece(o[0],o.slice(1)),this.set_piece(this.board.selected_pieces[0],this.board.selected_pieces.slice(1).concat(this.piece?[this.piece].concat(this.piece.captives):[])),e?this.board.selected_pieces.length=0:this.board.selected_pieces.length-=1,this.set_active()}this.is_selected=!!this.piece&&this.piece.is_selected,s&&!this.board.selected_pieces.length&&this.board.game.insert_ply(""+(s.count>1?s.count:"")+s.square+s.direction+(s.drops.length>1?s.drops.join(""):""),this.board.ply_index+1*this.board.ply_is_done,!0,s.flattens),this.board.update_valid_squares()},i.prototype.place=function(e){var t,n=this.board.pieces[e.player][e.true_stone];return this.piece||!n.length?this.board.illegal_ply(e):(t=n.pop(),t.set_ply(e),this.set_piece(t,!1,!0),this.piece.render(),!0)},i.prototype.undo_place=function(e){return!!this.piece&&(this.board.pieces[this.piece.player][this.piece.true_stone].push(this.piece),this.piece.square=null,this.set_piece(),!0)},i.prototype.slide=function(e){function t(){return r.board.illegal_ply(e)}var n,i,s,r=this,o=this,a=this.piece,l=this.board.defer_render;if(!a||e.count>this.board.size||a.captives.length<e.count-1||a.player!=e.player)return t();for(this.board.defer_render=!0,i=a.captives.splice(e.count-1),o.set_piece(i[0],i.slice(1)),n=[a].concat(a.captives),s=0;s<e.drops.length;s++){if(o=o.neighbors[e.direction],!o)return t();if(i=n.splice(-e.drops[s]),o.piece){if("C"==o.piece.stone)return t();if("S"==o.piece.stone){if(i.length>1||"C"!=i[0].stone)return t();e.flattens=s}i.push(o.piece),i=i.concat(o.piece.captives)}o.set_piece(i[0],i.slice(1))}return l||(this.board.defer_render=!1,this.board.update_view()),!0},i.prototype.undo_slide=function(e){var t,n,i=this,s=this.board.opposite_direction[e.direction],r=[];for(n=0;n<e.drops.length;n++)i=i.neighbors[e.direction];for(n=e.drops.length-1;n>=0;n--)r.push(i.piece),r=r.concat(i.piece.captives.slice(0,e.drops[n]-1)),t=i.piece.captives.slice(e.drops[n]-1),t[0]&&e.flattens===n&&(t[0].stone="S"),i.set_piece(t[0],t.slice(1)),i=i.neighbors[s];return this.piece&&(r.push(this.piece),r=r.concat(this.piece.captives)),this.set_piece(r[0],r.slice(1)),!0},i.prototype.tpl=n.template('<div class="square c<%=col%> r<%=row%> <%=color%>"><div class="road"><div class="up"></div><div class="down"></div><div class="left"></div><div class="right"></div></div></div>'),i}),define("app/board",["app/config","app/board/piece","app/board/square","app/messages","i18n!nls/main","lodash"],function(e,t,n,s,r,o){var a=function(e){return this.turn=1,this.ply_index=0,this.ply_is_done=!1,this.is_eog=!1,this.comments_ply_index=-2,this.size=5,this.squares={},this.rows=[],this.cols=[],this.all_pieces=[],this.pieces={},this.flat_score={1:0,2:0},this.empty_count=this.size*this.size,this.selected_pieces=[],this.tmp_ply=null,this.init_callbacks=[],this.resize_callbacks=[],this.ply_callbacks=[],o.bindAll(this,["resize","rotate_handler","reset_rotation","select_square","update_view","reposition_pieces","rotate","play","pause","playpause","prev","next","prev_ply","next_ply","prev_move","next_move","first","last","direction_name"]),e&&this.init(e),this};return a.prototype.on_init=function(e){return e?this.init_callbacks.push(e):o.invokeMap(this.init_callbacks,"call",this,this),this},a.prototype.on_resize=function(e){return e?this.resize_callbacks.push(e):o.invokeMap(this.resize_callbacks,"call",this,this),this},a.prototype.on_ply=function(e){return e?this.ply_callbacks.push(e):o.invokeMap(this.ply_callbacks,"call",this,this.game.plys[this.ply_index]),this},a.prototype.clear=function(){this.turn=1,this.ply_index=0,this.ply_is_done=!1,this.is_eog=!1,this.comments_ply_index=-2,this.squares={},this.all_pieces=[],this.flat_score[1]=0,this.flat_score[2]=0,this.empty_count=this.size*this.size,this.selected_pieces.length=0,this.tmp_ply=null,this.pieces={1:{F:[],C:[]},2:{F:[],C:[]}},this.rows.length=0,this.cols.length=0},a.prototype.init=function(e,i){var s,r,a,l,c=this,u="a".charCodeAt(0);if(i!==!0&&(this.m.clear(),this.pause()),this.defer_render=!0,this.game=e,this.size=1*e.config.size,this.empty_count=this.size*this.size,this.piece_counts=o.clone(app.piece_counts[this.size]),this.tps=e.config.tps&&e.config.tps.is_valid?e.config.tps:void 0,this.saved_ply_index=this.ply_index,this.saved_ply_is_done=this.ply_is_done,this.clear(),!this.piece_counts)return!1;for(r=0;r<this.size;r++)a=String.fromCharCode(u+r),this.cols[r]=a;for(s=0;s<this.size;s++)this.rows[s]=s+1;for(s=0;s<this.size;s++)for(r=0;r<this.size;r++)l=new n(this,s,r),this.squares[l.coord]=l,s&&(l.neighbors["-"]=this.squares[app.square_coord([r,s-1])],this.squares[app.square_coord([r,s-1])].neighbors["+"]=l),r&&(l.neighbors["<"]=this.squares[app.square_coord([r-1,s])],this.squares[app.square_coord([r-1,s])].neighbors[">"]=l);return o.each(this.pieces,function(e,n){o.each(e,function(e,i){for(;c.pieces[n][i].length<c.piece_counts[i];)new t(c,n,i)})}),this.tps&&(o.each(this.tps.squares,function(e){e.is_space||e.error||c.squares[e.coord].parse(e.text)||c.invalid_tps(e)}),this.tps.player&&(this.turn=this.tps.player)),i!==!0&&(this.defer_render=!1,this.on_init()),!0},a.prototype.validate=function(e){return!!this.init(e,!0)&&(this.go_to_ply(e.plys.length,!0,!0),this.check_game_end(),this.clear(),!0)},a.prototype.trim_to_current_ply=function(){this.game.plys.length&&this.game.trim_to_current_ply(this)},a.prototype.current_linenum=function(){var e=this.game.plys[this.ply_index];return e?e.move.linenum.value+1*(this.ply_is_done&&2==e.turn):this.game.config.tps&&this.game.config.tps.move?this.game.config.tps.move:1},a.prototype.check_game_end=function(){var e,t=this.game.plys[this.ply_index],n=this.pieces[1==this.turn?2:1],i=this.find_roads();if(this.is_eog=!1,!t)return!1;if(i&&i.length)i[t.turn].length?e=1==t.turn?"R-0":"0-R":i[1==t.turn?2:1].length&&(e=1==t.turn?"0-R":"R-0");else{if(0!=this.empty_count&&0!=n.F.concat(n.C).length)return!(!t.move.result||"1"==t.move.result.type)&&(t.is_last()&&(t.move.result=null,this.game.config.result=null),t.result=null,this.game.update_text(!0),!0);e=this.flat_score[1]==this.flat_score[2]?"1/2-1/2":this.flat_score[1]>this.flat_score[2]?"F-0":"0-F"}return e=t.move.insert_result(e,t.turn),i&&i.length&&(e.roads=i),this.is_eog=!0,!0},a.prototype.find_roads=function(){function e(t){var n,i,s,r={},l={};for(r[t.coord]=t,delete a[t.player][t.coord],t.is_edge&&(l[t.edges[0]]=!0,t.edges[1]&&(l[t.edges[1]]=!0)),n=0;n<t.road_connections.length;n++)i=t.neighbors[t.road_connections[n]],o.has(a[t.player],i.coord)&&(s=e(i),o.assign(r,s.squares),o.assign(l,s.edges));return{squares:r,edges:l}}function t(e,t){var n,i,s,r,a;for(e=e.concat();e.length;){for(i=0;i<e.length;i++){r=e[i],n=[];for(var s=0;s<r.road_connections.length;s++)a=r.neighbors[r.road_connections[s]],o.has(t,a.coord)&&n.push(a);n.length<2?(delete t[r.coord],e[i]=n[0]):e[i]=void 0}e=o.compact(e)}}var n,s,r,a={1:{},2:{}},l={1:{ns:[],ew:[]},2:{ns:[],ew:[]}},c=[];for(n in this.squares)s=this.squares[n],r=s.is_edge?s.edges.join(""):null,1==s.road_connections.length?s.is_edge?(a[s.player][n]=s,s.is_corner||(s.is_ns?l[s.player].ns.push(s):s.is_ew&&l[s.player].ew.push(s))):c.push(s):s.road_connections.length>1&&(a[s.player][n]=s);t(c,a[1]),t(c,a[2]);var u,d={1:[],2:[],squares:{1:{},2:{},all:{}}};for(i=1;i<=2;i++)for(;!o.isEmpty(a[i]);){for(n in a[i])break;u=e(a[i][n]),u.edges.ns=u.edges["-"]&&u.edges["+"]||!1,u.edges.ew=u.edges["<"]&&u.edges[">"]||!1,(u.edges.ns||u.edges.ew)&&(u.edges.ns&&u.edges.ew||t(l[i][u.edges.ns?"ew":"ns"],u.squares),d[i].push({ns:u.edges.ns,ew:u.edges.ew,squares:o.keys(u.squares)}),o.assign(d.squares[i],u.squares),o.assign(d.squares.all,u.squares))}return d.squares[1]=o.keys(d.squares[1]),d.squares[2]=o.keys(d.squares[2]),d.squares.all=o.keys(d.squares.all),d.length=d[1].length+d[2].length,d},a.prototype.to_tps=function(){var e,t,n=this.game.plys[this.ply_index]||this.game.plys[this.ply_index-1],i=[];for(this.do_ply(),e=0;e<this.size;e++){for(i[e]=[],t=0;t<this.size;t++)i[e][t]=this.squares[app.square_coord([t,this.size-1-e])].to_tps();i[e]=i[e].join(",")}return i=i.join("/"),i=i.replace(/x((?:,x)+)/g,function(e){return"x"+(1+e.length)/2}),i+" "+(n?n.turn-1||2:1)+" "+(n.move.linenum.value+(2==n.turn))},a.prototype.render=function(){var e=this;return this.$view=$(this.tpl.board(this)),this.$board=this.$view.find(".board"),this.$unplayed_bg=this.$view.find(".unplayed-bg").parent(),this.$row_labels=this.$view.find(".row.labels"),this.$col_labels=this.$view.find(".col.labels"),this.$squares=this.$view.find(".squares"),this.$pieces=this.$view.find(".pieces"),this.$ptn=this.$view.find(".ptn"),this.$ptn.$prev_move=this.$ptn.find(".prev_move"),this.$ptn.$next_move=this.$ptn.find(".next_move"),this.$scores=this.$view.find(".scores"),this.$bar1=this.$scores.find(".player1"),this.$bar2=this.$scores.find(".player2"),this.$score1=this.$bar1.find(".score"),this.$score2=this.$bar2.find(".score"),this.rotate(),this.$squares.append.apply(this.$squares,o.invokeMap(this.squares,"render")),this.$pieces.empty(),o.invokeMap(o.filter(this.all_pieces,{captive:null}),"render"),this.go_to_ply(o.isUndefined(this.saved_ply_index)?0:this.saved_ply_index,this.saved_ply_is_done),this.$ptn.on("click tap",".ply",function(t){var n=$(t.currentTarget),i=n.data("index");e.go_to_ply(i,e.ply_index!=i||!e.ply_is_done)}).on("click tap",".prev_move",this.prev_move).on("click tap",".next_move",this.next_move),this.$view},a.prototype.resize=function(t){if(this.$view){var n,i,s,r,a=app.$viewer.width(),l=app.$viewer.height(),c=e[app.mode],u=c.show_unplayed_pieces?1+1.75/this.size:1,d=16;n=a,i=l,e.board_only||(n-=32,i-=32),c.show_axis_labels&&(d=this.$row_labels.width(),n-=d,i-=this.$col_labels.outerHeight()),c.show_flat_counts&&(i-=this.$scores.outerHeight()),c.show_current_move&&(i-=this.$ptn.outerHeight()),c.show_play_controls&&(i-=app.$controls.outerHeight()),s=n<i*u?n/u:i,r=s*(u-1),o.isBoolean(t)&&app.$viewer.transition(),this.$board.css({width:s,height:s}),this.$unplayed_bg.width(r),this.vw=a,this.vh=l,this.width=s+c.show_unplayed_pieces*r+d,this.on_resize()}},a.prototype.rotate_handler=function(t){if(e.board_3d&&("touchstart"!=t.type||2==t.originalEvent.touches.length)&&("mousedown"!=t.type||t.metaKey||t.ctrlKey||1==t.button)){var n,i;t.originalEvent.touches?(n=(t.originalEvent.touches[0].clientX+t.originalEvent.touches[1].clientX)/2,i=(t.originalEvent.touches[0].clientY+t.originalEvent.touches[1].clientY)/2):(n=t.clientX,i=t.clientY),app.dragging={x:n,y:i,rotation:e.board_rotation},app.$document.on("mousemove touchmove",app.rotate_board),app.$document.on("mouseup touchend",this.stop_rotating),t.preventDefault(),t.stopPropagation()}},a.prototype.stop_rotating=function(){app.$document.off("mousemove touchmove",app.rotate_board),delete app.dragging},a.prototype.reset_rotation=function(t){e.board_3d&&(!t||t.target==app.$viewer[0]&&(t.metaKey||t.ctrlKey||1==t.button||t.click_duration&&(1==t.button||"touchstart"==t.originalEvent.type)))&&(this.stop_rotating(),app.rotate_board(!1))},a.prototype.select_square=function(e){if(!(app.dragging||"touchstart"==e.type&&1!=e.originalEvent.touches.length||"mousedown"==e.type&&(e.metaKey||e.ctrlKey||0!=e.button&&1!=e.button))){var t=$(e.target).data("model");t.select(e),e.preventDefault(),e.stopPropagation()}},a.prototype.deselect_all=function(e){if(e)for(var t=0;t<this.selected_pieces.length;t++)this.selected_pieces[t].is_selected=!1,this.selected_pieces[t].square.is_selected=!1;else if(this.tmp_ply)this.selected_pieces[0].square.drop_selection(!0);else{for(var n;this.selected_pieces.length;)n=this.selected_pieces.pop(),n.is_selected=!1;n&&(n.render(),this.update_valid_squares(),this.update_active_squares())}},a.prototype.update_view=function(){this.update_pieces(),this.update_squares(),this.update_scores(),this.on_ply()},a.prototype.update_squares=function(){o.invokeMap(o.filter(this.squares,{needs_updated:!0}),"update_view")},a.prototype.update_pieces=function(){o.invokeMap(o.filter(this.all_pieces,{needs_updated:!0,captor:null}),"render")},a.prototype.reposition_pieces=function(){o.invokeMap(o.compact(o.map(this.squares,"piece")).concat(this.pieces[1].F).concat(this.pieces[1].C).concat(this.pieces[2].F).concat(this.pieces[2].C),"render")},a.prototype.rotate=function(){this.$view.css("transform",this.tpl.board_rotation(e))},a.prototype.update_ptn=function(){var e,t,n,i,s=this.game.plys[this.ply_index]||this.game.plys[0];s&&!s.move.is_invalid&&(e=s.move.ply1,t=s.move.ply2,this.$move&&this.$move.length&&this.$move.remove(),this.$move=$(s.move.print()),this.$ptn.$prev_move.after(this.$move),n=this.$ptn.find(".ply:eq(0)"),i=this.$ptn.find(".ply:eq(1)"),e&&e.turn==s.move.first_turn&&e==s&&n.addClass("active"),t&&t==s&&i.addClass("active"),this.$ptn.$prev_move.attr("disabled",0==s.index&&!this.ply_is_done),this.$ptn.$next_move.attr("disabled",s.index==this.game.plys.length-1&&this.ply_is_done))},a.prototype.update_scores=function(){var e=(this.flat_score[1]+this.flat_score[2])/100;this.$score1.text(this.flat_score[1]),this.$score2.text(this.flat_score[2]),this.$bar1.width(e?this.flat_score[1]/e+"%":""),this.$bar2.width(e?this.flat_score[2]/e+"%":"")},a.prototype.do_ply=function(){var e,t,n;return!!this.ply_is_done||!(this.selected_pieces.length||this.ply_index>=this.game.plys.length||this.ply_index<0)&&(e=this.game.plys[this.ply_index],t=this.squares[e.square],e.is_illegal||!e.is_valid?(this.pause(),!1):(n=!!e.is_nop||(e.is_slide?t.slide(e):t.place(e)),this.ply_is_done=!0,this.is_eog=!!e.result,this.turn=1==e.turn?2:1,this.defer_render||this.on_ply(),e.is_last()&&this.pause(),n))},a.prototype.undo_ply=function(){var e,t,n;return!this.ply_is_done||!(this.selected_pieces.length||this.ply_index>=this.game.plys.length||this.ply_index<0)&&(e=this.game.plys[this.ply_index],t=this.squares[e.square],!(e.is_illegal||!e.is_valid)&&(n=!!e.is_nop||(e.is_slide?t.undo_slide(e):t.undo_place(e)),this.ply_is_done=!1,this.is_eog=!1,this.turn=e.turn,this.defer_render||this.on_ply(),n))},a.prototype.illegal_ply=function(e){return this.game.is_editing&&this.m_parse.error(r.error.illegal_ply({ply:e.text})).click(function(){app.select_token_text(e)}),e.is_illegal=!0,!1},a.prototype.invalid_tps=function(e){return this.m_parse.error(r.error.invalid_tag_value({tag:r.TPS,value:e.text})).click(function(){app.set_caret([e.char_index,e.char_index+e.text.length])}),e.error=!0,!1},a.prototype.set_active_squares=function(e){this.$view&&(this.$squares.children().removeClass("active"),e&&e.length&&(o.isString(e[0])&&(e=o.pick(this.squares,e)),o.invokeMap(e,"set_active")))},a.prototype.update_active_squares=function(){var e=this.game.plys[this.ply_index];e?e.result&&e.result.roads&&this.ply_is_done?this.set_active_squares(e.result.roads.squares[e.result.victor]):this.set_active_squares(e.squares):this.set_active_squares()},a.prototype.update_valid_squares=function(){function e(){var e,t;for(e in i.squares)t=i.squares[e],t.needs_updated=!0,t.is_valid=!1,t.is_selected=!1,t.is_placed=!1}if(this.$view){var t,n,i=this,s=this.game.plys[this.ply_index];if(this.tmp_ply)e(),t=this.selected_pieces[0].square,t.is_valid=!0,t.is_selected=!0,this.validate_neighbor(t,t.neighbors[this.tmp_ply.direction]);else if(this.selected_pieces.length){e(),t=this.selected_pieces[0].square,t.is_valid=!0,t.is_selected=!0;for(n in t.neighbors)this.validate_neighbor(t,t.neighbors[n])}else if(this.is_eog)e(),s&&!s.is_slide&&(t=this.squares[s.square],t.is_valid=!0,t.is_placed=!0);else for(t in this.squares)t=this.squares[t],t.needs_updated=!0,t.piece?t.piece.ply===s?(t.is_valid=!0,t.is_selected=!1,t.is_placed=!0):t.piece.player==this.turn?(t.is_valid=!0,t.is_selected=!1,t.is_placed=!1):(t.is_valid=!1,t.is_selected=!1,t.is_placed=!1):(t.is_valid=!0,t.is_selected=!1,t.is_placed=!1);this.$view&&this.update_squares()}},a.prototype.validate_neighbor=function(e,t,n){return!(!t||t.piece&&("C"==t.piece.stone||"S"==t.piece.stone&&("C"!=this.selected_pieces[0].stone||this.selected_pieces.length!=1+(n||0))))&&(t.is_valid||(t.needs_updated=!0),t.is_valid=!0,!0)},a.prototype.show_comments=function(e){var t=this.game.config.result;if(!this.defer_render){if(this.m.clear(),!e||e.is_first()&&!this.ply_is_done)return void(this.game.comments&&o.map(this.game.comments.concat().reverse(),this.comment));
this.ply_is_done&&(e.result||t&&"1"==t.type&&e.is_last())&&(this.m["player"+t.victor](t.message),t.comments&&o.map(t.comments.concat().reverse(),this.comment)),e.comments&&o.map(e.comments.concat().reverse(),this.comment),e.evaluation&&/['"]/.test(e.evaluation)&&this.m["player"+e.player](/"|''/.test(e.evaluation)?r.Tinue:r.Tak)}},a.prototype.play=function(){this.selected_pieces.length||(!this.game.plys[this.ply_index]||this.ply_index==this.game.plys.length-1)&&this.ply_is_done||(this.is_playing=!0,app.$html.addClass("playing"),this.next())},a.prototype.pause=function(){clearTimeout(this.play_timer),this.is_playing=!1,app.$html.removeClass("playing")},a.prototype.playpause=function(e){e&&(e.stopPropagation(),e.preventDefault()),this.is_playing?this.pause():this.play()},a.prototype.prev=function(e){e&&(e.stopPropagation(),e.preventDefault(),this.pause()),!this.ply_is_done&&this.ply_index?(this.ply_index--,this.ply_is_done=!0,this.defer_render||this.on_ply()):this.undo_ply()},a.prototype.next=function(t){return this.is_playing&&(clearTimeout(this.play_timer),this.play_timer=setTimeout(this.next,6e4/e.play.speed),this.play_timestamp=(new Date).getTime()),t&&(t.stopPropagation(),t.preventDefault(),this.pause()),this.ply_is_done&&this.ply_index<this.game.plys.length-1?(this.ply_index++,this.ply_is_done=!1,this.defer_render||this.on_ply(),void 0):this.do_ply()},a.prototype.prev_ply=function(e){return e&&(e.stopPropagation(),e.preventDefault(),this.pause()),!this.ply_is_done&&this.ply_index&&(this.ply_index--,this.ply_is_done=!0),this.undo_ply()},a.prototype.next_ply=function(e){return e&&(e.stopPropagation(),e.preventDefault(),this.pause()),this.ply_is_done&&this.ply_index<this.game.plys.length-1&&(this.ply_index++,this.ply_is_done=!1),this.do_ply()},a.prototype.prev_move=function(e){e&&(e.stopPropagation(),e.preventDefault()),this.go_to_ply(this.ply_index-2,this.ply_is_done&&this.ply_index>1)},a.prototype.next_move=function(e){e&&(e.stopPropagation(),e.preventDefault()),this.go_to_ply(this.ply_index+2,this.ply_is_done)},a.prototype.first=function(e){e&&(e.stopPropagation(),e.preventDefault()),this.go_to_ply(0,!1)},a.prototype.last=function(e){e&&(e.stopPropagation(),e.preventDefault()),this.go_to_ply(this.game.plys.length-1,!0)},a.prototype.go_to_ply=function(e,t,n){if(this.selected_pieces.length)return!1;for(this.pause(),this.defer_render=!0,e<0?t=!1:e>=this.game.plys.length&&(t=!0),e=Math.min(this.game.plys.length-1,Math.max(0,e));this.ply_index<e&&this.do_ply();)this.ply_index++,this.ply_is_done=!1;for(;this.ply_index>e&&this.undo_ply();)this.ply_index--,this.ply_is_done=!0;t?this.do_ply():this.undo_ply(),n!==!0&&(this.defer_render=!1,this.update_view())},a.prototype.tpl={row:o.template('<span class="row"><%=obj%></span>'),col:o.template('<span class="col"><%=obj%></span>'),board_rotation:o.template("translate3d(<%=board_rotation[0]*board_max_angle/9%>em, <%=board_rotation[1]*board_max_angle/-9%>em, <%=board_rotation[2]*board_max_angle/-3%>em) rotate3d(<%=board_rotation[1]%>, <%=board_rotation[0]%>, 0, <%=board_rotation[2]*board_max_angle%>deg)"),board:o.template('<div class="table size-<%=size%>"><div class="top"><div></div><div><div class="scores"><span class="player1"><span class="name"><%=game.config.player1%></span><span class="score"><%=flat_score[1]%></span></span><span class="player2"><span class="score"><%=flat_score[2]%></span><span class="name"><%=game.config.player2%></span></span></div></div><div></div></div><div class="middle"><div class="left row-label-container"><div class="row labels"><%=_.map(rows, tpl.row).join("")%></div></div><div class="center"><div class="board"><div class="squares"></div><div class="pieces"></div></div></div><div class="right unplayed-bg-cell"><div class="unplayed-bg"></div></div></div><div class="bottom"><div></div><div><div class="col labels"><%=_.map(cols, tpl.col).join("")%></div><div class="ptn"><button class="prev_move mdl-button mdl-js-button mdl-button--icon" disabled><i class="material-icons">&#xE316;</i></button><button class="next_move mdl-button mdl-js-button mdl-button--icon" disabled><i class="material-icons">&#xE313;</i></button></div></div><div></div></div></div>')},a.prototype.m=new s("board"),a.prototype.m_parse=new s("parse"),a.prototype.comment=o.ary(o.bind(a.prototype.m.comment,a.prototype.m),1),a.prototype.opposite_direction={"+":"-","-":"+","<":">",">":"<"},a.prototype.direction_names={"+":"up","-":"down","<":"left",">":"right"},a.prototype.direction_name=function(e){return this.direction_names[e]},a}),define("text",{load:function(e){throw new Error("Dynamic load not allowed: "+e)}}),define("showdown",{}),define("mdown",{load:function(e){throw new Error("Dynamic load not allowed: "+e)}}),define("mdown!app/../../readme.md",[],function(){return'<h3 id="ptnninja">PTN Ninja</h3>\n\n<p>This is an editor and viewer for <a href="https://www.reddit.com/r/Tak/wiki/portable_tak_notation">Portable Tak Notation (PTN)</a>. It aims to be...</p>\n\n<ul>\n<li>Useful for transcription of live games, even on a phone.</li>\n\n<li>Intuitive, with a minimal UI that is enjoyable to use.</li>\n\n<li>Interactive, with an editing experience that teaches or aides understanding of notation.</li>\n\n<li>Responsive, with a fluid design that works as well on a phone as it does in fullscreen on a desktop.</li>\n</ul>\n\n<p>If you want to support this project, you can...</p>\n\n<ul>\n<li><a href="https://github.com/gruppler/PTN-Ninja/issues/">Report an issue</a></li>\n\n<li><a href="bitcoin:12mD2HUNb4MJoLfVDDLS1wep1hdhrSY3L8">Donate Bitcoins</a></li>\n\n<li><a href="https://www.paypal.me/gruppler">Donate USD</a></li>\n</ul>\n\n<h4 id="gettingstarted">Getting Started</h4>\n\n<p>Toggle between <strong>Edit Mode</strong> and <strong>Play Mode</strong> using the FAB (the big button in the lower-right corner).</p>\n\n<h5 id="editmode">Edit Mode</h5>\n\n<p><kbd>Tap</kbd> or <kbd>click</kbd> a <strong>ply</strong> to move the board to that point in the game. <kbd>Tap</kbd> or <kbd>click</kbd> again <strong>within the current ply</strong> to toggle the done/undone state of the ply.</p>\n\n<p>If there are any problems with the PTN, the FAB will turn red, and clicking it will display the error message(s). You can <kbd>tap</kbd> or <kbd>click</kbd> the <strong>error message</strong> to move the caret to the relevant position in the PTN.</p>\n\n<p>The editor checks the validity of the syntax as well as the legality of each ply, and automatically maintains the correct game result and move numbers.</p>\n\n<h6 id="loadagame">Load a Game</h6>\n\n<ul>\n<li><kbd>Drag</kbd> a <strong>.ptn file</strong> into the window</li>\n\n<li>Or, press <kbd>Ctrl or &#x2318;</kbd> + <kbd>o</kbd></li>\n\n<li>Or, select <strong>Open</strong> from the menu</li>\n\n<li>Or, copy the contents and paste into the editor</li>\n</ul>\n\n<h5 id="playmode">Play Mode</h5>\n\n<ul>\n<li>Navigate the game using the <strong>Play Controls</strong> or <strong>arrow hotkeys</strong> listed below</li>\n\n<li><kbd>Tap</kbd> or <kbd>click</kbd> the <strong>buttons</strong> displayed around the Current Move to navigate by move (two plies)</li>\n\n<li><kbd>Tap</kbd> or <kbd>click</kbd> the <strong>plies</strong> of the Current Move</li>\n</ul>\n\n<h6 id="placeastone">Place a Stone</h6>\n\n<ul>\n<li><kbd>Tap</kbd> or <kbd>click</kbd> on a <strong>square</strong> to place a flat stone</li>\n\n<li><kbd>Tap</kbd> or <kbd>click</kbd> the <strong>square</strong> again to cycle the stone type</li>\n\n<li><kbd>Long-touch</kbd> or <kbd>right-click</kbd> a <strong>square</strong> to place a standing stone</li>\n\n<li><kbd>Long-click</kbd> a <strong>square</strong> to place a cap stone</li>\n</ul>\n\n<h6 id="moveapieceorstack">Move a Piece or Stack</h6>\n\n<ul>\n<li><kbd>Tap</kbd> or <kbd>click</kbd> a <strong>square</strong> to select the piece or stack</li>\n\n<li><kbd>Long-touch</kbd> or <kbd>right-click</kbd> a <strong>square</strong> to select the <strong>top piece</strong> of a stack</li>\n\n<li><kbd>Tap</kbd> or <kbd>click</kbd> further <strong>squares</strong> to drop pieces</li>\n\n<li><kbd>Long-touch</kbd> or <kbd>right-click</kbd> a <strong>square</strong> to drop the selected stack</li>\n\n<li><kbd>Esc</kbd> also drops the selected stack in place</li>\n</ul>\n\n<h5 id="3dmode">3D Mode</h5>\n\n<p>3D Mode is experimental and may not work well or at all on some browsers or devices. It works best in Chrome.</p>\n\n<h6 id="rotatetheboard">Rotate the Board</h6>\n\n<ul>\n<li><kbd>Two-finger-drag</kbd></li>\n\n<li>Or, <kbd>Ctrl or &#x2318;</kbd> + <kbd>left-click</kbd> <kbd>drag</kbd></li>\n\n<li>Or, <kbd>middle-click</kbd> + <kbd>drag</kbd></li>\n</ul>\n\n<h6 id="resettheboardrotation">Reset the Board Rotation</h6>\n\n<ul>\n<li><kbd>Long-touch</kbd> outside the board</li>\n\n<li>Or, <kbd>Ctrl or &#x2318;</kbd> + <kbd>click-hold</kbd> outside the board</li>\n\n<li>Or, <kbd>middle-click-hold</kbd> outside the board</li>\n</ul>\n\n<hr />\n\n<h4 id="hotkeys">Hotkeys</h4>\n\n<h5 id="global">Global</h5>\n\n<table>\n<thead>\n<tr>\n<th style="text-align:left;">Key</th>\n<th style="text-align:left;">Action</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style="text-align:left;"><kbd>Esc</kbd></td>\n<td style="text-align:left;">Toggle Menu, or drop selected stack</td>\n</tr>\n<tr>\n<td style="text-align:left;"><kbd>Ctrl or &#x2318;</kbd> + <kbd>Space</kbd></td>\n<td style="text-align:left;">Toggle Edit/Play Mode</td>\n</tr>\n<tr>\n<td style="text-align:left;"><kbd>Ctrl or &#x2318;</kbd> + <kbd>s</kbd></td>\n<td style="text-align:left;">Save .ptn File</td>\n</tr>\n<tr>\n<td style="text-align:left;"><kbd>Ctrl or &#x2318;</kbd> + <kbd>o</kbd></td>\n<td style="text-align:left;">Open .ptn File</td>\n</tr>\n<tr>\n<td style="text-align:left;"><kbd>Ctrl or &#x2318;</kbd> + <kbd>d</kbd></td>\n<td style="text-align:left;">Load Default PTN</td>\n</tr>\n<tr>\n<td style="text-align:left;"><kbd>Ctrl or &#x2318;</kbd> + <kbd>z</kbd></td>\n<td style="text-align:left;">Undo</td>\n</tr>\n<tr>\n<td style="text-align:left;"><kbd>Ctrl or &#x2318;</kbd> + <kbd>Shift</kbd> + <kbd>z</kbd></td>\n<td style="text-align:left;">Redo</td>\n</tr>\n<tr>\n<td style="text-align:left;"><kbd>Ctrl or &#x2318;</kbd> + <kbd>y</kbd></td>\n<td style="text-align:left;">Redo</td>\n</tr>\n<tr>\n<td style="text-align:left;"><kbd>Ctrl or &#x2318;</kbd> + <kbd>Shift</kbd> + <kbd>/</kbd></td>\n<td style="text-align:left;">Help/About PTN Ninja</td>\n</tr>\n</tbody>\n</table>\n\n<hr />\n\n<h5 id="editmode-1">Edit Mode</h5>\n\n<table>\n<thead>\n<tr>\n<th style="text-align:left;">Key</th>\n<th style="text-align:left;">Action</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style="text-align:left;"><kbd>Ctrl or &#x2318;</kbd> + <kbd>Shift</kbd> + <kbd>c</kbd></td>\n<td style="text-align:left;">Trim to current ply*</td>\n</tr>\n</tbody>\n</table>\n\n<p>*This deletes all plies before and including the current ply, storing the current board position in a TPS tag in the header.</p>\n\n<hr />\n\n<h5 id="playmode-1">Play Mode</h5>\n\n<table>\n<thead>\n<tr>\n<th style="text-align:left;">Key</th>\n<th style="text-align:left;">Action</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style="text-align:left;"><kbd>Space</kbd></td>\n<td style="text-align:left;">Play/Pause</td>\n</tr>\n<tr>\n<td style="text-align:left;"><kbd>&larr;</kbd></td>\n<td style="text-align:left;">Previous Ply</td>\n</tr>\n<tr>\n<td style="text-align:left;"><kbd>&rarr;</kbd></td>\n<td style="text-align:left;">Next Ply</td>\n</tr>\n<tr>\n<td style="text-align:left;"><kbd>Shift</kbd> + <kbd>&larr;</kbd></td>\n<td style="text-align:left;">Previous Half-Ply</td>\n</tr>\n<tr>\n<td style="text-align:left;"><kbd>Shift</kbd> + <kbd>&rarr;</kbd></td>\n<td style="text-align:left;">Next Half-Ply</td>\n</tr>\n<tr>\n<td style="text-align:left;"><kbd>&uarr;</kbd></td>\n<td style="text-align:left;">Previous Move</td>\n</tr>\n<tr>\n<td style="text-align:left;"><kbd>&darr;</kbd></td>\n<td style="text-align:left;">Next Move</td>\n</tr>\n<tr>\n<td style="text-align:left;"><kbd>Ctrl or &#x2318;</kbd> + <kbd>&larr;</kbd></td>\n<td style="text-align:left;">First Ply</td>\n</tr>\n<tr>\n<td style="text-align:left;"><kbd>Ctrl or &#x2318;</kbd> + <kbd>&rarr;</kbd></td>\n<td style="text-align:left;">Last Ply</td>\n</tr>\n<tr>\n<td style="text-align:left;"><kbd>3</kbd></td>\n<td style="text-align:left;">Toggle 3D Board</td>\n</tr>\n<tr>\n<td style="text-align:left;"><kbd>s</kbd></td>\n<td style="text-align:left;">Toggle Board Shadows</td>\n</tr>\n<tr>\n<td style="text-align:left;"><kbd>Shift</kbd> + <kbd>a</kbd></td>\n<td style="text-align:left;">Toggle Board Animations</td>\n</tr>\n<tr>\n<td style="text-align:left;"><kbd>Shift</kbd> + <kbd>f</kbd></td>\n<td style="text-align:left;">Toggle Mode Button (FAB)</td>\n</tr>\n<tr>\n<td style="text-align:left;"><kbd>a</kbd></td>\n<td style="text-align:left;">Toggle Annotations</td>\n</tr>\n<tr>\n<td style="text-align:left;"><kbd>x</kbd></td>\n<td style="text-align:left;">Toggle Axis Labels</td>\n</tr>\n<tr>\n<td style="text-align:left;"><kbd>m</kbd></td>\n<td style="text-align:left;">Toggle Current Move</td>\n</tr>\n<tr>\n<td style="text-align:left;"><kbd>f</kbd></td>\n<td style="text-align:left;">Toggle Flat Counts</td>\n</tr>\n<tr>\n<td style="text-align:left;"><kbd>c</kbd></td>\n<td style="text-align:left;">Toggle Play Controls</td>\n</tr>\n<tr>\n<td style="text-align:left;"><kbd>r</kbd></td>\n<td style="text-align:left;">Toggle Road Connections</td>\n</tr>\n<tr>\n<td style="text-align:left;"><kbd>h</kbd></td>\n<td style="text-align:left;">Toggle Square Highlight</td>\n</tr>\n<tr>\n<td style="text-align:left;"><kbd>u</kbd></td>\n<td style="text-align:left;">Toggle Unplayed Pieces</td>\n</tr>\n</tbody>\n</table>\n\n<h4 id="legal">Legal</h4>\n\n<p>&copy; 2016 Craig Laparo</p>\n\n<p><a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png" /></a><br />This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/">Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International License</a>.</p>'}),define("text!app/../../sample.ptn",[],function(){return"[Site \"PlayTak.com\"]\n[Event \"Online Play\"]\n[Date \"2016.07.26\"]\n[Time \"14:52:50\"]\n[Player1 \"nqeron\"]\n[Player2 \"Anonymous\"]\n[Result \"0-F\"]\n[Size \"6\"]\n\n{Annotated by nqeron}\n\n1. a6 a1\n2. c3 {An opening that I like quite a bit} c2\n3. d3 {Center control and defend c3} Cb3\n4. c4 {L-structure} d4\n5. d2 {Extend down} c5\n6. b4 {Extend first} b5\n7. Cd5 {Then cap at a focal point} e4\n8. e3 a5\n9. e5 f4\n10. f3' a4\n11. 1e5-1 {Close structure?} a3\n12. b2 {Defend against N-S road} b1'\n13. 1d2<1' 1b1+1'\n14. 2c2<2 {Lure cap (anticipate Sb3)} 1b3-1\n15. Sb3 a2'\n16. Sb1 c2'\n17. 1b4<1' {Cut at root and regain tempo} b4\n18. 1c4<1' 1a3+1\n19. 2b4<2 Sb4? {Not sure about this response. I was expecting a5-, where I was thinking about Sb4}\n20. 5a4+23 {Run north} a4\n21. e5 {No tempo really, so defend here, and build structure} 1a4+1\n22. Sa4 2a5+2\n23. e2 {Considered Sb6, but wanted to press tempo} 6a6>15?\n24. e1' 5b2>212! {Did not anticipate this!}\n25. 1c3-1 c3\n26. 2c2+2 c4' {Almost missed this Tak}\n27. 2e4<2 f6'\n28. Sd6 {Maybe Se6 would be better?} 5c6-113\n29. 1b3>1 3e2+3\n30. 4c3+112 1b4>1\n31. 2c2>2 {This took a while to come up with. I wanted to get this out of range of the c4 wall and have a viable Tak threat potential} 2c4-2\n32. d1' 3c3>3\n33. 1d5-1 {Aim to capture large stack at d3} 4d3-4\n34. 4d4-31 4e3<4\n35. f1' Sc2\n36. e6 {Pins the d3 stack} b4\n37. Se3 e4'\n38. 1a4>1 b3\n39. b2 {Was between a3 and this} a3\n40. 1b2+1 d4'\n41. 1f3+1 {Cut at root and build a N-S on f/e} f5\n42. f3 d5\n43. 6d2>15' 1f5<1\n44. 4f2+112 2d2>11\n45. 1f3-1' 1e4>1\n46. 2f5-2' 2e2>2\n47. 4f4-13 Sf5\n48. e4' a6\n49. 5f2<14?? {Should have played 2c5>11! for the win!} a4\n"}),function(){function e(e){return"undefined"!=typeof e.value?"value":"undefined"!=typeof e.text?"text":"undefined"!=typeof e.textContent?"textContent":"innerText"}function t(){}function n(){}function i(e,t){var n=t.text.replace(/\r/g,"").length;if(e.compareEndPoints("StartToStart",t)<=0)return 0;if(e.compareEndPoints("StartToEnd",t)>=0)return n;for(var i=0;e.compareEndPoints("StartToStart",t)>0;++i,e.moveStart("character",-1));return i}function s(e,t){var n=t.text.replace(/\r/g,"").length;if(e.compareEndPoints("EndToEnd",t)>=0)return n;if(e.compareEndPoints("EndToStart",t)<=0)return 0;for(var i=0;e.compareEndPoints("EndToStart",t)>0;++i,e.moveEnd("character",-1));return i}function r(){}function o(){}function a(e,t){if(e.firstChild)return e.firstChild;if(e.nextSibling)return e.nextSibling;if(e===t)return null;for(;e.parentNode;){if(e=e.parentNode,e==t)return null;if(e.nextSibling)return e.nextSibling}return null}function l(e,t,n,i){if(!(t<=0)){var s=e[n?"startContainer":"endContainer"];for(3==s.nodeType&&(t+=e[n?"startOffset":"endOffset"]);s;){if(3==s.nodeType){var r=s.nodeValue.length;if(t<=r){if(e[n?"setStart":"setEnd"](s,t),t==r){for(var o=a(s,i);o&&3==o.nodeType&&0==o.nodeValue.length;o=a(o,i))e[n?"setStartAfter":"setEndAfter"](o);o&&1==o.nodeType&&"BR"==o.nodeName&&e[n?"setStartAfter":"setEndAfter"](o)}return}e[n?"setStartAfter":"setEndAfter"](s),t-=r}s=a(s,i)}}}function c(e,t){return e.compareBoundaryPoints(_,t)<=0?0:e.compareBoundaryPoints(y,t)>=0?t.toString().length:(e=e.cloneRange(),e.setEnd(t.endContainer,t.endOffset),t.toString().replace(/\r/g,"").length-e.toString().replace(/\r/g,"").length)}function u(e,t){return e.compareBoundaryPoints(g,t)>=0?t.toString().length:e.compareBoundaryPoints(m,t)<=0?0:(e=e.cloneRange(),e.setStart(t.startContainer,t.startOffset),e.toString().replace(/\r/g,"").length)}function d(){}var p="onfocusin"in document.createElement("input")?"focusin":"focus",h=document.createElement("div");h.appendChild(document.createTextNode("x-")),h.appendChild(document.createTextNode("x")),h.normalize();var f=3==h.firstChild.length;bililiteRange=function(t,i){function s(e){e&&9==e.which?a._nativeSelect(a._nativeRange(t.bililiteRangeSelection)):t.bililiteRangeSelection=a._nativeSelection()}var a;if(i)a=new d;else if(window.getSelection&&t.setSelectionRange)try{t.selectionStart,a=new r}catch(e){a=new d}else a=window.getSelection?new o:document.selection?new n:new d;if(a._el=t,a._doc=t.ownerDocument,a._win="defaultView"in a._doc?a._doc.defaultView:a._doc.parentWindow,a._textProp=e(t),a._bounds=[0,a.length()],!("bililiteRangeMouseDown"in a._doc)){var l={_el:a._doc};a._doc.bililiteRangeMouseDown=!1,bililiteRange.fn.listen.call(l,"mousedown",function(){a._doc.bililiteRangeMouseDown=!0}),bililiteRange.fn.listen.call(l,"mouseup",function(){a._doc.bililiteRangeMouseDown=!1})}if("bililiteRangeSelection"in t||(s(),"onbeforedeactivate"in t?a.listen("beforedeactivate",s):a.listen("mouseup",s).listen("keyup",s),a.listen(p,function(){a._doc.bililiteRangeMouseDown||a._nativeSelect(a._nativeRange(t.bililiteRangeSelection))})),!("oninput"in t)){var c=function(){a.dispatch({type:"input",bubbles:!0})};a.listen("keyup",c),a.listen("cut",c),a.listen("paste",c),a.listen("drop",c),t.oninput="patched"}return a},t.prototype={length:function(){return this._el[this._textProp].replace(/\r/g,"").length},bounds:function(e){if(bililiteRange.bounds[e])this._bounds=bililiteRange.bounds[e].apply(this);else{if(!e){var t=[Math.max(0,Math.min(this.length(),this._bounds[0])),Math.max(0,Math.min(this.length(),this._bounds[1]))];return t[1]=Math.max(t[0],t[1]),t}this._bounds=e}return this},select:function(){var e=this._el.bililiteRangeSelection=this.bounds();return this._el===this._doc.activeElement&&this._nativeSelect(this._nativeRange(e)),this.dispatch({type:"select",bubbles:!0}),this},text:function(e,t){if(arguments.length){var n=this.bounds();this._el;return this.dispatch({type:"beforeinput",bubbles:!0,data:e,bounds:n}),this._nativeSetText(e,this._nativeRange(n)),"start"==t?this.bounds([n[0],n[0]]):"end"==t?this.bounds([n[0]+e.length,n[0]+e.length]):"all"==t&&this.bounds([n[0],n[0]+e.length]),this.dispatch({type:"input",bubbles:!0,data:e,bounds:n}),this}return this._nativeGetText(this._nativeRange(this.bounds())).replace(/\r/g,"")},insertEOL:function(){return this._nativeEOL(),this._bounds=[this._bounds[0]+1,this._bounds[0]+1],this},sendkeys:function(e){function t(e,t){/^{[^}]*}$/.test(t)&&(t=t.slice(1,-1));for(var n=0;n<t.length;++n){var i=t.charCodeAt(n);e.dispatch({type:"keypress",bubbles:!0,keyCode:i,which:i,charCode:i})}e.text(t,"end")}var n=this;return this.data().sendkeysOriginalText=this.text(),this.data().sendkeysBounds=void 0,e.replace(/{[^}]*}|[^{]+|{/g,function(e){(bililiteRange.sendkeys[e]||t)(n,e,t)}),this.bounds(this.data().sendkeysBounds),this.dispatch({type:"sendkeys",which:e}),this},top:function(){return this._nativeTop(this._nativeRange(this.bounds()))},scrollIntoView:function(e){var t=this.top();return(this._el.scrollTop>t||this._el.scrollTop+this._el.clientHeight<t)&&(e?e.call(this._el,t):this._el.scrollTop=t),this},wrap:function(e){return this._nativeWrap(e,this._nativeRange(this.bounds())),this},selection:function(e){return arguments.length?this.bounds("selection").text(e,"end").select():this.bounds("selection").text()},clone:function(){return bililiteRange(this._el).bounds(this.bounds())},all:function(e,t){return arguments.length?(this.dispatch({type:"beforeinput",bubbles:!0,data:e}),t&&this.data().highlighter?this.data().highlighter(this,e):(this._el[this._textProp]=e,this.dispatch({type:"input",bubbles:!0,data:e})),this):this._el[this._textProp].replace(/\r/g,"")},element:function(){return this._el},dispatch:function(e){e=e||{};var t=document.createEvent?document.createEvent("CustomEvent"):this._doc.createEventObject();t.initCustomEvent&&t.initCustomEvent(e.type,!!e.bubbles,!!e.cancelable,e.detail);for(var n in e)t[n]=e[n];var i=this._el;return setTimeout(function(){try{i.dispatchEvent?i.dispatchEvent(t):i.fireEvent("on"+e.type,document.createEventObject())}catch(r){var n=i["listen"+e.type];if(n)for(var s=0;s<n.length;++s)n[s].call(i,t)}},0),this},listen:function(e,t){var n=this._el;if(n.addEventListener)n.addEventListener(e,t);else{n.attachEvent("on"+e,t);var i=n["listen"+e]=n["listen"+e]||[];i.push(t)}return this},dontlisten:function(e,t){var n=this._el;if(n.removeEventListener)n.removeEventListener(e,t);else try{n.detachEvent("on"+e,t)}catch(r){var i=n["listen"+e];if(i)for(var s=0;s<i.length;++s)i[s]===t&&(i[s]=function(){})}return this}},bililiteRange.fn=t.prototype,bililiteRange.extend=function(e){for(fn in e)t.prototype[fn]=e[fn]},bililiteRange.bounds={all:function(){return[0,this.length()]},start:function(){return[0,0]},end:function(){return[this.length(),this.length()]},selection:function(){return this._el===this._doc.activeElement?(this.bounds("all"),this._nativeSelection()):this._el.bililiteRangeSelection}},bililiteRange.sendkeys={"{enter}":function(e){e.dispatch({type:"keypress",bubbles:!0,keyCode:"\n",which:"\n",charCode:"\n"}),e.insertEOL()},"{tab}":function(e,t,n){n(e,"\t")},"{newline}":function(e,t,n){n(e,"\n")},"{backspace}":function(e){var t=e.bounds();t[0]==t[1]&&e.bounds([t[0]-1,t[0]]),e.text("","end")},"{del}":function(e){var t=e.bounds();t[0]==t[1]&&e.bounds([t[0],t[0]+1]),e.text("","end")},"{rightarrow}":function(e){var t=e.bounds();t[0]==t[1]&&++t[1],e.bounds([t[1],t[1]])},"{leftarrow}":function(e){var t=e.bounds();t[0]==t[1]&&--t[0],e.bounds([t[0],t[0]])},"{selectall}":function(e){e.bounds("all")},"{selection}":function(e){for(var t=e.data().sendkeysOriginalText,n=0;n<t.length;++n){var i=t.charCodeAt(n);e.dispatch({type:"keypress",bubbles:!0,keyCode:i,which:i,charCode:i})}e.text(t,"end")},"{mark}":function(e){e.data().sendkeysBounds=e.bounds()}},bililiteRange.sendkeys["{Enter}"]=bililiteRange.sendkeys["{enter}"],bililiteRange.sendkeys["{Backspace}"]=bililiteRange.sendkeys["{backspace}"],bililiteRange.sendkeys["{Delete}"]=bililiteRange.sendkeys["{del}"],bililiteRange.sendkeys["{ArrowRight}"]=bililiteRange.sendkeys["{rightarrow}"],bililiteRange.sendkeys["{ArrowLeft}"]=bililiteRange.sendkeys["{leftarrow}"],n.prototype=new t,n.prototype._nativeRange=function(e){var t;return"INPUT"==this._el.tagName?t=this._el.createTextRange():(t=this._doc.body.createTextRange(),t.moveToElementText(this._el)),e&&(e[1]<0&&(e[1]=0),e[0]>this.length()&&(e[0]=this.length()),e[1]<t.text.replace(/\r/g,"").length&&(t.moveEnd("character",-1),t.moveEnd("character",e[1]-t.text.replace(/\r/g,"").length)),e[0]>0&&t.moveStart("character",e[0])),t},n.prototype._nativeSelect=function(e){e.select()},n.prototype._nativeSelection=function(){var e=this._nativeRange(),t=this.length(),n=this._doc.selection.createRange();try{return[i(n,e),s(n,e)]}catch(e){return n.parentElement().sourceIndex<this._el.sourceIndex?[0,0]:[t,t]}},n.prototype._nativeGetText=function(e){return e.text},n.prototype._nativeSetText=function(e,t){t.text=e},n.prototype._nativeEOL=function(){"value"in this._el?this.text("\n"):this._nativeRange(this.bounds()).pasteHTML("\n<br/>")},n.prototype._nativeTop=function(e){var t=this._nativeRange([0,0]);return e.boundingTop-t.boundingTop},n.prototype._nativeWrap=function(e,t){var n=document.createElement("div");n.appendChild(e);var i=n.innerHTML.replace("><",">"+t.htmlText+"<");t.pasteHTML(i)},r.prototype=new t,r.prototype._nativeRange=function(e){return e||[0,this.length()]},r.prototype._nativeSelect=function(e){this._el.setSelectionRange(e[0],e[1])},r.prototype._nativeSelection=function(){return[this._el.selectionStart,this._el.selectionEnd]},r.prototype._nativeGetText=function(e){return this._el.value.substring(e[0],e[1])},r.prototype._nativeSetText=function(e,t){var n=this._el.value;this._el.value=n.substring(0,t[0])+e+n.substring(t[1])},r.prototype._nativeEOL=function(){this.text("\n")},r.prototype._nativeTop=function(e){var t=this._el.cloneNode(!0);t.style.visibility="hidden",t.style.position="absolute",this._el.parentNode.insertBefore(t,this._el),t.style.height="1px",t.value=this._el.value.slice(0,e[0]);var n=t.scrollHeight;return t.value="X",n-=t.scrollHeight,t.parentNode.removeChild(t),n},r.prototype._nativeWrap=function(){throw new Error("Cannot wrap in a text element")},o.prototype=new t,o.prototype._nativeRange=function(e){var t=this._doc.createRange();return t.selectNodeContents(this._el),e&&(l(t,e[0],!0,this._el),t.collapse(!0),l(t,e[1]-e[0],!1,this._el)),t},o.prototype._nativeSelect=function(e){this._win.getSelection().removeAllRanges(),this._win.getSelection().addRange(e)},o.prototype._nativeSelection=function(){var e=this._nativeRange();if(0==this._win.getSelection().rangeCount)return[this.length(),this.length()];var t=this._win.getSelection().getRangeAt(0);return[c(t,e),u(t,e)]},o.prototype._nativeGetText=function(e){return String.prototype.slice.apply(this._el.textContent,this.bounds())},o.prototype._nativeSetText=function(e,t){t.deleteContents(),t.insertNode(this._doc.createTextNode(e)),f&&this._el.normalize()},o.prototype._nativeEOL=function(){var e=this._nativeRange(this.bounds());e.deleteContents();var t=this._doc.createElement("br");t.setAttribute("_moz_dirty",""),e.insertNode(t),e.insertNode(this._doc.createTextNode("\n")),e.collapse(!1)},o.prototype._nativeTop=function(e){if(0==this.length)return 0;if(""==e.toString()){var t=this._doc.createTextNode("X");e.insertNode(t)}var n=this._nativeRange([0,1]),i=e.getBoundingClientRect().top-n.getBoundingClientRect().top;return t&&t.parentNode.removeChild(t),i},o.prototype._nativeWrap=function(e,t){t.surroundContents(e)};var _=0,m=1,g=2,y=3;d.prototype=new t,d.prototype._nativeRange=function(e){return e||[0,this.length()]},d.prototype._nativeSelect=function(e){},d.prototype._nativeSelection=function(){return[0,0]},d.prototype._nativeGetText=function(e){return this._el[this._textProp].substring(e[0],e[1])},d.prototype._nativeSetText=function(e,t){var n=this._el[this._textProp];this._el[this._textProp]=n.substring(0,t[0])+e+n.substring(t[1])},d.prototype._nativeEOL=function(){this.text("\n")},d.prototype._nativeTop=function(){return 0},d.prototype._nativeWrap=function(){throw new Error("Wrapping not implemented")};var v=[];bililiteRange.fn.data=function(){var e=this.element().bililiteRangeData;return void 0==e&&(e=this.element().bililiteRangeData=v.length,v[e]=new b(this)),v[e]};try{Object.defineProperty({},"foo",{});var b=function(e){Object.defineProperty(this,"values",{value:{}}),Object.defineProperty(this,"sourceRange",{value:e}),Object.defineProperty(this,"toJSON",{value:function(){var e={};for(var t in b.prototype)t in this.values&&(e[t]=this.values[t]);return e}}),Object.defineProperty(this,"all",{get:function(){var e={};for(var t in b.prototype)e[t]=this[t];return e}})};b.prototype={},Object.defineProperty(b.prototype,"values",{value:{}}),Object.defineProperty(b.prototype,"monitored",{value:{}}),bililiteRange.data=function(e,t){t=t||{};var n=Object.getOwnPropertyDescriptor(b.prototype,e)||{};"enumerable"in t&&(n.enumerable=!!t.enumerable),"enumerable"in n||(n.enumerable=!0),"value"in t&&(b.prototype.values[e]=t.value),"monitored"in t&&(b.prototype.monitored[e]=t.monitored),n.configurable=!0,n.get=function(){return e in this.values?this.values[e]:b.prototype.values[e]},n.set=function(t){this.values[e]=t,b.prototype.monitored[e]&&this.sourceRange.dispatch({type:"bililiteRangeData",bubbles:!0,detail:{name:e,value:t}})},Object.defineProperty(b.prototype,e,n)}}catch(e){b=function(e){this.sourceRange=e},b.prototype={},bililiteRange.data=function(e,t){"value"in t&&(b.prototype[e]=t.value)}}}(),Array.prototype.forEach||(Array.prototype.forEach=function(e){"use strict";if(void 0===this||null===this)throw new TypeError;var t=Object(this),n=t.length>>>0;if("function"!=typeof e)throw new TypeError;for(var i=arguments.length>=2?arguments[1]:void 0,s=0;s<n;s++)s in t&&e.call(i,t[s],s,t)}),define("bililiteRange",function(){}),bililiteRange&&function(){function e(e){var n=e.data().undos;if(n)return n;var s=new t(e);return i(e),s}function t(e){this.text=e.all();var t=e.data().undos;t&&this.text==t.text||(this.bounds=e.bounds("selection").bounds()||e.last_bounds,this.undo=this,this.redo=this,t&&(this.undo=t,t.redo=this),e.data().undos=this)}function n(e,t,n){n.dispatch({type:t}),e=e[t],e.lastevent=t,n.data().undos=e,n.all(e.text,!0).bounds(e.bounds||[0,0]).select()}function i(n){n.listen("input",function(){var i=e(n),s=(n.element(),i.lastevent);switch(delete i.lastevent,s){case"undo":case"redo":return;case"keypress":"keypress"==i.penultimateevent&&(n.data().undos=i.undo)}new t(n).penultimateevent=s}).listen("keypress",function(t){if(!(t.which<32||t.altKey||t.altGraphKey||t.ctrlKey||t.metaKey)){var i=n.bounds("selection").bounds();if(i[0]==i[1]){var s=e(n);s.bounds[0]==i[0]&&(s.lastevent="keypress")}}})}bililiteRange.data("undos",{enumerable:!1}),bililiteRange.fn.undo=function(t){0==arguments.length&&(t=1);var i=e(this);if(t>0)for(var s=0;s<t;++s)n(i,"undo",this);else if(t<0)for(s=0;s>t;--s)n(i,"redo",this);return this},bililiteRange.fn.pushstate=function(){new t(this)},bililiteRange.undo=function(e){bililiteRange(e.target).undo(),e.preventDefault()},bililiteRange.redo=function(e){bililiteRange(e.target).undo(-1),e.preventDefault()}}(),define("bililiteRange.undo",function(){}),bililiteRange.fancyText=function(e,t,n){function i(e,t){if(!t)return e;var n;return function(){var i=this,s=arguments;clearTimeout(n),n=setTimeout(function(){e.apply(i,s)},t)}}function s(){o.bounds("selection"),/\n$/.test(e.textContent)||(e.textContent+="\n"),t(e)&&o.select()}if("textarea"==e.tagName.toLowerCase()){var r=document.createElement("pre");r.setAttribute("contenteditable",!0),[].forEach.call(e.attributes,function(e){r.setAttribute(e.name,e.value)}),r.textContent=e.value,e.parentNode.replaceChild(r,e),e=r}var o=bililiteRange(e);return t&&(o.data().highlighter=t,s(),o.listen("input",i(s,n)),o.listen("replace",s)),o.listen("paste",function(e){o.bounds("selection").text(e.clipboardData.getData("text/plain").replace(/\r/g,""),"end").select(),
e.preventDefault()}),o.listen("keydown",function(e){13==e.keyCode&&(o.bounds("selection").text("\n","end",o.data().autoindent).select(),e.preventDefault())}),e},define("bililiteRange.fancytext",function(){}),function(){function e(e){for(;e;){if("DIALOG"==e.nodeName.toUpperCase())return e;e=e.parentElement}return null}function t(e){e&&e.blur&&e!=document.body&&e.blur()}function n(e,t){for(var n=0;n<e.length;++n)if(e[n]==t)return!0;return!1}function i(e){if(this.dialog_=e,this.replacedStyleTop_=!1,this.openAsModal_=!1,e.hasAttribute("role")||e.setAttribute("role","dialog"),e.show=this.show.bind(this),e.showModal=this.showModal.bind(this),e.close=this.close.bind(this),"returnValue"in e||(e.returnValue=""),this.maybeHideModal=this.maybeHideModal.bind(this),"MutationObserver"in window){var t=new MutationObserver(this.maybeHideModal);t.observe(e,{attributes:!0,attributeFilter:["open"]})}else e.addEventListener("DOMAttrModified",this.maybeHideModal);Object.defineProperty(e,"open",{set:this.setOpen.bind(this),get:e.hasAttribute.bind(e,"open")}),this.backdrop_=document.createElement("div"),this.backdrop_.className="backdrop",this.backdropClick_=this.backdropClick_.bind(this)}var s=window.CustomEvent;s&&"object"!=typeof s||(s=function(e,t){t=t||{};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,!!t.bubbles,!!t.cancelable,t.detail||null),n},s.prototype=window.Event.prototype),i.prototype={get dialog(){return this.dialog_},maybeHideModal:function(){this.openAsModal_&&(this.dialog_.hasAttribute("open")&&document.body.contains(this.dialog_)||(this.openAsModal_=!1,this.dialog_.style.zIndex="",this.replacedStyleTop_&&(this.dialog_.style.top="",this.replacedStyleTop_=!1),this.backdrop_.removeEventListener("click",this.backdropClick_),this.backdrop_.parentElement&&this.backdrop_.parentElement.removeChild(this.backdrop_),r.dm.removeDialog(this)))},setOpen:function(e){e?this.dialog_.hasAttribute("open")||this.dialog_.setAttribute("open",""):(this.dialog_.removeAttribute("open"),this.maybeHideModal())},backdropClick_:function(e){var t=document.createEvent("MouseEvents");t.initMouseEvent(e.type,e.bubbles,e.cancelable,window,e.detail,e.screenX,e.screenY,e.clientX,e.clientY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,e.button,e.relatedTarget),this.dialog_.dispatchEvent(t),e.stopPropagation()},focus_:function(){var e=this.dialog_.querySelector("[autofocus]:not([disabled])");if(!e){var n=["button","input","keygen","select","textarea"],i=n.map(function(e){return e+":not([disabled])"});i.push('[tabindex]:not([disabled]):not([tabindex=""])'),e=this.dialog_.querySelector(i.join(", "))}t(document.activeElement),e&&e.focus()},updateZIndex:function(e,t){this.backdrop_.style.zIndex=e,this.dialog_.style.zIndex=t},show:function(){this.dialog_.open||(this.setOpen(!0),this.focus_())},showModal:function(){if(this.dialog_.hasAttribute("open"))throw new Error("Failed to execute 'showModal' on dialog: The element is already open, and therefore cannot be opened modally.");if(!document.body.contains(this.dialog_))throw new Error("Failed to execute 'showModal' on dialog: The element is not in a Document.");if(!r.dm.pushDialog(this))throw new Error("Failed to execute 'showModal' on dialog: There are too many open modal dialogs.");this.show(),this.openAsModal_=!0,r.needsCentering(this.dialog_)?(console.info("repositioning what"),r.reposition(this.dialog_),this.replacedStyleTop_=!0):(console.info("NOT repositioning"),this.replacedStyleTop_=!1),this.backdrop_.addEventListener("click",this.backdropClick_),this.dialog_.parentNode.insertBefore(this.backdrop_,this.dialog_.nextSibling),this.dialog_.addEventListener("DOMNodeRemoved",function(e){console.info("dialog itself removed",e)})},close:function(e){if(!this.dialog_.hasAttribute("open"))throw new Error("Failed to execute 'close' on dialog: The element does not have an 'open' attribute, and therefore cannot be closed.");this.setOpen(!1),void 0!==e&&(this.dialog_.returnValue=e);var t=new s("close",{bubbles:!1,cancelable:!1});this.dialog_.dispatchEvent(t)}};var r={};r.reposition=function(e){var t=document.body.scrollTop||document.documentElement.scrollTop,n=t+(window.innerHeight-e.offsetHeight)/2;e.style.top=Math.max(t,n)+"px"},r.isInlinePositionSetByStylesheet=function(e){for(var t=0;t<document.styleSheets.length;++t){var i=document.styleSheets[t],s=null;try{s=i.cssRules}catch(e){}if(s)for(var r=0;r<s.length;++r){var o=s[r],a=null;try{a=document.querySelectorAll(o.selectorText)}catch(e){}if(a&&n(a,e)){var l=o.style.getPropertyValue("top"),c=o.style.getPropertyValue("bottom");if(l&&"auto"!=l||c&&"auto"!=c)return!0}}}return!1},r.needsCentering=function(e){var t=window.getComputedStyle(e);return"absolute"==t.position&&(!("auto"!=e.style.top&&""!=e.style.top||"auto"!=e.style.bottom&&""!=e.style.bottom)&&!r.isInlinePositionSetByStylesheet(e))},r.forceRegisterDialog=function(e){if(e.showModal&&console.warn("This browser already supports <dialog>, the polyfill may not work correctly",e),"DIALOG"!=e.nodeName.toUpperCase())throw new Error("Failed to register dialog: The element is not a dialog.");new i(e)},r.registerDialog=function(e){e.showModal||r.forceRegisterDialog(e)},r.DialogManager=function(){this.pendingDialogStack=[],this.overlay=document.createElement("div"),this.overlay.className="_dialog_overlay",this.overlay.addEventListener("click",function(e){e.stopPropagation()}),this.handleKey_=this.handleKey_.bind(this),this.handleFocus_=this.handleFocus_.bind(this),this.handleRemove_=this.handleRemove_.bind(this),this.zIndexLow_=1e5,this.zIndexHigh_=100150},r.DialogManager.prototype.topDialogElement=function(){if(this.pendingDialogStack.length){var e=this.pendingDialogStack[this.pendingDialogStack.length-1];return e.dialog}return null},r.DialogManager.prototype.blockDocument=function(){document.body.appendChild(this.overlay),document.body.addEventListener("focus",this.handleFocus_,!0),document.addEventListener("keydown",this.handleKey_),document.addEventListener("DOMNodeRemoved",this.handleRemove_)},r.DialogManager.prototype.unblockDocument=function(){document.body.removeChild(this.overlay),document.body.removeEventListener("focus",this.handleFocus_,!0),document.removeEventListener("keydown",this.handleKey_),document.removeEventListener("DOMNodeRemoved",this.handleRemove_)},r.DialogManager.prototype.updateStacking=function(){for(var e=this.zIndexLow_,t=0;t<this.pendingDialogStack.length;t++)t==this.pendingDialogStack.length-1&&(this.overlay.style.zIndex=e++),this.pendingDialogStack[t].updateZIndex(e++,e++)},r.DialogManager.prototype.handleFocus_=function(n){var i=e(n.target);if(i!=this.topDialogElement())return n.preventDefault(),n.stopPropagation(),t(n.target),!1},r.DialogManager.prototype.handleKey_=function(e){if(27==e.keyCode){e.preventDefault(),e.stopPropagation();var t=new s("cancel",{bubbles:!1,cancelable:!0}),n=this.topDialogElement();n.dispatchEvent(t)&&n.close()}},r.DialogManager.prototype.handleRemove_=function(e){if("DIALOG"==e.target.nodeName.toUpperCase()){var t=e.target;t.open&&(console.info("dialog is removed",e),this.pendingDialogStack.some(function(e){if(e.dialog==t)return e.maybeHideModal(),!0}))}},r.DialogManager.prototype.pushDialog=function(e){var t=(this.zIndexHigh_-this.zIndexLow_)/2-1;return!(this.pendingDialogStack.length>=t)&&(this.pendingDialogStack.push(e),1==this.pendingDialogStack.length&&this.blockDocument(),this.updateStacking(),!0)},r.DialogManager.prototype.removeDialog=function(e){var t=this.pendingDialogStack.indexOf(e);t!=-1&&(this.pendingDialogStack.splice(t,1),this.updateStacking(),0==this.pendingDialogStack.length&&this.unblockDocument())},r.dm=new r.DialogManager,document.addEventListener("submit",function(t){var n=t.target;if(n&&n.hasAttribute("method")&&"dialog"==n.getAttribute("method").toLowerCase()){t.preventDefault();var i=e(t.target);if(i){var s,r=[document.activeElement,t.explicitOriginalTarget],o=["BUTTON","INPUT"];r.some(function(e){if(e&&e.form==t.target&&o.indexOf(e.nodeName.toUpperCase())!=-1)return s=e.value,!0}),i.close(s)}}},!0),r.forceRegisterDialog=r.forceRegisterDialog,r.registerDialog=r.registerDialog,"function"==typeof define&&"amd"in define?define("dialog-polyfill",[],function(){return r}):"object"==typeof module&&"object"==typeof module.exports?module.exports=r:window.dialogPolyfill=r}(),define("app/app",["i18n!nls/main","app/config","app/hotkeys","app/menu","app/game","app/board","mdown!../../readme.md","text!../../sample.ptn","lodash","jquery","bililiteRange","bililiteRange.undo","bililiteRange.fancytext","dialog-polyfill"],function(e,t,n,i,s,r,o,a,l,c){var u=location.origin+location.pathname,d=new Date,p=d.getFullYear()+"."+l.padStart(d.getMonth()+1,2,0)+"."+l.padStart(d.getDate(),2,0),h="a".charCodeAt(0),f={piece_counts:{3:{F:10,C:0,total:10},4:{F:15,C:0,total:15},5:{F:21,C:1,total:22},6:{F:30,C:1,total:31},7:{F:40,C:2,total:42},8:{F:50,C:2,total:52},9:{F:60,C:3,total:63}},config:t,hotkeys:n,menu:i,mode:"play",board:new r,game:new s(new r),default_ptn:'[Date "'+p+'"]\n[Player1 "'+e.Player1_name+'"]\n[Player2 "'+e.Player2_name+'"]\n[Result ""]\n[Size "5"]\n\n1. ',sample_ptn:a,is_in_iframe:top.location!=self.location,is_blink:(window.chrome||window.Intl&&Intl.v8BreakIterator)&&"CSS"in window,hash:location.hash.substr(1),tpl:{dialog:l.template('<dialog class="mdl-dialog"><h3 class="mdl-dialog__title"><%=title%></h3><div class="mdl-dialog__content"><%=content%></div><div class="mdl-dialog__actions"><% _.each(actions, function (action) { %><button type="button" class="mdl-button mdl-button--flat<%= action.className ? " "+action.className : "" %>"<% _.each(_.omit(action, ["label", "value", "callback", "className"]), function(value, key) { %><% if (_.isBoolean(value)) { %> <%= value ? key : "" %><% } else { %> <%=key%>="<%-value%>"<% } %><% }) %>><%=action.label%></button><% }) %></div></dialog>'),board_settings:l.template("")},current_dialogs:[],dialog:function(e,t,n,i){var s,r=this,o=c(this.tpl.dialog({title:e,content:t,actions:n||[]})).addClass(i).appendTo(this.$body),a=o[0],u=o.find(".mdl-dialog__actions button");return a.showModal||dialogPolyfill.registerDialog(a),l.each(n,function(e,t){var n=l.has(e,"value")?e.value:t,i=!!l.has(e,"callback")&&e.callback;s=u.eq(t),u.eq(t).click(function(){a.close(),l.pull(r.current_dialogs,a),o.remove()}),i&&s.click(function(){i(n)})}),a.showModal(),this.current_dialogs.push(a),a},confirm:function(t,n){var i=this.dialog(t.title,t.content,[{label:e.OK,value:!0,callback:n},{label:e.Cancel,value:!1,callback:n}]);return i},about:function(){this.dialog(e.app_title,o,[{label:e.Close}],"scrolling")},board_settings:function(){this.dialog(e.Board_Settings,this.tpl.board_settings({t:e,config:this.config}),[{label:e.Close}],"scrolling")},revert_game:function(t){t===!0?(this.game.revert(),this.clear_undo_history()):l.isUndefined(t)&&this.confirm(e.confirm.Revert_Game,this.revert_game)},update_after_parse:function(e){f.update_ptn(),f.game.is_valid&&(f.board.init(f.game),f.game.is_editing&&f.$focus&&!document.contains(f.$focus[0])&&f.set_position_from_caret()),f.update_permalink(),e&&f.clear_undo_history(),f.game.is_editing&&f.game.caret_moved&&l.defer(f.restore_caret)},update_permalink:function(){var t,n;t="#"+f.game.ptn_compressed,n=(u+t).length,f.$permalink.attr({href:t,title:e.n_characters({n:n})})},update_ptn:function(){f.$ptn.html(f.game.print()),f.$ptn.$header=f.$ptn.find("span.header"),f.$ptn.$header.$tps=f.$ptn.$header.find("span.value.tps"),f.$ptn.$body=f.$ptn.find("span.body"),f.$ptn.$ply=f.$ptn.$body.find(".ply.active:first")},set_active_ply:function(e){f.$ptn.$ply=e?f.$ptn.find('.ply[data-index="'+e.index+'"]:first'):null,f.$ptn.$ply&&f.$ptn.$ply.length&&f.$ptn.$ply.addClass("active")},update_after_ply:function(e){f.$ptn.$ply&&f.$ptn.$ply.length?f.$ptn.$ply.data("model")!=e&&(f.$ptn.$ply.removeClass("active"),f.set_active_ply(e)):f.set_active_ply(e),f.board.ply_is_done?f.$html.addClass("ply-is-done"):f.$html.removeClass("ply-is-done"),f.board.show_comments(e),f.board.update_ptn(),f.board.update_active_squares(),f.board.update_valid_squares(),f.$html.removeClass("p1 p2"),f.board.is_eog||f.$html.addClass("p"+f.board.turn)},update_after_ply_insert:function(e,t){f.board.tmp_ply=null,t?(f.board.ply_index=Math.min(f.game.plys.length-1,e),f.board.ply_is_done=!0,f.board.turn=1==f.get_current_ply().player?2:1,f.board.check_game_end(),f.update_ptn(),f.update_after_ply(f.get_current_ply())):(f.board.go_to_ply(e,!0),f.board.check_game_end()&&f.update_after_ply(f.get_current_ply()),f.update_ptn()),f.update_permalink(),f.range.pushstate(),f.scroll_to_ply()},resize:function(e){f.board.resize(e),f.restore_scroll_position()},rotate_board:function(e){if(l.isBoolean(e))return void t.set("board_rotation",t.defaults.board_rotation);var n,i,s;e.originalEvent.touches?(n=(e.originalEvent.touches[0].clientX+e.originalEvent.touches[1].clientX)/2,i=(e.originalEvent.touches[0].clientY+e.originalEvent.touches[1].clientY)/2):(n=e.clientX,i=e.clientY),n=Math.max(-1,Math.min(1,f.dragging.rotation[0]+f.config.board_rotate_sensitivity*(n-f.dragging.x)/f.board.width)),i=Math.max(-1,Math.min(1,f.dragging.rotation[1]-f.config.board_rotate_sensitivity*(i-f.dragging.y)/f.board.width)),Math.abs(n)<.05&&(n=0),Math.abs(i)<.05&&(i=0),s=Math.sqrt(n*n+i*i),t.set("board_rotation",[n,i,s]),e.preventDefault(),e.stopPropagation()},set_editor_width:function(e,t){var n=e-t-16;n<340?this.is_side_by_side&&(this.is_side_by_side=!1,this.$editor.css("width","100%"),this.$html.removeClass("side-by-side")):(this.is_side_by_side||(this.is_side_by_side=!0,this.$html.addClass("side-by-side")),this.$editor.css("width",n+"px"))},save_caret:function(){this.range.last_bounds=this.range.bounds("selection").bounds()},restore_caret:function(){this.range.last_bounds?this.set_caret(this.range.last_bounds):this.game.plys.length?this.set_caret(this.game.get_bounds(this.get_current_ply())[1]):this.set_caret("end")},move_caret:function(e){this.range.last_bounds&&(l.isArray(e)?(e[0]+=this.range.last_bounds[0],e[1]+=this.range.last_bounds[1]):e=[this.range.last_bounds[0]+e,this.range.last_bounds[1]+e],this.set_caret(e))},set_caret:function(e,t){l.isNumber(e)&&(e=[e,e]),this.range.bounds(e).select(),this.save_caret(),this.game.is_editing&&(this.$ptn.focus(),t||this.range.scrollIntoView())},select_token_text:function(e){this.set_caret(this.game.get_bounds(e))},save_scroll_position:function(){var e,t,n,i=(f.$ptn.scrollTop(),f.$ptn.height()),s=f.$ptn.children(".header"),r=f.$ptn.children(".body"),o=r.offset();if(e=f.$focus?f.$focus.offset().top:void 0,f.$focus&&e>0&&e<i)f.$scroll_middle=f.$focus,f.scroll_middle_offset=f.$scroll_middle.offset().top;else{for(t=o&&o.top<=0?r.children():s.children(),n=0;n<t.length&&t.eq(n).offset().top<0;n++);f.$scroll_middle=t.eq(n?n-1:0),f.$scroll_middle.length&&(f.scroll_middle_offset=f.$scroll_middle.offset().top)}},restore_scroll_position:function(){f.$scroll_middle&&f.$ptn.scrollTop(f.$ptn.scrollTop()+f.$scroll_middle.offset().top-f.scroll_middle_offset)},clear_scroll_position:function(){f.$scroll_middle=null},clear_undo_history:function(){f.range.data().undos=!1,f.range.pushstate()},undo:function(e){var t=f.range.data().undos;t&&t.undo!=t&&f.range.undo(),e&&e.preventDefault()},redo:function(e){var t=f.range.data().undos;t&&t.redo!=t&&f.range.undo(-1),e&&e.preventDefault()},scroll_to_ply:function(){var e;this.$ptn.$ply&&(e=this.$ptn.$ply.offset())&&this.$ptn.scrollTop(this.$ptn.scrollTop()+e.top-(window.innerHeight-this.$ptn.$ply.height())/2)},set_position_from_caret:function(e){var t,n,i,s,r,o,a,u;if(f.game.is_editing&&!f.dragging)if(e&&f.save_caret(),t=getSelection().focusNode.parentNode,t.nodeType==Node.TEXT_NODE&&t.nextSibling&&(t=t.nextSibling),"opening quote"==t.className&&(t=t.nextSibling),n=c(t),f.$focus=n,f.$ptn.$body[0].contains(t))n.hasClass("body")?i=n.find(".ply").last():n.hasClass("text")?(n=n.closest(".comment"),i=n.prevAll(".ply")):n.hasClass("space")?i=n.next(".ply"):n.is(".win, .loss, .draw")?(n=n.closest(".result"),i=n.prevAll(".ply")):n.hasClass("invalid")?i=n.prevAll(".ply"):n.is(".invalid .first-letter")?(n=n.parent(),i=n.prevAll(".ply")):i=n.closest(".ply"),i.length||(i=n.prevAll(".ply")),i.length||(i=n.nextAll(".ply")),s=1*i.data("index"),l.isInteger(s)&&f.board.go_to_ply(s,f.board.ply_index!=s||!f.board.ply_is_done||!e||"mouseup"!=e.type);else if(f.$ptn.$header.$tps.length&&(f.$ptn.$header.$tps[0]==t||f.$ptn.$header.$tps[0].contains(t))){if(r=n.hasClass("separator")?n.next().closest(".square"):f.$ptn.$header.$tps[0]==t?c(f.$ptn.$header.$tps[0].querySelector(".square")):n.closest(".square"),r&&r.length&&(a=f.board.squares[r.data("coord")],a&&(o=[a],r.hasClass("space"))))for(u=0;u<1*r.data("count")-1;u++)o.push(l.last(o).neighbors[">"]);f.board.go_to_ply(0,!1),f.board.set_active_squares(o)}else f.board.set_active_squares()},toggle_edit_mode:function(e){var t=this.game.is_editing;l.isBoolean(e)?this.game.is_editing=e:this.game.is_editing=!this.game.is_editing,!t&&this.game.is_editing?(this.$viewer.transition(),this.$html.addClass("editmode"),this.$html.removeClass("playmode"),this.$menu_edit.addClass("mdl-accordion--opened"),this.$menu_play.removeClass("mdl-accordion--opened"),this.board.pause(),this.scroll_to_ply(),this.save_scroll_position(),this.range.last_bounds=null,innerWidth>this.config.mobile_width&&this.restore_caret()):t&&!this.game.is_editing&&(this.$viewer.transition(),this.$html.addClass("playmode"),this.$html.removeClass("editmode"),this.$menu_play.addClass("mdl-accordion--opened"),this.$menu_edit.removeClass("mdl-accordion--opened"),this.clear_scroll_position(),innerWidth<=this.config.mobile_width&&this.$ptn.blur(),this.game.plys.length&&!this.board.selected_pieces.length&&this.board.update_active_squares()),this.$ptn.attr("contenteditable",this.game.is_editing),this.mode=this.game.is_editing?"edit":"play",this.config.update_flags(),this.board.resize()},read_file:function(e){var t=this;if(e&&/\.ptn$|\.txt$/i.test(e.name)){var n=new FileReader;n.onload=function(e){t.board.ply_index=0,t.game.parse(e.target.result,!1,!0),location.hash=f.hash=t.game.ptn_compressed},n.readAsText(e)}},insert_text:function(e,t){f.range.bounds("selection").text(e,t?"end":"start").select()},square_coord:function(e){return l.isString(e)?[e[0].charCodeAt(0)-h,1*e[1]-1]:l.isArray(e)?String.fromCharCode(h+e[0])+(e[1]+1):void 0},get_current_ply:function(){return this.game.plys[this.board.ply_index]}};f.supports_passive=!1;try{var _=Object.defineProperty({},"passive",{get:function(){f.supports_passive=!0}});window.addEventListener("test",null,_)}catch(e){}return l.bindAll(f,["dialog","confirm","revert_game","undo","redo","scroll_to_ply","toggle_edit_mode","set_editor_width","save_caret","restore_caret","move_caret","set_caret","select_token_text","insert_text"]),o=function(){var e=c("<div>").html(o);return e.find("a").attr({target:"_blank",rel:"noopener"}),e.find("h3:eq(0)").remove(),e.html()}(),f.set_position_from_caret=l.throttle(f.set_position_from_caret,100),f});var saveAs=saveAs||function(e){"use strict";if(!("undefined"==typeof e||"undefined"!=typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))){var t=e.document,n=function(){return e.URL||e.webkitURL||e},i=t.createElementNS("http://www.w3.org/1999/xhtml","a"),s="download"in i,r=function(e){var t=new MouseEvent("click");e.dispatchEvent(t)},o=/constructor/i.test(e.HTMLElement),a=function(t){(e.setImmediate||e.setTimeout)(function(){throw t},0)},l="application/octet-stream",c=4e4,u=function(e){var t=function(){"string"==typeof e?n().revokeObjectURL(e):e.remove()};setTimeout(t,c)},d=function(e,t,n){t=[].concat(t);for(var i=t.length;i--;){var s=e["on"+t[i]];if("function"==typeof s)try{s.call(e,n||e)}catch(e){a(e)}}},p=function(e){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob([String.fromCharCode(65279),e],{type:e.type}):e},h=function(t,a,c){c||(t=p(t));var h,f=this,_=t.type,m=_===l,g=function(){d(f,"writestart progress write writeend".split(" "))},y=function(){if(m&&o&&e.FileReader){var i=new FileReader;return i.onloadend=function(){var t=i.result;e.location.href="data:attachment/file"+t.slice(t.search(/[,;]/)),f.readyState=f.DONE,g()},i.readAsDataURL(t),void(f.readyState=f.INIT)}if(h||(h=n().createObjectURL(t)),m)e.location.href=h;else{var s=e.open(h,"_blank");s||(e.location.href=h)}f.readyState=f.DONE,g(),u(h)};return f.readyState=f.INIT,s?(h=n().createObjectURL(t),void setTimeout(function(){i.href=h,i.download=a,r(i),g(),u(h),f.readyState=f.DONE})):void y()},f=h.prototype,_=function(e,t,n){return new h(e,t||e.name||"download",n)};return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(e,t,n){return t=t||e.name||"download",n||(e=p(e)),navigator.msSaveOrOpenBlob(e,t)}:(f.abort=function(){},f.readyState=f.INIT=0,f.WRITING=1,f.DONE=2,f.error=f.onwritestart=f.onprogress=f.onwrite=f.onabort=f.onerror=f.onwriteend=null,_)}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);"undefined"!=typeof module&&module.exports?module.exports.saveAs=saveAs:"undefined"!=typeof define&&null!==define&&null!==define.amd&&define("filesaver",[],function(){return saveAs}),Array.prototype.forEach||(Array.prototype.forEach=function(e,t){for(var n=0,i=this.length;n<i;++n)e.call(t,this[n],n,this)}),function(e){function t(e){return d[e]||(d[e]="hotkeys"+ ++p)}function n(t,n){var i="";return e.map(t.split(" "),function(e){return i+=" "+e,new RegExp("^"+i+"$",n?"i":"")})}function s(n,i){var s="."+t(e.keymap.normalizeList(i));return n.replace(/(\S)(\s)|$/g,"$1"+s+"$2")}e.keymap=function(t){return e.keymap.normalize(t).keymap},e.keymap.normalize=function(t){if(null==t.keymap){var n=t.key,i=t.shiftKey,s=t.ctrlKey,r=t.altKey,o=t.metaKey,a=s&&r;if(null!=n){if(/^(?:shift|control|meta|alt)$/i.test(n))return t;var u=c.normal.indexOf(n);i&&u!==-1&&(n=c.shift.charAt(u))}else{var d=null!=t.which?t.which:null!=t.charCode?t.charCode:t.keyCode;n=l[d],"number"==typeof n&&(n=i&&a&&0!==c.shift_alt.charCodeAt(n)?c.shift_alt.charAt(n):a&&0!=c.alt.charCodeAt(n)?c.alt.charAt(n):i&&0!=c.shift.charCodeAt(n)?c.shift.charAt(n):c.normal.charAt(n))}if(null==n)return t;c.shift_alt.indexOf(n)!==-1&&(i=r=s=!1),c.shift.indexOf(n)!==-1&&(i=!1),c.alt.indexOf(n)!==-1&&(r=s=!1),t.keymap=n,o&&(t.keymap="~"+t.keymap),r&&(t.keymap="%"+t.keymap),s&&(t.keymap="^"+t.keymap),i&&(t.keymap="+"+t.keymap)}return t.keymap=e.keymap.normalizeString(t.keymap),t.shiftKey=t.ctrlKey=t.altKey=!1,t.key=t.keymap.replace(/^([+^%~]*)(.+)/,function(e,n,i){return(/\+/.test(n)||c.shift.indexOf(i)!==-1||c.shift_alt.indexOf(i)!==-1)&&(t.shiftKey=!0),(/\^/.test(n)||c.alt.indexOf(i)!==-1||c.shift_alt.indexOf(i)!==-1)&&(t.ctrlKey=!0),(/%/.test(n)||c.alt.indexOf(i)!==-1||c.shift_alt.indexOf(i)!==-1)&&(t.altKey=!0),/~/.test(n)&&(t.metaKey=!0),i}),"Spacebar"==t.key&&(t.key=" "),t};var r=e.map("Backspace CapsLock Delete Enter Escape Insert NumLock Tab Spacebar PageUp PageDown End Home ArrowLeft ArrowUp ArrowRight ArrowDown".split(" "),function(e){return{alias:new RegExp("\\b"+e+"\\b","i"),key:e}}),o={apps:"ContextMenu",menu:"ContextMenu","^<(.*)>$":"$1","\\b(?:k|num_)(\\w+)":"$1","{(\\w+)}":"$1",bksp:"Backspace",bs:"Backspace",del:"Delete",esc:"Escape",down:"ArrowDown",left:"ArrowLeft",right:"ArrowRight",up:"ArrowUp",downarrow:"ArrowDown",leftarrow:"ArrowLeft",rightarrow:"ArrowRight",uparrow:"ArrowUp",add:"+",subtract:"-",multiply:"*",divide:"/","s(hift)?[+-]":"+","c(trl)?[+-]":"^","m(eta)?[+-]":"~","a(lt)?[+-]":"%",decimal:".",minus:"-",point:".",lt:"<","#(\\d+)":"F$1",page_up:"pgup",page_down:"pgdn","num\\+":"+","num-":"-","num\\*":"*","num/":"/","^\\+(\\w)$":function(e,t){return t.toUpperCase()}," ":"Spacebar","([+^%~]+)(.)":function(e,t,n){return(/\+/.test(t)?"+":"")+(/\^/.test(t)?"^":"")+(/%/.test(t)?"%":"")+(/~/.test(t)?"~":"")+n}};for(alias in o){var a=o[alias];/^\w/.test(alias)&&(alias="\\b"+alias),/\w$/.test(alias)&&(alias+="\\b"),r.push({alias:new RegExp(alias,"i"),key:a})}e.keymap.normalizeString=function(e){return r.forEach(function(t){e=e.replace(t.alias,t.key)}),e},e.keymap.normalizeList=function(t){return e.trim(e.map(t.split(/\s+/),e.keymap.normalizeString).join(" "))};var l={32:" ",8:"Backspace",20:"CapsLock",93:"ContextMenu",46:"Delete",13:"Enter",27:"Escape",45:"Insert",144:"NumLock",9:"Tab"};for("PageUp PageDown End Home ArrowLeft ArrowUp ArrowRight ArrowDown".split(" ").forEach(function(e,t){l[t+33]=e}),"0123456789*+,-./".split("").forEach(function(e,t){l[t+96]=e}),i=1;i<=12;++i)l[i+111]="F"+i;[192,49,50,51,52,53,54,55,56,57,48,189,187,220,81,87,69,82,84,89,85,73,79,80,219,221,65,83,68,70,71,72,74,75,76,186,222,90,88,67,86,66,78,77,188,190,191].forEach(function(e,t){l[e]=t}),l[59]=l[189];var c,u=Array(48).join(String.fromCharCode(0));e.keymap.setlayout=function(e){c={normal:u,shift:u,alt:u,shift_alt:u};for(layout in e)if("string"==typeof e[layout])c[layout]=e[layout];else for(i in e[layout])i=parseInt(i),c[layout]=c[layout].slice(0,i)+e[layout][i]+c[layout].substring(i+e[layout][i].length);var t=c.shift.split("");c.normal.split("").forEach(function(e,n){0===t[n].charCodeAt(0)&&e.toUpperCase()!==e&&(t[n]=e.toUpperCase())}),c.shift=t.join("")},e.keymap.setlayout({normal:"`1234567890-=\\qwertyuiop[]asdfghjkl;'zxcvbnm,./",shift:{0:"~!@#$%^&*()_+|",24:"{}",35:':"',44:"<>?"}});var d={},p=0;["keydown","keyup"].forEach(function(i){e.event.fixHooks[i]={props:"char charCode code key keyCode keymap hotkeys".split(" "),filter:e.keymap.normalize},e.event.special[i]=e.event.special[i]||{},e.event.special[i].trigger=e.keymap.normalize,e.event.special[i].add=function(i){if(i.data&&i.data.keys){var s=i.data.keys;if(i.namespace=i.namespace.split(".").concat(t(s)).sort().join("."),"string"==typeof s)s=n(e.keymap.normalizeList(s).replace(/[.*+?^=!:${}()|\[\]\/\\]/g,"\\$&"));else{if(!(s instanceof RegExp))return;s=n(s.source,s.ignoreCase)}var r=i.handler,o="";i.handler=function(t){var n=e(this),a=e.keymap(t);if(a)for(o+=" "+a;o;){var l=o.split(" ").length-1;if(s[l-1].test(o)){var c=o.slice(1);return l==s.length?(t.hotkeys=c,n.trigger("keymapcomplete",[c]),o="",r.apply(this,arguments)):(n.trigger("keymapprefix",[c]),!!i.data.allowDefault)}o=o.replace(/ \S+/,"")}}}}});var h=e.event.remove;e.event.remove=function(t,n,i,r){if(void 0===i&&e.isPlainObject(r)&&r.keys)var o=[t,s(n,r.keys)];else o=e.isPlainObject(i)&&i.keys?[t,s(n,i.keys),void 0,r]:arguments;return h.apply(this,o)}}(jQuery),define("jquery.keymap",function(){}),define("jquery.aftertransition",["jquery"],function(e){e.fn.afterTransition=function(t){var n=e(this);return _.isFunction(t)?n.one("transitionend",function(e){t.call(n,e)}):_.isUndefined(t)&&n.trigger("transitionend"),this},e.fn.transition=function(t){var n=e(this);return n.afterTransition().addClass("animated"),n.afterTransition(function(){n.removeClass("animated"),_.isFunction(t)&&t.call(n)}),this}}),function(){"use strict";function e(e,t){if(e){if(t.element_.classList.contains(t.CssClasses_.MDL_JS_RIPPLE_EFFECT)){var n=document.createElement("span");n.classList.add(t.CssClasses_.MDL_RIPPLE_CONTAINER),n.classList.add(t.CssClasses_.MDL_JS_RIPPLE_EFFECT);var i=document.createElement("span");i.classList.add(t.CssClasses_.MDL_RIPPLE),n.appendChild(i),e.appendChild(n)}e.addEventListener("click",function(n){if("#"===e.getAttribute("href").charAt(0)){n.preventDefault();var i=e.href.split("#")[1],s=t.element_.querySelector("#"+i);t.resetTabState_(),t.resetPanelState_(),e.classList.add(t.CssClasses_.ACTIVE_CLASS),s.classList.add(t.CssClasses_.ACTIVE_CLASS)}})}}function t(e,t,n,i){function s(){var s=e.href.split("#")[1],r=i.content_.querySelector("#"+s);i.resetTabState_(t),i.resetPanelState_(n),e.classList.add(i.CssClasses_.IS_ACTIVE),r.classList.add(i.CssClasses_.IS_ACTIVE)}if(i.tabBar_.classList.contains(i.CssClasses_.JS_RIPPLE_EFFECT)){var r=document.createElement("span");r.classList.add(i.CssClasses_.RIPPLE_CONTAINER),r.classList.add(i.CssClasses_.JS_RIPPLE_EFFECT);var o=document.createElement("span");o.classList.add(i.CssClasses_.RIPPLE),r.appendChild(o),e.appendChild(r)}i.tabBar_.classList.contains(i.CssClasses_.TAB_MANUAL_SWITCH)||e.addEventListener("click",function(t){"#"===e.getAttribute("href").charAt(0)&&(t.preventDefault(),s())}),e.show=s}var n={upgradeDom:function(e,t){},upgradeElement:function(e,t){},upgradeElements:function(e){},upgradeAllRegistered:function(){},registerUpgradedCallback:function(e,t){},register:function(e){},downgradeElements:function(e){}};n=function(){function e(e,t){for(var n=0;n<p.length;n++)if(p[n].className===e)return"undefined"!=typeof t&&(p[n]=t),p[n];return!1}function t(e){var t=e.getAttribute("data-upgraded");return null===t?[""]:t.split(",")}function n(e,n){var i=t(e);return i.indexOf(n)!==-1}function i(e,t,n){if("CustomEvent"in window&&"function"==typeof window.CustomEvent)return new CustomEvent(e,{bubbles:t,cancelable:n});var i=document.createEvent("Events");return i.initEvent(e,t,n),i}function s(t,n){if("undefined"==typeof t&&"undefined"==typeof n)for(var i=0;i<p.length;i++)s(p[i].className,p[i].cssClass);else{var o=t;if("undefined"==typeof n){var a=e(o);a&&(n=a.cssClass)}for(var l=document.querySelectorAll("."+n),c=0;c<l.length;c++)r(l[c],o)}}function r(s,r){if(!("object"==typeof s&&s instanceof Element))throw new Error("Invalid argument provided to upgrade MDL element.");var o=i("mdl-componentupgrading",!0,!0);if(s.dispatchEvent(o),!o.defaultPrevented){var a=t(s),l=[];if(r)n(s,r)||l.push(e(r));else{var c=s.classList;p.forEach(function(e){c.contains(e.cssClass)&&l.indexOf(e)===-1&&!n(s,e.className)&&l.push(e)})}for(var u,d=0,_=l.length;d<_;d++){if(u=l[d],!u)throw new Error("Unable to find a registered component for the given class.");a.push(u.className),s.setAttribute("data-upgraded",a.join(","));var m=new u.classConstructor(s);m[f]=u,h.push(m);for(var g=0,y=u.callbacks.length;g<y;g++)u.callbacks[g](s);u.widget&&(s[u.className]=m);var v=i("mdl-componentupgraded",!0,!1);s.dispatchEvent(v)}}}function o(e){Array.isArray(e)||(e=e instanceof Element?[e]:Array.prototype.slice.call(e));for(var t,n=0,i=e.length;n<i;n++)t=e[n],t instanceof HTMLElement&&(r(t),t.children.length>0&&o(t.children))}function a(t){var n="undefined"==typeof t.widget&&"undefined"==typeof t.widget,i=!0;n||(i=t.widget||t.widget);var s={classConstructor:t.constructor||t.constructor,className:t.classAsString||t.classAsString,cssClass:t.cssClass||t.cssClass,widget:i,callbacks:[]};if(p.forEach(function(e){if(e.cssClass===s.cssClass)throw new Error("The provided cssClass has already been registered: "+e.cssClass);if(e.className===s.className)throw new Error("The provided className has already been registered")}),t.constructor.prototype.hasOwnProperty(f))throw new Error("MDL component classes must not have "+f+" defined as a property.");var r=e(t.classAsString,s);r||p.push(s)}function l(t,n){var i=e(t);i&&i.callbacks.push(n)}function c(){for(var e=0;e<p.length;e++)s(p[e].className)}function u(e){if(e){var t=h.indexOf(e);h.splice(t,1);var n=e.element_.getAttribute("data-upgraded").split(","),s=n.indexOf(e[f].classAsString);n.splice(s,1),e.element_.setAttribute("data-upgraded",n.join(","));var r=i("mdl-componentdowngraded",!0,!1);e.element_.dispatchEvent(r)}}function d(e){var t=function(e){h.filter(function(t){return t.element_===e}).forEach(u)};if(e instanceof Array||e instanceof NodeList)for(var n=0;n<e.length;n++)t(e[n]);else{if(!(e instanceof Node))throw new Error("Invalid argument provided to downgrade MDL nodes.");t(e)}}var p=[],h=[],f="mdlComponentConfigInternal_";return{upgradeDom:s,upgradeElement:r,upgradeElements:o,upgradeAllRegistered:c,registerUpgradedCallback:l,register:a,downgradeElements:d}}(),n.ComponentConfigPublic,n.ComponentConfig,n.Component,n.upgradeDom=n.upgradeDom,n.upgradeElement=n.upgradeElement,n.upgradeElements=n.upgradeElements,n.upgradeAllRegistered=n.upgradeAllRegistered,n.registerUpgradedCallback=n.registerUpgradedCallback,n.register=n.register,n.downgradeElements=n.downgradeElements,window.componentHandler=n,
window.componentHandler=n,n.init=function(){"classList"in document.createElement("div")&&"querySelector"in document&&"addEventListener"in window&&Array.prototype.forEach?(document.documentElement.classList.add("mdl-js"),n.upgradeAllRegistered()):(n.upgradeElement=function(){},n.register=function(){})},window.addEventListener("load",n.init),Date.now||(Date.now=function(){return(new Date).getTime()},Date.now=Date.now);for(var i=["webkit","moz"],s=0;s<i.length&&!window.requestAnimationFrame;++s){var r=i[s];window.requestAnimationFrame=window[r+"RequestAnimationFrame"],window.cancelAnimationFrame=window[r+"CancelAnimationFrame"]||window[r+"CancelRequestAnimationFrame"],window.requestAnimationFrame=window.requestAnimationFrame,window.cancelAnimationFrame=window.cancelAnimationFrame}if(/iP(ad|hone|od).*OS 6/.test(window.navigator.userAgent)||!window.requestAnimationFrame||!window.cancelAnimationFrame){var o=0;window.requestAnimationFrame=function(e){var t=Date.now(),n=Math.max(o+16,t);return setTimeout(function(){e(o=n)},n-t)},window.cancelAnimationFrame=clearTimeout,window.requestAnimationFrame=window.requestAnimationFrame,window.cancelAnimationFrame=window.cancelAnimationFrame}var a=function(e){this.element_=e,this.init()};window.MaterialButton=a,a.prototype.Constant_={},a.prototype.CssClasses_={RIPPLE_EFFECT:"mdl-js-ripple-effect",RIPPLE_CONTAINER:"mdl-button__ripple-container",RIPPLE:"mdl-ripple"},a.prototype.blurHandler_=function(e){e&&this.element_.blur()},a.prototype.disable=function(){this.element_.disabled=!0},a.prototype.disable=a.prototype.disable,a.prototype.enable=function(){this.element_.disabled=!1},a.prototype.enable=a.prototype.enable,a.prototype.init=function(){if(this.element_){if(this.element_.classList.contains(this.CssClasses_.RIPPLE_EFFECT)){var e=document.createElement("span");e.classList.add(this.CssClasses_.RIPPLE_CONTAINER),this.rippleElement_=document.createElement("span"),this.rippleElement_.classList.add(this.CssClasses_.RIPPLE),e.appendChild(this.rippleElement_),this.boundRippleBlurHandler=this.blurHandler_.bind(this),this.rippleElement_.addEventListener("mouseup",this.boundRippleBlurHandler),this.element_.appendChild(e)}this.boundButtonBlurHandler=this.blurHandler_.bind(this),this.element_.addEventListener("mouseup",this.boundButtonBlurHandler),this.element_.addEventListener("mouseleave",this.boundButtonBlurHandler)}},n.register({constructor:a,classAsString:"MaterialButton",cssClass:"mdl-js-button",widget:!0});var l=function(e){this.element_=e,this.init()};window.MaterialCheckbox=l,l.prototype.Constant_={TINY_TIMEOUT:.001},l.prototype.CssClasses_={INPUT:"mdl-checkbox__input",BOX_OUTLINE:"mdl-checkbox__box-outline",FOCUS_HELPER:"mdl-checkbox__focus-helper",TICK_OUTLINE:"mdl-checkbox__tick-outline",RIPPLE_EFFECT:"mdl-js-ripple-effect",RIPPLE_IGNORE_EVENTS:"mdl-js-ripple-effect--ignore-events",RIPPLE_CONTAINER:"mdl-checkbox__ripple-container",RIPPLE_CENTER:"mdl-ripple--center",RIPPLE:"mdl-ripple",IS_FOCUSED:"is-focused",IS_DISABLED:"is-disabled",IS_CHECKED:"is-checked",IS_UPGRADED:"is-upgraded"},l.prototype.onChange_=function(e){this.updateClasses_()},l.prototype.onFocus_=function(e){this.element_.classList.add(this.CssClasses_.IS_FOCUSED)},l.prototype.onBlur_=function(e){this.element_.classList.remove(this.CssClasses_.IS_FOCUSED)},l.prototype.onMouseUp_=function(e){this.blur_()},l.prototype.updateClasses_=function(){this.checkDisabled(),this.checkToggleState()},l.prototype.blur_=function(){window.setTimeout(function(){this.inputElement_.blur()}.bind(this),this.Constant_.TINY_TIMEOUT)},l.prototype.checkToggleState=function(){this.inputElement_.checked?this.element_.classList.add(this.CssClasses_.IS_CHECKED):this.element_.classList.remove(this.CssClasses_.IS_CHECKED)},l.prototype.checkToggleState=l.prototype.checkToggleState,l.prototype.checkDisabled=function(){this.inputElement_.disabled?this.element_.classList.add(this.CssClasses_.IS_DISABLED):this.element_.classList.remove(this.CssClasses_.IS_DISABLED)},l.prototype.checkDisabled=l.prototype.checkDisabled,l.prototype.disable=function(){this.inputElement_.disabled=!0,this.updateClasses_()},l.prototype.disable=l.prototype.disable,l.prototype.enable=function(){this.inputElement_.disabled=!1,this.updateClasses_()},l.prototype.enable=l.prototype.enable,l.prototype.check=function(){this.inputElement_.checked=!0,this.updateClasses_()},l.prototype.check=l.prototype.check,l.prototype.uncheck=function(){this.inputElement_.checked=!1,this.updateClasses_()},l.prototype.uncheck=l.prototype.uncheck,l.prototype.init=function(){if(this.element_){this.inputElement_=this.element_.querySelector("."+this.CssClasses_.INPUT);var e=document.createElement("span");e.classList.add(this.CssClasses_.BOX_OUTLINE);var t=document.createElement("span");t.classList.add(this.CssClasses_.FOCUS_HELPER);var n=document.createElement("span");if(n.classList.add(this.CssClasses_.TICK_OUTLINE),e.appendChild(n),this.element_.appendChild(t),this.element_.appendChild(e),this.element_.classList.contains(this.CssClasses_.RIPPLE_EFFECT)){this.element_.classList.add(this.CssClasses_.RIPPLE_IGNORE_EVENTS),this.rippleContainerElement_=document.createElement("span"),this.rippleContainerElement_.classList.add(this.CssClasses_.RIPPLE_CONTAINER),this.rippleContainerElement_.classList.add(this.CssClasses_.RIPPLE_EFFECT),this.rippleContainerElement_.classList.add(this.CssClasses_.RIPPLE_CENTER),this.boundRippleMouseUp=this.onMouseUp_.bind(this),this.rippleContainerElement_.addEventListener("mouseup",this.boundRippleMouseUp);var i=document.createElement("span");i.classList.add(this.CssClasses_.RIPPLE),this.rippleContainerElement_.appendChild(i),this.element_.appendChild(this.rippleContainerElement_)}this.boundInputOnChange=this.onChange_.bind(this),this.boundInputOnFocus=this.onFocus_.bind(this),this.boundInputOnBlur=this.onBlur_.bind(this),this.boundElementMouseUp=this.onMouseUp_.bind(this),this.inputElement_.addEventListener("change",this.boundInputOnChange),this.inputElement_.addEventListener("focus",this.boundInputOnFocus),this.inputElement_.addEventListener("blur",this.boundInputOnBlur),this.element_.addEventListener("mouseup",this.boundElementMouseUp),this.updateClasses_(),this.element_.classList.add(this.CssClasses_.IS_UPGRADED)}},n.register({constructor:l,classAsString:"MaterialCheckbox",cssClass:"mdl-js-checkbox",widget:!0});var c=function(e){this.element_=e,this.init()};window.MaterialIconToggle=c,c.prototype.Constant_={TINY_TIMEOUT:.001},c.prototype.CssClasses_={INPUT:"mdl-icon-toggle__input",JS_RIPPLE_EFFECT:"mdl-js-ripple-effect",RIPPLE_IGNORE_EVENTS:"mdl-js-ripple-effect--ignore-events",RIPPLE_CONTAINER:"mdl-icon-toggle__ripple-container",RIPPLE_CENTER:"mdl-ripple--center",RIPPLE:"mdl-ripple",IS_FOCUSED:"is-focused",IS_DISABLED:"is-disabled",IS_CHECKED:"is-checked"},c.prototype.onChange_=function(e){this.updateClasses_()},c.prototype.onFocus_=function(e){this.element_.classList.add(this.CssClasses_.IS_FOCUSED)},c.prototype.onBlur_=function(e){this.element_.classList.remove(this.CssClasses_.IS_FOCUSED)},c.prototype.onMouseUp_=function(e){this.blur_()},c.prototype.updateClasses_=function(){this.checkDisabled(),this.checkToggleState()},c.prototype.blur_=function(){window.setTimeout(function(){this.inputElement_.blur()}.bind(this),this.Constant_.TINY_TIMEOUT)},c.prototype.checkToggleState=function(){this.inputElement_.checked?this.element_.classList.add(this.CssClasses_.IS_CHECKED):this.element_.classList.remove(this.CssClasses_.IS_CHECKED)},c.prototype.checkToggleState=c.prototype.checkToggleState,c.prototype.checkDisabled=function(){this.inputElement_.disabled?this.element_.classList.add(this.CssClasses_.IS_DISABLED):this.element_.classList.remove(this.CssClasses_.IS_DISABLED)},c.prototype.checkDisabled=c.prototype.checkDisabled,c.prototype.disable=function(){this.inputElement_.disabled=!0,this.updateClasses_()},c.prototype.disable=c.prototype.disable,c.prototype.enable=function(){this.inputElement_.disabled=!1,this.updateClasses_()},c.prototype.enable=c.prototype.enable,c.prototype.check=function(){this.inputElement_.checked=!0,this.updateClasses_()},c.prototype.check=c.prototype.check,c.prototype.uncheck=function(){this.inputElement_.checked=!1,this.updateClasses_()},c.prototype.uncheck=c.prototype.uncheck,c.prototype.init=function(){if(this.element_){if(this.inputElement_=this.element_.querySelector("."+this.CssClasses_.INPUT),this.element_.classList.contains(this.CssClasses_.JS_RIPPLE_EFFECT)){this.element_.classList.add(this.CssClasses_.RIPPLE_IGNORE_EVENTS),this.rippleContainerElement_=document.createElement("span"),this.rippleContainerElement_.classList.add(this.CssClasses_.RIPPLE_CONTAINER),this.rippleContainerElement_.classList.add(this.CssClasses_.JS_RIPPLE_EFFECT),this.rippleContainerElement_.classList.add(this.CssClasses_.RIPPLE_CENTER),this.boundRippleMouseUp=this.onMouseUp_.bind(this),this.rippleContainerElement_.addEventListener("mouseup",this.boundRippleMouseUp);var e=document.createElement("span");e.classList.add(this.CssClasses_.RIPPLE),this.rippleContainerElement_.appendChild(e),this.element_.appendChild(this.rippleContainerElement_)}this.boundInputOnChange=this.onChange_.bind(this),this.boundInputOnFocus=this.onFocus_.bind(this),this.boundInputOnBlur=this.onBlur_.bind(this),this.boundElementOnMouseUp=this.onMouseUp_.bind(this),this.inputElement_.addEventListener("change",this.boundInputOnChange),this.inputElement_.addEventListener("focus",this.boundInputOnFocus),this.inputElement_.addEventListener("blur",this.boundInputOnBlur),this.element_.addEventListener("mouseup",this.boundElementOnMouseUp),this.updateClasses_(),this.element_.classList.add("is-upgraded")}},n.register({constructor:c,classAsString:"MaterialIconToggle",cssClass:"mdl-js-icon-toggle",widget:!0});var u=function(e){this.element_=e,this.init()};window.MaterialMenu=u,u.prototype.Constant_={TRANSITION_DURATION_SECONDS:.3,TRANSITION_DURATION_FRACTION:.8,CLOSE_TIMEOUT:150},u.prototype.Keycodes_={ENTER:13,ESCAPE:27,SPACE:32,UP_ARROW:38,DOWN_ARROW:40},u.prototype.CssClasses_={CONTAINER:"mdl-menu__container",OUTLINE:"mdl-menu__outline",ITEM:"mdl-menu__item",ITEM_RIPPLE_CONTAINER:"mdl-menu__item-ripple-container",RIPPLE_EFFECT:"mdl-js-ripple-effect",RIPPLE_IGNORE_EVENTS:"mdl-js-ripple-effect--ignore-events",RIPPLE:"mdl-ripple",IS_UPGRADED:"is-upgraded",IS_VISIBLE:"is-visible",IS_ANIMATING:"is-animating",BOTTOM_LEFT:"mdl-menu--bottom-left",BOTTOM_RIGHT:"mdl-menu--bottom-right",TOP_LEFT:"mdl-menu--top-left",TOP_RIGHT:"mdl-menu--top-right",UNALIGNED:"mdl-menu--unaligned"},u.prototype.init=function(){if(this.element_){var e=document.createElement("div");e.classList.add(this.CssClasses_.CONTAINER),this.element_.parentElement.insertBefore(e,this.element_),this.element_.parentElement.removeChild(this.element_),e.appendChild(this.element_),this.container_=e;var t=document.createElement("div");t.classList.add(this.CssClasses_.OUTLINE),this.outline_=t,e.insertBefore(t,this.element_);var n=this.element_.getAttribute("for")||this.element_.getAttribute("data-mdl-for"),i=null;n&&(i=document.getElementById(n),i&&(this.forElement_=i,i.addEventListener("click",this.handleForClick_.bind(this)),i.addEventListener("keydown",this.handleForKeyboardEvent_.bind(this))));var s=this.element_.querySelectorAll("."+this.CssClasses_.ITEM);this.boundItemKeydown_=this.handleItemKeyboardEvent_.bind(this),this.boundItemClick_=this.handleItemClick_.bind(this);for(var r=0;r<s.length;r++)s[r].addEventListener("click",this.boundItemClick_),s[r].tabIndex="-1",s[r].addEventListener("keydown",this.boundItemKeydown_);if(this.element_.classList.contains(this.CssClasses_.RIPPLE_EFFECT))for(this.element_.classList.add(this.CssClasses_.RIPPLE_IGNORE_EVENTS),r=0;r<s.length;r++){var o=s[r],a=document.createElement("span");a.classList.add(this.CssClasses_.ITEM_RIPPLE_CONTAINER);var l=document.createElement("span");l.classList.add(this.CssClasses_.RIPPLE),a.appendChild(l),o.appendChild(a),o.classList.add(this.CssClasses_.RIPPLE_EFFECT)}this.element_.classList.contains(this.CssClasses_.BOTTOM_LEFT)&&this.outline_.classList.add(this.CssClasses_.BOTTOM_LEFT),this.element_.classList.contains(this.CssClasses_.BOTTOM_RIGHT)&&this.outline_.classList.add(this.CssClasses_.BOTTOM_RIGHT),this.element_.classList.contains(this.CssClasses_.TOP_LEFT)&&this.outline_.classList.add(this.CssClasses_.TOP_LEFT),this.element_.classList.contains(this.CssClasses_.TOP_RIGHT)&&this.outline_.classList.add(this.CssClasses_.TOP_RIGHT),this.element_.classList.contains(this.CssClasses_.UNALIGNED)&&this.outline_.classList.add(this.CssClasses_.UNALIGNED),e.classList.add(this.CssClasses_.IS_UPGRADED)}},u.prototype.handleForClick_=function(e){if(this.element_&&this.forElement_){var t=this.forElement_.getBoundingClientRect(),n=this.forElement_.parentElement.getBoundingClientRect();this.element_.classList.contains(this.CssClasses_.UNALIGNED)||(this.element_.classList.contains(this.CssClasses_.BOTTOM_RIGHT)?(this.container_.style.right=n.right-t.right+"px",this.container_.style.top=this.forElement_.offsetTop+this.forElement_.offsetHeight+"px"):this.element_.classList.contains(this.CssClasses_.TOP_LEFT)?(this.container_.style.left=this.forElement_.offsetLeft+"px",this.container_.style.bottom=n.bottom-t.top+"px"):this.element_.classList.contains(this.CssClasses_.TOP_RIGHT)?(this.container_.style.right=n.right-t.right+"px",this.container_.style.bottom=n.bottom-t.top+"px"):(this.container_.style.left=this.forElement_.offsetLeft+"px",this.container_.style.top=this.forElement_.offsetTop+this.forElement_.offsetHeight+"px"))}this.toggle(e)},u.prototype.handleForKeyboardEvent_=function(e){if(this.element_&&this.container_&&this.forElement_){var t=this.element_.querySelectorAll("."+this.CssClasses_.ITEM+":not([disabled])");t&&t.length>0&&this.container_.classList.contains(this.CssClasses_.IS_VISIBLE)&&(e.keyCode===this.Keycodes_.UP_ARROW?(e.preventDefault(),t[t.length-1].focus()):e.keyCode===this.Keycodes_.DOWN_ARROW&&(e.preventDefault(),t[0].focus()))}},u.prototype.handleItemKeyboardEvent_=function(e){if(this.element_&&this.container_){var t=this.element_.querySelectorAll("."+this.CssClasses_.ITEM+":not([disabled])");if(t&&t.length>0&&this.container_.classList.contains(this.CssClasses_.IS_VISIBLE)){var n=Array.prototype.slice.call(t).indexOf(e.target);if(e.keyCode===this.Keycodes_.UP_ARROW)e.preventDefault(),n>0?t[n-1].focus():t[t.length-1].focus();else if(e.keyCode===this.Keycodes_.DOWN_ARROW)e.preventDefault(),t.length>n+1?t[n+1].focus():t[0].focus();else if(e.keyCode===this.Keycodes_.SPACE||e.keyCode===this.Keycodes_.ENTER){e.preventDefault();var i=new MouseEvent("mousedown");e.target.dispatchEvent(i),i=new MouseEvent("mouseup"),e.target.dispatchEvent(i),e.target.click()}else e.keyCode===this.Keycodes_.ESCAPE&&(e.preventDefault(),this.hide())}}},u.prototype.handleItemClick_=function(e){e.target.hasAttribute("disabled")?e.stopPropagation():(this.closing_=!0,window.setTimeout(function(e){this.hide(),this.closing_=!1}.bind(this),this.Constant_.CLOSE_TIMEOUT))},u.prototype.applyClip_=function(e,t){this.element_.classList.contains(this.CssClasses_.UNALIGNED)?this.element_.style.clip="":this.element_.classList.contains(this.CssClasses_.BOTTOM_RIGHT)?this.element_.style.clip="rect(0 "+t+"px 0 "+t+"px)":this.element_.classList.contains(this.CssClasses_.TOP_LEFT)?this.element_.style.clip="rect("+e+"px 0 "+e+"px 0)":this.element_.classList.contains(this.CssClasses_.TOP_RIGHT)?this.element_.style.clip="rect("+e+"px "+t+"px "+e+"px "+t+"px)":this.element_.style.clip=""},u.prototype.removeAnimationEndListener_=function(e){e.target.classList.remove(u.prototype.CssClasses_.IS_ANIMATING)},u.prototype.addAnimationEndListener_=function(){this.element_.addEventListener("transitionend",this.removeAnimationEndListener_),this.element_.addEventListener("webkitTransitionEnd",this.removeAnimationEndListener_)},u.prototype.show=function(e){if(this.element_&&this.container_&&this.outline_){var t=this.element_.getBoundingClientRect().height,n=this.element_.getBoundingClientRect().width;this.container_.style.width=n+"px",this.container_.style.height=t+"px",this.outline_.style.width=n+"px",this.outline_.style.height=t+"px";for(var i=this.Constant_.TRANSITION_DURATION_SECONDS*this.Constant_.TRANSITION_DURATION_FRACTION,s=this.element_.querySelectorAll("."+this.CssClasses_.ITEM),r=0;r<s.length;r++){var o=null;o=this.element_.classList.contains(this.CssClasses_.TOP_LEFT)||this.element_.classList.contains(this.CssClasses_.TOP_RIGHT)?(t-s[r].offsetTop-s[r].offsetHeight)/t*i+"s":s[r].offsetTop/t*i+"s",s[r].style.transitionDelay=o}this.applyClip_(t,n),window.requestAnimationFrame(function(){this.element_.classList.add(this.CssClasses_.IS_ANIMATING),this.element_.style.clip="rect(0 "+n+"px "+t+"px 0)",this.container_.classList.add(this.CssClasses_.IS_VISIBLE)}.bind(this)),this.addAnimationEndListener_();var a=function(t){t===e||this.closing_||t.target.parentNode===this.element_||(document.removeEventListener("click",a),this.hide())}.bind(this);document.addEventListener("click",a)}},u.prototype.show=u.prototype.show,u.prototype.hide=function(){if(this.element_&&this.container_&&this.outline_){for(var e=this.element_.querySelectorAll("."+this.CssClasses_.ITEM),t=0;t<e.length;t++)e[t].style.removeProperty("transition-delay");var n=this.element_.getBoundingClientRect(),i=n.height,s=n.width;this.element_.classList.add(this.CssClasses_.IS_ANIMATING),this.applyClip_(i,s),this.container_.classList.remove(this.CssClasses_.IS_VISIBLE),this.addAnimationEndListener_()}},u.prototype.hide=u.prototype.hide,u.prototype.toggle=function(e){this.container_.classList.contains(this.CssClasses_.IS_VISIBLE)?this.hide():this.show(e)},u.prototype.toggle=u.prototype.toggle,n.register({constructor:u,classAsString:"MaterialMenu",cssClass:"mdl-js-menu",widget:!0});var d=function(e){this.element_=e,this.init()};window.MaterialProgress=d,d.prototype.Constant_={},d.prototype.CssClasses_={INDETERMINATE_CLASS:"mdl-progress__indeterminate"},d.prototype.setProgress=function(e){this.element_.classList.contains(this.CssClasses_.INDETERMINATE_CLASS)||(this.progressbar_.style.width=e+"%")},d.prototype.setProgress=d.prototype.setProgress,d.prototype.setBuffer=function(e){this.bufferbar_.style.width=e+"%",this.auxbar_.style.width=100-e+"%"},d.prototype.setBuffer=d.prototype.setBuffer,d.prototype.init=function(){if(this.element_){var e=document.createElement("div");e.className="progressbar bar bar1",this.element_.appendChild(e),this.progressbar_=e,e=document.createElement("div"),e.className="bufferbar bar bar2",this.element_.appendChild(e),this.bufferbar_=e,e=document.createElement("div"),e.className="auxbar bar bar3",this.element_.appendChild(e),this.auxbar_=e,this.progressbar_.style.width="0%",this.bufferbar_.style.width="100%",this.auxbar_.style.width="0%",this.element_.classList.add("is-upgraded")}},n.register({constructor:d,classAsString:"MaterialProgress",cssClass:"mdl-js-progress",widget:!0});var p=function(e){this.element_=e,this.init()};window.MaterialRadio=p,p.prototype.Constant_={TINY_TIMEOUT:.001},p.prototype.CssClasses_={IS_FOCUSED:"is-focused",IS_DISABLED:"is-disabled",IS_CHECKED:"is-checked",IS_UPGRADED:"is-upgraded",JS_RADIO:"mdl-js-radio",RADIO_BTN:"mdl-radio__button",RADIO_OUTER_CIRCLE:"mdl-radio__outer-circle",RADIO_INNER_CIRCLE:"mdl-radio__inner-circle",RIPPLE_EFFECT:"mdl-js-ripple-effect",RIPPLE_IGNORE_EVENTS:"mdl-js-ripple-effect--ignore-events",RIPPLE_CONTAINER:"mdl-radio__ripple-container",RIPPLE_CENTER:"mdl-ripple--center",RIPPLE:"mdl-ripple"},p.prototype.onChange_=function(e){for(var t=document.getElementsByClassName(this.CssClasses_.JS_RADIO),n=0;n<t.length;n++){var i=t[n].querySelector("."+this.CssClasses_.RADIO_BTN);i.getAttribute("name")===this.btnElement_.getAttribute("name")&&"undefined"!=typeof t[n].MaterialRadio&&t[n].MaterialRadio.updateClasses_()}},p.prototype.onFocus_=function(e){this.element_.classList.add(this.CssClasses_.IS_FOCUSED)},p.prototype.onBlur_=function(e){this.element_.classList.remove(this.CssClasses_.IS_FOCUSED)},p.prototype.onMouseup_=function(e){this.blur_()},p.prototype.updateClasses_=function(){this.checkDisabled(),this.checkToggleState()},p.prototype.blur_=function(){window.setTimeout(function(){this.btnElement_.blur()}.bind(this),this.Constant_.TINY_TIMEOUT)},p.prototype.checkDisabled=function(){this.btnElement_.disabled?this.element_.classList.add(this.CssClasses_.IS_DISABLED):this.element_.classList.remove(this.CssClasses_.IS_DISABLED)},p.prototype.checkDisabled=p.prototype.checkDisabled,p.prototype.checkToggleState=function(){this.btnElement_.checked?this.element_.classList.add(this.CssClasses_.IS_CHECKED):this.element_.classList.remove(this.CssClasses_.IS_CHECKED)},p.prototype.checkToggleState=p.prototype.checkToggleState,p.prototype.disable=function(){this.btnElement_.disabled=!0,this.updateClasses_()},p.prototype.disable=p.prototype.disable,p.prototype.enable=function(){this.btnElement_.disabled=!1,this.updateClasses_()},p.prototype.enable=p.prototype.enable,p.prototype.check=function(){this.btnElement_.checked=!0,this.onChange_(null)},p.prototype.check=p.prototype.check,p.prototype.uncheck=function(){this.btnElement_.checked=!1,this.onChange_(null)},p.prototype.uncheck=p.prototype.uncheck,p.prototype.init=function(){if(this.element_){this.btnElement_=this.element_.querySelector("."+this.CssClasses_.RADIO_BTN),this.boundChangeHandler_=this.onChange_.bind(this),this.boundFocusHandler_=this.onChange_.bind(this),this.boundBlurHandler_=this.onBlur_.bind(this),this.boundMouseUpHandler_=this.onMouseup_.bind(this);var e=document.createElement("span");e.classList.add(this.CssClasses_.RADIO_OUTER_CIRCLE);var t=document.createElement("span");t.classList.add(this.CssClasses_.RADIO_INNER_CIRCLE),this.element_.appendChild(e),this.element_.appendChild(t);var n;if(this.element_.classList.contains(this.CssClasses_.RIPPLE_EFFECT)){this.element_.classList.add(this.CssClasses_.RIPPLE_IGNORE_EVENTS),n=document.createElement("span"),n.classList.add(this.CssClasses_.RIPPLE_CONTAINER),n.classList.add(this.CssClasses_.RIPPLE_EFFECT),n.classList.add(this.CssClasses_.RIPPLE_CENTER),n.addEventListener("mouseup",this.boundMouseUpHandler_);var i=document.createElement("span");i.classList.add(this.CssClasses_.RIPPLE),n.appendChild(i),this.element_.appendChild(n)}this.btnElement_.addEventListener("change",this.boundChangeHandler_),this.btnElement_.addEventListener("focus",this.boundFocusHandler_),this.btnElement_.addEventListener("blur",this.boundBlurHandler_),this.element_.addEventListener("mouseup",this.boundMouseUpHandler_),this.updateClasses_(),this.element_.classList.add(this.CssClasses_.IS_UPGRADED)}},n.register({constructor:p,classAsString:"MaterialRadio",cssClass:"mdl-js-radio",widget:!0});var h=function(e){this.element_=e,this.isIE_=window.navigator.msPointerEnabled,this.init()};window.MaterialSlider=h,h.prototype.Constant_={},h.prototype.CssClasses_={IE_CONTAINER:"mdl-slider__ie-container",SLIDER_CONTAINER:"mdl-slider__container",BACKGROUND_FLEX:"mdl-slider__background-flex",BACKGROUND_LOWER:"mdl-slider__background-lower",BACKGROUND_UPPER:"mdl-slider__background-upper",IS_LOWEST_VALUE:"is-lowest-value",IS_UPGRADED:"is-upgraded"},h.prototype.onInput_=function(e){this.updateValueStyles_()},h.prototype.onChange_=function(e){this.updateValueStyles_()},h.prototype.onMouseUp_=function(e){e.target.blur()},h.prototype.onContainerMouseDown_=function(e){if(e.target===this.element_.parentElement){e.preventDefault();var t=new MouseEvent("mousedown",{target:e.target,buttons:e.buttons,clientX:e.clientX,clientY:this.element_.getBoundingClientRect().y});this.element_.dispatchEvent(t)}},h.prototype.updateValueStyles_=function(){var e=(this.element_.value-this.element_.min)/(this.element_.max-this.element_.min);0===e?this.element_.classList.add(this.CssClasses_.IS_LOWEST_VALUE):this.element_.classList.remove(this.CssClasses_.IS_LOWEST_VALUE),this.isIE_||(this.backgroundLower_.style.flex=e,this.backgroundLower_.style.webkitFlex=e,this.backgroundUpper_.style.flex=1-e,this.backgroundUpper_.style.webkitFlex=1-e)},h.prototype.disable=function(){this.element_.disabled=!0},h.prototype.disable=h.prototype.disable,h.prototype.enable=function(){this.element_.disabled=!1},h.prototype.enable=h.prototype.enable,h.prototype.change=function(e){"undefined"!=typeof e&&(this.element_.value=e),this.updateValueStyles_()},h.prototype.change=h.prototype.change,h.prototype.init=function(){if(this.element_){if(this.isIE_){var e=document.createElement("div");e.classList.add(this.CssClasses_.IE_CONTAINER),this.element_.parentElement.insertBefore(e,this.element_),this.element_.parentElement.removeChild(this.element_),e.appendChild(this.element_)}else{var t=document.createElement("div");t.classList.add(this.CssClasses_.SLIDER_CONTAINER),this.element_.parentElement.insertBefore(t,this.element_),this.element_.parentElement.removeChild(this.element_),t.appendChild(this.element_);var n=document.createElement("div");n.classList.add(this.CssClasses_.BACKGROUND_FLEX),t.appendChild(n),this.backgroundLower_=document.createElement("div"),this.backgroundLower_.classList.add(this.CssClasses_.BACKGROUND_LOWER),n.appendChild(this.backgroundLower_),this.backgroundUpper_=document.createElement("div"),this.backgroundUpper_.classList.add(this.CssClasses_.BACKGROUND_UPPER),n.appendChild(this.backgroundUpper_)}this.boundInputHandler=this.onInput_.bind(this),this.boundChangeHandler=this.onChange_.bind(this),this.boundMouseUpHandler=this.onMouseUp_.bind(this),this.boundContainerMouseDownHandler=this.onContainerMouseDown_.bind(this),this.element_.addEventListener("input",this.boundInputHandler),this.element_.addEventListener("change",this.boundChangeHandler),this.element_.addEventListener("mouseup",this.boundMouseUpHandler),this.element_.parentElement.addEventListener("mousedown",this.boundContainerMouseDownHandler),this.updateValueStyles_(),this.element_.classList.add(this.CssClasses_.IS_UPGRADED)}},n.register({constructor:h,classAsString:"MaterialSlider",cssClass:"mdl-js-slider",widget:!0});var f=function(e){if(this.element_=e,this.textElement_=this.element_.querySelector("."+this.cssClasses_.MESSAGE),this.actionElement_=this.element_.querySelector("."+this.cssClasses_.ACTION),!this.textElement_)throw new Error("There must be a message element for a snackbar.");if(!this.actionElement_)throw new Error("There must be an action element for a snackbar.");this.active=!1,this.actionHandler_=void 0,this.message_=void 0,this.actionText_=void 0,this.queuedNotifications_=[],this.setActionHidden_(!0)};window.MaterialSnackbar=f,f.prototype.Constant_={ANIMATION_LENGTH:250},f.prototype.cssClasses_={SNACKBAR:"mdl-snackbar",MESSAGE:"mdl-snackbar__text",ACTION:"mdl-snackbar__action",ACTIVE:"mdl-snackbar--active"},f.prototype.displaySnackbar_=function(){this.element_.setAttribute("aria-hidden","true"),this.actionHandler_&&(this.actionElement_.textContent=this.actionText_,this.actionElement_.addEventListener("click",this.actionHandler_),this.setActionHidden_(!1)),this.textElement_.textContent=this.message_,this.element_.classList.add(this.cssClasses_.ACTIVE),this.element_.setAttribute("aria-hidden","false"),setTimeout(this.cleanup_.bind(this),this.timeout_)},f.prototype.showSnackbar=function(e){if(void 0===e)throw new Error("Please provide a data object with at least a message to display.");if(void 0===e.message)throw new Error("Please provide a message to be displayed.");if(e.actionHandler&&!e.actionText)throw new Error("Please provide action text with the handler.");this.active?this.queuedNotifications_.push(e):(this.active=!0,this.message_=e.message,e.timeout?this.timeout_=e.timeout:this.timeout_=2750,e.actionHandler&&(this.actionHandler_=e.actionHandler),e.actionText&&(this.actionText_=e.actionText),this.displaySnackbar_())},f.prototype.showSnackbar=f.prototype.showSnackbar,f.prototype.checkQueue_=function(){this.queuedNotifications_.length>0&&this.showSnackbar(this.queuedNotifications_.shift())},f.prototype.cleanup_=function(){this.element_.classList.remove(this.cssClasses_.ACTIVE),setTimeout(function(){this.element_.setAttribute("aria-hidden","true"),this.textElement_.textContent="",Boolean(this.actionElement_.getAttribute("aria-hidden"))||(this.setActionHidden_(!0),this.actionElement_.textContent="",this.actionElement_.removeEventListener("click",this.actionHandler_)),this.actionHandler_=void 0,this.message_=void 0,this.actionText_=void 0,this.active=!1,this.checkQueue_()}.bind(this),this.Constant_.ANIMATION_LENGTH)},f.prototype.setActionHidden_=function(e){e?this.actionElement_.setAttribute("aria-hidden","true"):this.actionElement_.removeAttribute("aria-hidden")},n.register({constructor:f,classAsString:"MaterialSnackbar",cssClass:"mdl-js-snackbar",widget:!0});var _=function(e){this.element_=e,this.init()};window.MaterialSpinner=_,_.prototype.Constant_={MDL_SPINNER_LAYER_COUNT:4},_.prototype.CssClasses_={MDL_SPINNER_LAYER:"mdl-spinner__layer",MDL_SPINNER_CIRCLE_CLIPPER:"mdl-spinner__circle-clipper",MDL_SPINNER_CIRCLE:"mdl-spinner__circle",MDL_SPINNER_GAP_PATCH:"mdl-spinner__gap-patch",MDL_SPINNER_LEFT:"mdl-spinner__left",MDL_SPINNER_RIGHT:"mdl-spinner__right"},_.prototype.createLayer=function(e){var t=document.createElement("div");t.classList.add(this.CssClasses_.MDL_SPINNER_LAYER),t.classList.add(this.CssClasses_.MDL_SPINNER_LAYER+"-"+e);var n=document.createElement("div");n.classList.add(this.CssClasses_.MDL_SPINNER_CIRCLE_CLIPPER),n.classList.add(this.CssClasses_.MDL_SPINNER_LEFT);var i=document.createElement("div");i.classList.add(this.CssClasses_.MDL_SPINNER_GAP_PATCH);var s=document.createElement("div");s.classList.add(this.CssClasses_.MDL_SPINNER_CIRCLE_CLIPPER),s.classList.add(this.CssClasses_.MDL_SPINNER_RIGHT);for(var r=[n,i,s],o=0;o<r.length;o++){var a=document.createElement("div");a.classList.add(this.CssClasses_.MDL_SPINNER_CIRCLE),r[o].appendChild(a)}t.appendChild(n),t.appendChild(i),t.appendChild(s),this.element_.appendChild(t)},_.prototype.createLayer=_.prototype.createLayer,_.prototype.stop=function(){this.element_.classList.remove("is-active")},_.prototype.stop=_.prototype.stop,_.prototype.start=function(){this.element_.classList.add("is-active")},_.prototype.start=_.prototype.start,_.prototype.init=function(){if(this.element_){for(var e=1;e<=this.Constant_.MDL_SPINNER_LAYER_COUNT;e++)this.createLayer(e);this.element_.classList.add("is-upgraded")}},n.register({constructor:_,classAsString:"MaterialSpinner",cssClass:"mdl-js-spinner",widget:!0});var m=function(e){this.element_=e,this.init()};window.MaterialSwitch=m,m.prototype.Constant_={TINY_TIMEOUT:.001},m.prototype.CssClasses_={INPUT:"mdl-switch__input",TRACK:"mdl-switch__track",THUMB:"mdl-switch__thumb",FOCUS_HELPER:"mdl-switch__focus-helper",RIPPLE_EFFECT:"mdl-js-ripple-effect",RIPPLE_IGNORE_EVENTS:"mdl-js-ripple-effect--ignore-events",RIPPLE_CONTAINER:"mdl-switch__ripple-container",RIPPLE_CENTER:"mdl-ripple--center",RIPPLE:"mdl-ripple",IS_FOCUSED:"is-focused",IS_DISABLED:"is-disabled",IS_CHECKED:"is-checked"},m.prototype.onChange_=function(e){this.updateClasses_()},m.prototype.onFocus_=function(e){this.element_.classList.add(this.CssClasses_.IS_FOCUSED)},m.prototype.onBlur_=function(e){this.element_.classList.remove(this.CssClasses_.IS_FOCUSED)},m.prototype.onMouseUp_=function(e){this.blur_()},m.prototype.updateClasses_=function(){this.checkDisabled(),this.checkToggleState()},m.prototype.blur_=function(){window.setTimeout(function(){this.inputElement_.blur()}.bind(this),this.Constant_.TINY_TIMEOUT)},m.prototype.checkDisabled=function(){this.inputElement_.disabled?this.element_.classList.add(this.CssClasses_.IS_DISABLED):this.element_.classList.remove(this.CssClasses_.IS_DISABLED)},m.prototype.checkDisabled=m.prototype.checkDisabled,m.prototype.checkToggleState=function(){this.inputElement_.checked?this.element_.classList.add(this.CssClasses_.IS_CHECKED):this.element_.classList.remove(this.CssClasses_.IS_CHECKED);
},m.prototype.checkToggleState=m.prototype.checkToggleState,m.prototype.disable=function(){this.inputElement_.disabled=!0,this.updateClasses_()},m.prototype.disable=m.prototype.disable,m.prototype.enable=function(){this.inputElement_.disabled=!1,this.updateClasses_()},m.prototype.enable=m.prototype.enable,m.prototype.on=function(){this.inputElement_.checked=!0,this.updateClasses_()},m.prototype.on=m.prototype.on,m.prototype.off=function(){this.inputElement_.checked=!1,this.updateClasses_()},m.prototype.off=m.prototype.off,m.prototype.init=function(){if(this.element_){this.inputElement_=this.element_.querySelector("."+this.CssClasses_.INPUT);var e=document.createElement("div");e.classList.add(this.CssClasses_.TRACK);var t=document.createElement("div");t.classList.add(this.CssClasses_.THUMB);var n=document.createElement("span");if(n.classList.add(this.CssClasses_.FOCUS_HELPER),t.appendChild(n),this.element_.appendChild(e),this.element_.appendChild(t),this.boundMouseUpHandler=this.onMouseUp_.bind(this),this.element_.classList.contains(this.CssClasses_.RIPPLE_EFFECT)){this.element_.classList.add(this.CssClasses_.RIPPLE_IGNORE_EVENTS),this.rippleContainerElement_=document.createElement("span"),this.rippleContainerElement_.classList.add(this.CssClasses_.RIPPLE_CONTAINER),this.rippleContainerElement_.classList.add(this.CssClasses_.RIPPLE_EFFECT),this.rippleContainerElement_.classList.add(this.CssClasses_.RIPPLE_CENTER),this.rippleContainerElement_.addEventListener("mouseup",this.boundMouseUpHandler);var i=document.createElement("span");i.classList.add(this.CssClasses_.RIPPLE),this.rippleContainerElement_.appendChild(i),this.element_.appendChild(this.rippleContainerElement_)}this.boundChangeHandler=this.onChange_.bind(this),this.boundFocusHandler=this.onFocus_.bind(this),this.boundBlurHandler=this.onBlur_.bind(this),this.inputElement_.addEventListener("change",this.boundChangeHandler),this.inputElement_.addEventListener("focus",this.boundFocusHandler),this.inputElement_.addEventListener("blur",this.boundBlurHandler),this.element_.addEventListener("mouseup",this.boundMouseUpHandler),this.updateClasses_(),this.element_.classList.add("is-upgraded")}},n.register({constructor:m,classAsString:"MaterialSwitch",cssClass:"mdl-js-switch",widget:!0});var g=function(e){this.element_=e,this.init()};window.MaterialTabs=g,g.prototype.Constant_={},g.prototype.CssClasses_={TAB_CLASS:"mdl-tabs__tab",PANEL_CLASS:"mdl-tabs__panel",ACTIVE_CLASS:"is-active",UPGRADED_CLASS:"is-upgraded",MDL_JS_RIPPLE_EFFECT:"mdl-js-ripple-effect",MDL_RIPPLE_CONTAINER:"mdl-tabs__ripple-container",MDL_RIPPLE:"mdl-ripple",MDL_JS_RIPPLE_EFFECT_IGNORE_EVENTS:"mdl-js-ripple-effect--ignore-events"},g.prototype.initTabs_=function(){this.element_.classList.contains(this.CssClasses_.MDL_JS_RIPPLE_EFFECT)&&this.element_.classList.add(this.CssClasses_.MDL_JS_RIPPLE_EFFECT_IGNORE_EVENTS),this.tabs_=this.element_.querySelectorAll("."+this.CssClasses_.TAB_CLASS),this.panels_=this.element_.querySelectorAll("."+this.CssClasses_.PANEL_CLASS);for(var t=0;t<this.tabs_.length;t++)new e(this.tabs_[t],this);this.element_.classList.add(this.CssClasses_.UPGRADED_CLASS)},g.prototype.resetTabState_=function(){for(var e=0;e<this.tabs_.length;e++)this.tabs_[e].classList.remove(this.CssClasses_.ACTIVE_CLASS)},g.prototype.resetPanelState_=function(){for(var e=0;e<this.panels_.length;e++)this.panels_[e].classList.remove(this.CssClasses_.ACTIVE_CLASS)},g.prototype.init=function(){this.element_&&this.initTabs_()},n.register({constructor:g,classAsString:"MaterialTabs",cssClass:"mdl-js-tabs"});var y=function(e){this.element_=e,this.maxRows=this.Constant_.NO_MAX_ROWS,this.init()};window.MaterialTextfield=y,y.prototype.Constant_={NO_MAX_ROWS:-1,MAX_ROWS_ATTRIBUTE:"maxrows"},y.prototype.CssClasses_={LABEL:"mdl-textfield__label",INPUT:"mdl-textfield__input",IS_DIRTY:"is-dirty",IS_FOCUSED:"is-focused",IS_DISABLED:"is-disabled",IS_INVALID:"is-invalid",IS_UPGRADED:"is-upgraded",HAS_PLACEHOLDER:"has-placeholder"},y.prototype.onKeyDown_=function(e){var t=e.target.value.split("\n").length;13===e.keyCode&&t>=this.maxRows&&e.preventDefault()},y.prototype.onFocus_=function(e){this.element_.classList.add(this.CssClasses_.IS_FOCUSED)},y.prototype.onBlur_=function(e){this.element_.classList.remove(this.CssClasses_.IS_FOCUSED)},y.prototype.onReset_=function(e){this.updateClasses_()},y.prototype.updateClasses_=function(){this.checkDisabled(),this.checkValidity(),this.checkDirty(),this.checkFocus()},y.prototype.checkDisabled=function(){this.input_.disabled?this.element_.classList.add(this.CssClasses_.IS_DISABLED):this.element_.classList.remove(this.CssClasses_.IS_DISABLED)},y.prototype.checkDisabled=y.prototype.checkDisabled,y.prototype.checkFocus=function(){Boolean(this.element_.querySelector(":focus"))?this.element_.classList.add(this.CssClasses_.IS_FOCUSED):this.element_.classList.remove(this.CssClasses_.IS_FOCUSED)},y.prototype.checkFocus=y.prototype.checkFocus,y.prototype.checkValidity=function(){this.input_.validity&&(this.input_.validity.valid?this.element_.classList.remove(this.CssClasses_.IS_INVALID):this.element_.classList.add(this.CssClasses_.IS_INVALID))},y.prototype.checkValidity=y.prototype.checkValidity,y.prototype.checkDirty=function(){this.input_.value&&this.input_.value.length>0?this.element_.classList.add(this.CssClasses_.IS_DIRTY):this.element_.classList.remove(this.CssClasses_.IS_DIRTY)},y.prototype.checkDirty=y.prototype.checkDirty,y.prototype.disable=function(){this.input_.disabled=!0,this.updateClasses_()},y.prototype.disable=y.prototype.disable,y.prototype.enable=function(){this.input_.disabled=!1,this.updateClasses_()},y.prototype.enable=y.prototype.enable,y.prototype.change=function(e){this.input_.value=e||"",this.updateClasses_()},y.prototype.change=y.prototype.change,y.prototype.init=function(){if(this.element_&&(this.label_=this.element_.querySelector("."+this.CssClasses_.LABEL),this.input_=this.element_.querySelector("."+this.CssClasses_.INPUT),this.input_)){this.input_.hasAttribute(this.Constant_.MAX_ROWS_ATTRIBUTE)&&(this.maxRows=parseInt(this.input_.getAttribute(this.Constant_.MAX_ROWS_ATTRIBUTE),10),isNaN(this.maxRows)&&(this.maxRows=this.Constant_.NO_MAX_ROWS)),this.input_.hasAttribute("placeholder")&&this.element_.classList.add(this.CssClasses_.HAS_PLACEHOLDER),this.boundUpdateClassesHandler=this.updateClasses_.bind(this),this.boundFocusHandler=this.onFocus_.bind(this),this.boundBlurHandler=this.onBlur_.bind(this),this.boundResetHandler=this.onReset_.bind(this),this.input_.addEventListener("input",this.boundUpdateClassesHandler),this.input_.addEventListener("focus",this.boundFocusHandler),this.input_.addEventListener("blur",this.boundBlurHandler),this.input_.addEventListener("reset",this.boundResetHandler),this.maxRows!==this.Constant_.NO_MAX_ROWS&&(this.boundKeyDownHandler=this.onKeyDown_.bind(this),this.input_.addEventListener("keydown",this.boundKeyDownHandler));var e=this.element_.classList.contains(this.CssClasses_.IS_INVALID);this.updateClasses_(),this.element_.classList.add(this.CssClasses_.IS_UPGRADED),e&&this.element_.classList.add(this.CssClasses_.IS_INVALID),this.input_.hasAttribute("autofocus")&&(this.element_.focus(),this.checkFocus())}},n.register({constructor:y,classAsString:"MaterialTextfield",cssClass:"mdl-js-textfield",widget:!0});var v=function(e){this.element_=e,this.init()};window.MaterialTooltip=v,v.prototype.Constant_={},v.prototype.CssClasses_={IS_ACTIVE:"is-active",BOTTOM:"mdl-tooltip--bottom",LEFT:"mdl-tooltip--left",RIGHT:"mdl-tooltip--right",TOP:"mdl-tooltip--top"},v.prototype.handleMouseEnter_=function(e){var t=e.target.getBoundingClientRect(),n=t.left+t.width/2,i=t.top+t.height/2,s=-1*(this.element_.offsetWidth/2),r=-1*(this.element_.offsetHeight/2);this.element_.classList.contains(this.CssClasses_.LEFT)||this.element_.classList.contains(this.CssClasses_.RIGHT)?(n=t.width/2,i+r<0?(this.element_.style.top="0",this.element_.style.marginTop="0"):(this.element_.style.top=i+"px",this.element_.style.marginTop=r+"px")):n+s<0?(this.element_.style.left="0",this.element_.style.marginLeft="0"):(this.element_.style.left=n+"px",this.element_.style.marginLeft=s+"px"),this.element_.classList.contains(this.CssClasses_.TOP)?this.element_.style.top=t.top-this.element_.offsetHeight-10+"px":this.element_.classList.contains(this.CssClasses_.RIGHT)?this.element_.style.left=t.left+t.width+10+"px":this.element_.classList.contains(this.CssClasses_.LEFT)?this.element_.style.left=t.left-this.element_.offsetWidth-10+"px":this.element_.style.top=t.top+t.height+10+"px",this.element_.classList.add(this.CssClasses_.IS_ACTIVE)},v.prototype.hideTooltip_=function(){this.element_.classList.remove(this.CssClasses_.IS_ACTIVE)},v.prototype.init=function(){if(this.element_){var e=this.element_.getAttribute("for")||this.element_.getAttribute("data-mdl-for");e&&(this.forElement_=document.getElementById(e)),this.forElement_&&(this.forElement_.hasAttribute("tabindex")||this.forElement_.setAttribute("tabindex","0"),this.boundMouseEnterHandler=this.handleMouseEnter_.bind(this),this.boundMouseLeaveAndScrollHandler=this.hideTooltip_.bind(this),this.forElement_.addEventListener("mouseenter",this.boundMouseEnterHandler,!1),this.forElement_.addEventListener("touchend",this.boundMouseEnterHandler,!1),this.forElement_.addEventListener("mouseleave",this.boundMouseLeaveAndScrollHandler,!1),window.addEventListener("scroll",this.boundMouseLeaveAndScrollHandler,!0),window.addEventListener("touchstart",this.boundMouseLeaveAndScrollHandler))}},n.register({constructor:v,classAsString:"MaterialTooltip",cssClass:"mdl-tooltip"});var b=function(e){this.element_=e,this.init()};window.MaterialLayout=b,b.prototype.Constant_={MAX_WIDTH:"(max-width: 1024px)",TAB_SCROLL_PIXELS:100,RESIZE_TIMEOUT:100,MENU_ICON:"&#xE5D2;",CHEVRON_LEFT:"chevron_left",CHEVRON_RIGHT:"chevron_right"},b.prototype.Keycodes_={ENTER:13,ESCAPE:27,SPACE:32},b.prototype.Mode_={STANDARD:0,SEAMED:1,WATERFALL:2,SCROLL:3},b.prototype.CssClasses_={CONTAINER:"mdl-layout__container",HEADER:"mdl-layout__header",DRAWER:"mdl-layout__drawer",CONTENT:"mdl-layout__content",DRAWER_BTN:"mdl-layout__drawer-button",ICON:"material-icons",JS_RIPPLE_EFFECT:"mdl-js-ripple-effect",RIPPLE_CONTAINER:"mdl-layout__tab-ripple-container",RIPPLE:"mdl-ripple",RIPPLE_IGNORE_EVENTS:"mdl-js-ripple-effect--ignore-events",HEADER_SEAMED:"mdl-layout__header--seamed",HEADER_WATERFALL:"mdl-layout__header--waterfall",HEADER_SCROLL:"mdl-layout__header--scroll",FIXED_HEADER:"mdl-layout--fixed-header",OBFUSCATOR:"mdl-layout__obfuscator",TAB_BAR:"mdl-layout__tab-bar",TAB_CONTAINER:"mdl-layout__tab-bar-container",TAB:"mdl-layout__tab",TAB_BAR_BUTTON:"mdl-layout__tab-bar-button",TAB_BAR_LEFT_BUTTON:"mdl-layout__tab-bar-left-button",TAB_BAR_RIGHT_BUTTON:"mdl-layout__tab-bar-right-button",TAB_MANUAL_SWITCH:"mdl-layout__tab-manual-switch",PANEL:"mdl-layout__tab-panel",HAS_DRAWER:"has-drawer",HAS_TABS:"has-tabs",HAS_SCROLLING_HEADER:"has-scrolling-header",CASTING_SHADOW:"is-casting-shadow",IS_COMPACT:"is-compact",IS_SMALL_SCREEN:"is-small-screen",IS_DRAWER_OPEN:"is-visible",IS_ACTIVE:"is-active",IS_UPGRADED:"is-upgraded",IS_ANIMATING:"is-animating",ON_LARGE_SCREEN:"mdl-layout--large-screen-only",ON_SMALL_SCREEN:"mdl-layout--small-screen-only"},b.prototype.contentScrollHandler_=function(){if(!this.header_.classList.contains(this.CssClasses_.IS_ANIMATING)){var e=!this.element_.classList.contains(this.CssClasses_.IS_SMALL_SCREEN)||this.element_.classList.contains(this.CssClasses_.FIXED_HEADER);this.content_.scrollTop>0&&!this.header_.classList.contains(this.CssClasses_.IS_COMPACT)?(this.header_.classList.add(this.CssClasses_.CASTING_SHADOW),this.header_.classList.add(this.CssClasses_.IS_COMPACT),e&&this.header_.classList.add(this.CssClasses_.IS_ANIMATING)):this.content_.scrollTop<=0&&this.header_.classList.contains(this.CssClasses_.IS_COMPACT)&&(this.header_.classList.remove(this.CssClasses_.CASTING_SHADOW),this.header_.classList.remove(this.CssClasses_.IS_COMPACT),e&&this.header_.classList.add(this.CssClasses_.IS_ANIMATING))}},b.prototype.keyboardEventHandler_=function(e){e.keyCode===this.Keycodes_.ESCAPE&&this.drawer_.classList.contains(this.CssClasses_.IS_DRAWER_OPEN)&&this.toggleDrawer()},b.prototype.screenSizeHandler_=function(){this.screenSizeMediaQuery_.matches?this.element_.classList.add(this.CssClasses_.IS_SMALL_SCREEN):(this.element_.classList.remove(this.CssClasses_.IS_SMALL_SCREEN),this.drawer_&&(this.drawer_.classList.remove(this.CssClasses_.IS_DRAWER_OPEN),this.obfuscator_.classList.remove(this.CssClasses_.IS_DRAWER_OPEN)))},b.prototype.drawerToggleHandler_=function(e){if(e&&"keydown"===e.type){if(e.keyCode!==this.Keycodes_.SPACE&&e.keyCode!==this.Keycodes_.ENTER)return;e.preventDefault()}this.toggleDrawer()},b.prototype.headerTransitionEndHandler_=function(){this.header_.classList.remove(this.CssClasses_.IS_ANIMATING)},b.prototype.headerClickHandler_=function(){this.header_.classList.contains(this.CssClasses_.IS_COMPACT)&&(this.header_.classList.remove(this.CssClasses_.IS_COMPACT),this.header_.classList.add(this.CssClasses_.IS_ANIMATING))},b.prototype.resetTabState_=function(e){for(var t=0;t<e.length;t++)e[t].classList.remove(this.CssClasses_.IS_ACTIVE)},b.prototype.resetPanelState_=function(e){for(var t=0;t<e.length;t++)e[t].classList.remove(this.CssClasses_.IS_ACTIVE)},b.prototype.toggleDrawer=function(){var e=this.element_.querySelector("."+this.CssClasses_.DRAWER_BTN);this.drawer_.classList.toggle(this.CssClasses_.IS_DRAWER_OPEN),this.obfuscator_.classList.toggle(this.CssClasses_.IS_DRAWER_OPEN),this.drawer_.classList.contains(this.CssClasses_.IS_DRAWER_OPEN)?(this.drawer_.setAttribute("aria-hidden","false"),e.setAttribute("aria-expanded","true")):(this.drawer_.setAttribute("aria-hidden","true"),e.setAttribute("aria-expanded","false"))},b.prototype.toggleDrawer=b.prototype.toggleDrawer,b.prototype.init=function(){if(this.element_){var e=document.createElement("div");e.classList.add(this.CssClasses_.CONTAINER);var n=this.element_.querySelector(":focus");this.element_.parentElement.insertBefore(e,this.element_),this.element_.parentElement.removeChild(this.element_),e.appendChild(this.element_),n&&n.focus();for(var i=this.element_.childNodes,s=i.length,r=0;r<s;r++){var o=i[r];o.classList&&o.classList.contains(this.CssClasses_.HEADER)&&(this.header_=o),o.classList&&o.classList.contains(this.CssClasses_.DRAWER)&&(this.drawer_=o),o.classList&&o.classList.contains(this.CssClasses_.CONTENT)&&(this.content_=o)}window.addEventListener("pageshow",function(e){e.persisted&&(this.element_.style.overflowY="hidden",requestAnimationFrame(function(){this.element_.style.overflowY=""}.bind(this)))}.bind(this),!1),this.header_&&(this.tabBar_=this.header_.querySelector("."+this.CssClasses_.TAB_BAR));var a=this.Mode_.STANDARD;if(this.header_&&(this.header_.classList.contains(this.CssClasses_.HEADER_SEAMED)?a=this.Mode_.SEAMED:this.header_.classList.contains(this.CssClasses_.HEADER_WATERFALL)?(a=this.Mode_.WATERFALL,this.header_.addEventListener("transitionend",this.headerTransitionEndHandler_.bind(this)),this.header_.addEventListener("click",this.headerClickHandler_.bind(this))):this.header_.classList.contains(this.CssClasses_.HEADER_SCROLL)&&(a=this.Mode_.SCROLL,e.classList.add(this.CssClasses_.HAS_SCROLLING_HEADER)),a===this.Mode_.STANDARD?(this.header_.classList.add(this.CssClasses_.CASTING_SHADOW),this.tabBar_&&this.tabBar_.classList.add(this.CssClasses_.CASTING_SHADOW)):a===this.Mode_.SEAMED||a===this.Mode_.SCROLL?(this.header_.classList.remove(this.CssClasses_.CASTING_SHADOW),this.tabBar_&&this.tabBar_.classList.remove(this.CssClasses_.CASTING_SHADOW)):a===this.Mode_.WATERFALL&&(this.content_.addEventListener("scroll",this.contentScrollHandler_.bind(this)),this.contentScrollHandler_())),this.drawer_){var l=this.element_.querySelector("."+this.CssClasses_.DRAWER_BTN);if(!l){l=document.createElement("div"),l.setAttribute("aria-expanded","false"),l.setAttribute("role","button"),l.setAttribute("tabindex","0"),l.classList.add(this.CssClasses_.DRAWER_BTN);var c=document.createElement("i");c.classList.add(this.CssClasses_.ICON),c.innerHTML=this.Constant_.MENU_ICON,l.appendChild(c)}this.drawer_.classList.contains(this.CssClasses_.ON_LARGE_SCREEN)?l.classList.add(this.CssClasses_.ON_LARGE_SCREEN):this.drawer_.classList.contains(this.CssClasses_.ON_SMALL_SCREEN)&&l.classList.add(this.CssClasses_.ON_SMALL_SCREEN),l.addEventListener("click",this.drawerToggleHandler_.bind(this)),l.addEventListener("keydown",this.drawerToggleHandler_.bind(this)),this.element_.classList.add(this.CssClasses_.HAS_DRAWER),this.element_.classList.contains(this.CssClasses_.FIXED_HEADER)?this.header_.insertBefore(l,this.header_.firstChild):this.element_.insertBefore(l,this.content_);var u=document.createElement("div");u.classList.add(this.CssClasses_.OBFUSCATOR),this.element_.appendChild(u),u.addEventListener("click",this.drawerToggleHandler_.bind(this)),this.obfuscator_=u,this.drawer_.addEventListener("keydown",this.keyboardEventHandler_.bind(this)),this.drawer_.setAttribute("aria-hidden","true")}if(this.screenSizeMediaQuery_=window.matchMedia(this.Constant_.MAX_WIDTH),this.screenSizeMediaQuery_.addListener(this.screenSizeHandler_.bind(this)),this.screenSizeHandler_(),this.header_&&this.tabBar_){this.element_.classList.add(this.CssClasses_.HAS_TABS);var d=document.createElement("div");d.classList.add(this.CssClasses_.TAB_CONTAINER),this.header_.insertBefore(d,this.tabBar_),this.header_.removeChild(this.tabBar_);var p=document.createElement("div");p.classList.add(this.CssClasses_.TAB_BAR_BUTTON),p.classList.add(this.CssClasses_.TAB_BAR_LEFT_BUTTON);var h=document.createElement("i");h.classList.add(this.CssClasses_.ICON),h.textContent=this.Constant_.CHEVRON_LEFT,p.appendChild(h),p.addEventListener("click",function(){this.tabBar_.scrollLeft-=this.Constant_.TAB_SCROLL_PIXELS}.bind(this));var f=document.createElement("div");f.classList.add(this.CssClasses_.TAB_BAR_BUTTON),f.classList.add(this.CssClasses_.TAB_BAR_RIGHT_BUTTON);var _=document.createElement("i");_.classList.add(this.CssClasses_.ICON),_.textContent=this.Constant_.CHEVRON_RIGHT,f.appendChild(_),f.addEventListener("click",function(){this.tabBar_.scrollLeft+=this.Constant_.TAB_SCROLL_PIXELS}.bind(this)),d.appendChild(p),d.appendChild(this.tabBar_),d.appendChild(f);var m=function(){this.tabBar_.scrollLeft>0?p.classList.add(this.CssClasses_.IS_ACTIVE):p.classList.remove(this.CssClasses_.IS_ACTIVE),this.tabBar_.scrollLeft<this.tabBar_.scrollWidth-this.tabBar_.offsetWidth?f.classList.add(this.CssClasses_.IS_ACTIVE):f.classList.remove(this.CssClasses_.IS_ACTIVE)}.bind(this);this.tabBar_.addEventListener("scroll",m),m();var g=function(){this.resizeTimeoutId_&&clearTimeout(this.resizeTimeoutId_),this.resizeTimeoutId_=setTimeout(function(){m(),this.resizeTimeoutId_=null}.bind(this),this.Constant_.RESIZE_TIMEOUT)}.bind(this);window.addEventListener("resize",g),this.tabBar_.classList.contains(this.CssClasses_.JS_RIPPLE_EFFECT)&&this.tabBar_.classList.add(this.CssClasses_.RIPPLE_IGNORE_EVENTS);for(var y=this.tabBar_.querySelectorAll("."+this.CssClasses_.TAB),v=this.content_.querySelectorAll("."+this.CssClasses_.PANEL),b=0;b<y.length;b++)new t(y[b],y,v,this)}this.element_.classList.add(this.CssClasses_.IS_UPGRADED)}},window.MaterialLayoutTab=t,n.register({constructor:b,classAsString:"MaterialLayout",cssClass:"mdl-js-layout"});var C=function(e){this.element_=e,this.init()};window.MaterialDataTable=C,C.prototype.Constant_={},C.prototype.CssClasses_={DATA_TABLE:"mdl-data-table",SELECTABLE:"mdl-data-table--selectable",SELECT_ELEMENT:"mdl-data-table__select",IS_SELECTED:"is-selected",IS_UPGRADED:"is-upgraded"},C.prototype.selectRow_=function(e,t,n){return t?function(){e.checked?t.classList.add(this.CssClasses_.IS_SELECTED):t.classList.remove(this.CssClasses_.IS_SELECTED)}.bind(this):n?function(){var t,i;if(e.checked)for(t=0;t<n.length;t++)i=n[t].querySelector("td").querySelector(".mdl-checkbox"),i.MaterialCheckbox.check(),n[t].classList.add(this.CssClasses_.IS_SELECTED);else for(t=0;t<n.length;t++)i=n[t].querySelector("td").querySelector(".mdl-checkbox"),i.MaterialCheckbox.uncheck(),n[t].classList.remove(this.CssClasses_.IS_SELECTED)}.bind(this):void 0},C.prototype.createCheckbox_=function(e,t){var i=document.createElement("label"),s=["mdl-checkbox","mdl-js-checkbox","mdl-js-ripple-effect",this.CssClasses_.SELECT_ELEMENT];i.className=s.join(" ");var r=document.createElement("input");return r.type="checkbox",r.classList.add("mdl-checkbox__input"),e?(r.checked=e.classList.contains(this.CssClasses_.IS_SELECTED),r.addEventListener("change",this.selectRow_(r,e))):t&&r.addEventListener("change",this.selectRow_(r,null,t)),i.appendChild(r),n.upgradeElement(i,"MaterialCheckbox"),i},C.prototype.init=function(){if(this.element_){var e=this.element_.querySelector("th"),t=Array.prototype.slice.call(this.element_.querySelectorAll("tbody tr")),n=Array.prototype.slice.call(this.element_.querySelectorAll("tfoot tr")),i=t.concat(n);if(this.element_.classList.contains(this.CssClasses_.SELECTABLE)){var s=document.createElement("th"),r=this.createCheckbox_(null,i);s.appendChild(r),e.parentElement.insertBefore(s,e);for(var o=0;o<i.length;o++){var a=i[o].querySelector("td");if(a){var l=document.createElement("td");if("TBODY"===i[o].parentNode.nodeName.toUpperCase()){var c=this.createCheckbox_(i[o]);l.appendChild(c)}i[o].insertBefore(l,a)}}this.element_.classList.add(this.CssClasses_.IS_UPGRADED)}}},n.register({constructor:C,classAsString:"MaterialDataTable",cssClass:"mdl-js-data-table"});var x=function(e){this.element_=e,this.init()};window.MaterialRipple=x,x.prototype.Constant_={INITIAL_SCALE:"scale(0.0001, 0.0001)",INITIAL_SIZE:"1px",INITIAL_OPACITY:"0.4",FINAL_OPACITY:"0",FINAL_SCALE:""},x.prototype.CssClasses_={RIPPLE_CENTER:"mdl-ripple--center",RIPPLE_EFFECT_IGNORE_EVENTS:"mdl-js-ripple-effect--ignore-events",RIPPLE:"mdl-ripple",IS_ANIMATING:"is-animating",IS_VISIBLE:"is-visible"},x.prototype.downHandler_=function(e){if(!this.rippleElement_.style.width&&!this.rippleElement_.style.height){var t=this.element_.getBoundingClientRect();this.boundHeight=t.height,this.boundWidth=t.width,this.rippleSize_=2*Math.sqrt(t.width*t.width+t.height*t.height)+2,this.rippleElement_.style.width=this.rippleSize_+"px",this.rippleElement_.style.height=this.rippleSize_+"px"}if(this.rippleElement_.classList.add(this.CssClasses_.IS_VISIBLE),"mousedown"===e.type&&this.ignoringMouseDown_)this.ignoringMouseDown_=!1;else{"touchstart"===e.type&&(this.ignoringMouseDown_=!0);var n=this.getFrameCount();if(n>0)return;this.setFrameCount(1);var i,s,r=e.currentTarget.getBoundingClientRect();if(0===e.clientX&&0===e.clientY)i=Math.round(r.width/2),s=Math.round(r.height/2);else{var o=void 0!==e.clientX?e.clientX:e.touches[0].clientX,a=void 0!==e.clientY?e.clientY:e.touches[0].clientY;i=Math.round(o-r.left),s=Math.round(a-r.top)}this.setRippleXY(i,s),this.setRippleStyles(!0),window.requestAnimationFrame(this.animFrameHandler.bind(this))}},x.prototype.upHandler_=function(e){e&&2!==e.detail&&window.setTimeout(function(){this.rippleElement_.classList.remove(this.CssClasses_.IS_VISIBLE)}.bind(this),0)},x.prototype.init=function(){if(this.element_){var e=this.element_.classList.contains(this.CssClasses_.RIPPLE_CENTER);this.element_.classList.contains(this.CssClasses_.RIPPLE_EFFECT_IGNORE_EVENTS)||(this.rippleElement_=this.element_.querySelector("."+this.CssClasses_.RIPPLE),this.frameCount_=0,this.rippleSize_=0,this.x_=0,this.y_=0,this.ignoringMouseDown_=!1,this.boundDownHandler=this.downHandler_.bind(this),this.element_.addEventListener("mousedown",this.boundDownHandler),this.element_.addEventListener("touchstart",this.boundDownHandler),this.boundUpHandler=this.upHandler_.bind(this),this.element_.addEventListener("mouseup",this.boundUpHandler),this.element_.addEventListener("mouseleave",this.boundUpHandler),this.element_.addEventListener("touchend",this.boundUpHandler),this.element_.addEventListener("blur",this.boundUpHandler),this.getFrameCount=function(){return this.frameCount_},this.setFrameCount=function(e){this.frameCount_=e},this.getRippleElement=function(){return this.rippleElement_},this.setRippleXY=function(e,t){this.x_=e,this.y_=t},this.setRippleStyles=function(t){if(null!==this.rippleElement_){var n,i,s,r="translate("+this.x_+"px, "+this.y_+"px)";t?(i=this.Constant_.INITIAL_SCALE,s=this.Constant_.INITIAL_SIZE):(i=this.Constant_.FINAL_SCALE,s=this.rippleSize_+"px",e&&(r="translate("+this.boundWidth/2+"px, "+this.boundHeight/2+"px)")),n="translate(-50%, -50%) "+r+i,this.rippleElement_.style.webkitTransform=n,this.rippleElement_.style.msTransform=n,this.rippleElement_.style.transform=n,t?this.rippleElement_.classList.remove(this.CssClasses_.IS_ANIMATING):this.rippleElement_.classList.add(this.CssClasses_.IS_ANIMATING)}},this.animFrameHandler=function(){this.frameCount_-- >0?window.requestAnimationFrame(this.animFrameHandler.bind(this)):this.setRippleStyles(!1)})}},n.register({constructor:x,classAsString:"MaterialRipple",cssClass:"mdl-js-ripple-effect",widget:!1})}(),window.componentHandler=componentHandler,define("material",function(){}),requirejs({locale:navigator.language},["i18n!nls/main","app/messages","app/config","app/app","filesaver","lodash","jquery","jquery.keymap","jquery.aftertransition","bililiteRange","bililiteRange.undo","bililiteRange.fancytext","material","domReady!"],function(e,t,n,i,s,r,o){window.app=i,window.t=e,i.$window=o(window),i.$document=o(document),i.$html=o("html"),i.$body=o("body"),function(){function t(e){for(var n in e)e.hasOwnProperty(n)&&(r.isString(e[n])?/<%/.test(e[n])&&(e[n]=r.template(e[n])):t(e[n]))}t(e)}(),o.fn.longClick=function(e,t,n){function s(n){p.timer||("touchstart"==n.type?(h.x=n.originalEvent.touches[0].clientX,h.y=n.originalEvent.touches[0].clientY,p.off("mousedown",e,s),p.on("touchend",e,c),p.on("touchstart",e,a)):(h.x=n.clientX,h.y=n.clientY,p.on("mouseup",e,c)),i.$document.on("mousemove touchmove",e,l),p.on("mouseout",e,a),p.timer=setTimeout(function(){a(),n.click_duration=u,n.preventDefault(),n.stopPropagation(),t(n)},u))}function a(){clearTimeout(p.timer),p.timer=null,p.off("touchend mouseup",e,c),i.$document.off("mousemove touchmove",e,l),p.off("mouseout touchstart",e,a)}function l(e){var t,n;"touchmove"==e.type?(t=e.originalEvent.touches[0].clientX,n=e.originalEvent.touches[0].clientY):(t=e.clientX,n=e.clientY),d<Math.sqrt(Math.pow(h.x-t,2)+Math.pow(h.y-n,2))&&a()}function c(e){r.isFunction(n)&&n(e),a()}var u=350,d=5,p=o(this),h={};return r.isFunction(e)&&(r.isFunction(t)&&(n=t),t=e,e=""),p.on("touchstart mousedown",e,s),this},o("title").text(e.app_title),i.$html.hasClass("mdl-js")||componentHandler.init(),i.menu.render(),i.$ptn=o("#ptn"),i.$viewer=o("#viewer"),i.$board_view=i.$viewer.find(".table-wrapper"),i.$controls=i.$viewer.find(".controls"),i.$editor=o("#editor"),i.$fab=o("#fab"),i.$download=o("#download"),i.$open=o("#open"),i.$menu_edit=o("#menu-edit"),i.$menu_play=o("#menu-play"),i.m=new t("global"),i.can_hover=!1,i.$window.one("mousemove",function(e){i.touches||(i.can_hover=!0,i.$html.addClass("can-hover"))}).one("touchstart",function(e){i.$window.off("mousemove")}),i.range=bililiteRange(i.$ptn[0]),i.range.undo(0),i.$html.addClass(r.map(r.keys(r.pickBy(i.config,r.isBoolean)),function(e){return i.config[e]?e.replace(/_/g,"-"):""}).join(" ")),i.is_in_iframe&&i.$html.addClass("embed"),i.$fab.on("touchstart click",function(e){e.stopPropagation(),e.preventDefault(),i.$html.hasClass("error")?i.game.is_editing?n.toggle("show_parse_errors"):i.toggle_edit_mode(!0):i.toggle_edit_mode()}).mouseover(function(){i.$fab.attr("title",i.$html.hasClass("error")?e.Show_Hide_Errors:i.game.is_editing?e.Play_Mode:e.Edit_Mode)}),i.$controls.find(".first").on("touchstart click",i.board.first).attr("title",e.First_Ply),i.$controls.find(".prev").on("touchstart click",i.board.prev_ply).attr("title",e.Previous_Ply),i.$controls.find(".play").on("touchstart click",i.board.playpause).attr("title",e.PlayPause),i.$controls.find(".next").on("touchstart click",i.board.next_ply).attr("title",e.Next_Ply),i.$controls.find(".last").on("touchstart click",i.board.last).attr("title",e.Last_Ply),i.$permalink=o("#permalink"),i.game.on_parse_end(i.update_after_parse),i.board.on_init(function(){i.$board_view.empty().append(i.board.render()),i.board.resize()}),i.$window.on("resize",i.resize),i.config.on_change(["show_axis_labels","show_flat_counts","show_current_move","show_unplayed_pieces","show_play_controls"],i.resize),i.board.on_resize(function(){!i.game.is_editing&&i.$editor.attr("style")||i.set_editor_width(i.board.vw,i.board.width)}),i.board.on_ply(i.update_after_ply),n.on_change("speed",function(e){var t=(new Date).getTime(),n=i.board.play_timestamp+6e4/e;i.board.is_playing&&(n<t?i.board.next():(clearTimeout(i.board.play_timer),setTimeout(i.board.next,n-t)))},"play"),n.on_change("board_opacity",function(e){i.$viewer.css("opacity",e/100)}),n.on_change("board_opacity"),n.on_change("board_3d",i.board.reposition_pieces),n.on_change("board_3d",function(t,n,s,r,o){o&&!i.is_blink&&i.m.help(e.help.board_3d_experimental)}),i.$body.on("touchstart",function(e){e.originalEvent.touches[0].clientX<10&&(i.menu.open(),e.preventDefault(),e.stopPropagation())}),n.on_change("board_rotation",i.board.rotate),i.$viewer.on("mousedown touchstart",i.board.rotate_handler).longClick(".square.valid",i.board.select_square,i.board.select_square).on("contextmenu",function(e){e.preventDefault()}).longClick(i.board.reset_rotation),i.$download.on("touchstart click",function(t){t.stopPropagation(),t.preventDefault(),s(new Blob([i.game.ptn],{type:"text/plain;charset=utf-8"}),(i.game.config.player1||e.Player1)+" vs "+(i.game.config.player2||e.Player2)+(i.game.config.result?" "+i.game.config.result.text.replace(/\//g,"-"):"")+(i.game.config.date?" "+i.game.config.date:"")+(i.game.config.time?"-"+i.game.config.time.replace(/\D/g,"."):"")+".ptn",!0)}),i.$open.on("change",function(e){e.stopPropagation(),e.preventDefault(),i.read_file(this.files[0]),o(this).val(""),i.menu.close()}),window.File&&window.FileReader&&window.FileList&&window.Blob&&i.$window.on("drop",function(e){e.stopPropagation(),e.preventDefault(),i.read_file(e.originalEvent.dataTransfer.files[0])}).on("dragover",function(e){e.preventDefault(),e.stopPropagation()}).on("dragleave",function(e){e.preventDefault(),e.stopPropagation()}),i.$window.on("error:parse",function(){i.$html.addClass("error")}).on("clear:error:parse",function(){i.$html.removeClass("error")}),bililiteRange.fancyText(i.$ptn[0],function(e,t){return t=t||i.$ptn.text(),!(!t||"\n"==t)&&i.game.parse(t)},100),i.game.parse(i.hash||i.default_ptn,!!i.hash,!sessionStorage.ptn),i.clear_undo_history(),i.$ptn.on("keyup mouseup",i.set_position_from_caret),i.supports_passive?i.$ptn[0].addEventListener("scroll",i.save_scroll_position,{passive:!0}):i.$ptn.on("scroll",i.save_scroll_position),n.animate_board?(i.$html.removeClass("animate-board"),i.toggle_edit_mode(i.$html.hasClass("error")),i.$html.height(),i.$html.addClass("animate-board")):i.toggle_edit_mode(i.$html.hasClass("error")),i.restore_caret(),"edit"==i.mode?i.$menu_edit.addClass("mdl-accordion--opened"):i.$menu_play.addClass("mdl-accordion--opened"),i.$window.on("keydown",function(e){var t,n=o(getSelection().focusNode),s=n.parent();e.keymap&&(e.keymap.replace("~","^"),i.current_dialogs.length?"Escape"==e.keymap&&(t=i.current_dialogs.pop(),t.close(),o(t).remove()):i.game.is_editing&&r.has(i.hotkeys.edit,e.keymap)?i.hotkeys.edit[e.keymap](e,n,s):!i.game.is_editing&&r.has(i.hotkeys.play,e.keymap)?i.hotkeys.play[e.keymap](e,n,s):r.has(i.hotkeys.global,e.keymap)&&i.hotkeys.global[e.keymap](e,n,s))})}),define("app/main",function(){}),requirejs.config({baseUrl:"js/lib",paths:{app:"../app",nls:"../app/nls",lodash:"lodash.min",jquery:"jquery.min",filesaver:"FileSaver.min",lzstring:"lz-string.min"},shim:{"bililiteRange.undo":{deps:["bililiteRange"]},"bililiteRange.fancytext":{
deps:["bililiteRange"]},"jquery.keymap":{deps:["jquery"]}}}),requirejs(["app/main"]),define("app",function(){});